(self.webpackChunkgptscription=self.webpackChunkgptscription||[]).push([[490],{31050:function(tt,te,Y){"use strict";var se;se={value:!0},se=se=se=te.Xx=se=se=te._w=te.aP=te.KS=se=te.jQ=void 0;const _e=Y(31416),y=Y(93350),ot=Y(17309);te.jQ=64,se=32,te.KS=64,te.aP=32;function re(z){const q=new Float64Array(16);if(z)for(let F=0;F<z.length;F++)q[F]=z[F];return q}const Oe=new Uint8Array(32);Oe[0]=9;const Te=re(),ie=re([1]),ne=re([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),ue=re([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),Re=re([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),we=re([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),Ce=re([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function ce(z,q){for(let F=0;F<16;F++)z[F]=q[F]|0}function rt(z){let q=1;for(let F=0;F<16;F++){let h=z[F]+q+65535;q=Math.floor(h/65536),z[F]=h-q*65536}z[0]+=q-1+37*(q-1)}function _t(z,q,F){const h=~(F-1);for(let S=0;S<16;S++){const me=h&(z[S]^q[S]);z[S]^=me,q[S]^=me}}function Qe(z,q){const F=re(),h=re();for(let S=0;S<16;S++)h[S]=q[S];rt(h),rt(h),rt(h);for(let S=0;S<2;S++){F[0]=h[0]-65517;for(let Fe=1;Fe<15;Fe++)F[Fe]=h[Fe]-65535-(F[Fe-1]>>16&1),F[Fe-1]&=65535;F[15]=h[15]-32767-(F[14]>>16&1);const me=F[15]>>16&1;F[14]&=65535,_t(h,F,1-me)}for(let S=0;S<16;S++)z[2*S]=h[S]&255,z[2*S+1]=h[S]>>8}function Ue(z,q){let F=0;for(let h=0;h<32;h++)F|=z[h]^q[h];return(1&F-1>>>8)-1}function Yt(z,q){const F=new Uint8Array(32),h=new Uint8Array(32);return Qe(F,z),Qe(h,q),Ue(F,h)}function Xt(z){const q=new Uint8Array(32);return Qe(q,z),q[0]&1}function Kt(z,q){for(let F=0;F<16;F++)z[F]=q[2*F]+(q[2*F+1]<<8);z[15]&=32767}function Ye(z,q,F){for(let h=0;h<16;h++)z[h]=q[h]+F[h]}function H(z,q,F){for(let h=0;h<16;h++)z[h]=q[h]-F[h]}function oe(z,q,F){let h,S,me=0,Fe=0,qe=0,yt=0,Ge=0,at=0,Bt=0,cr=0,er=0,Rt=0,wt=0,At=0,St=0,ut=0,ct=0,ft=0,it=0,kt=0,Ot=0,Ee=0,Tt=0,ur=0,xr=0,Pr=0,Ur=0,fr=0,Yr=0,yi=0,Yi=0,vi=0,mi=0,Dt=F[0],Lt=F[1],Nt=F[2],bt=F[3],tr=F[4],Vt=F[5],rr=F[6],Gt=F[7],jt=F[8],Mt=F[9],le=F[10],dt=F[11],Wt=F[12],zt=F[13],qt=F[14],Jt=F[15];h=q[0],me+=h*Dt,Fe+=h*Lt,qe+=h*Nt,yt+=h*bt,Ge+=h*tr,at+=h*Vt,Bt+=h*rr,cr+=h*Gt,er+=h*jt,Rt+=h*Mt,wt+=h*le,At+=h*dt,St+=h*Wt,ut+=h*zt,ct+=h*qt,ft+=h*Jt,h=q[1],Fe+=h*Dt,qe+=h*Lt,yt+=h*Nt,Ge+=h*bt,at+=h*tr,Bt+=h*Vt,cr+=h*rr,er+=h*Gt,Rt+=h*jt,wt+=h*Mt,At+=h*le,St+=h*dt,ut+=h*Wt,ct+=h*zt,ft+=h*qt,it+=h*Jt,h=q[2],qe+=h*Dt,yt+=h*Lt,Ge+=h*Nt,at+=h*bt,Bt+=h*tr,cr+=h*Vt,er+=h*rr,Rt+=h*Gt,wt+=h*jt,At+=h*Mt,St+=h*le,ut+=h*dt,ct+=h*Wt,ft+=h*zt,it+=h*qt,kt+=h*Jt,h=q[3],yt+=h*Dt,Ge+=h*Lt,at+=h*Nt,Bt+=h*bt,cr+=h*tr,er+=h*Vt,Rt+=h*rr,wt+=h*Gt,At+=h*jt,St+=h*Mt,ut+=h*le,ct+=h*dt,ft+=h*Wt,it+=h*zt,kt+=h*qt,Ot+=h*Jt,h=q[4],Ge+=h*Dt,at+=h*Lt,Bt+=h*Nt,cr+=h*bt,er+=h*tr,Rt+=h*Vt,wt+=h*rr,At+=h*Gt,St+=h*jt,ut+=h*Mt,ct+=h*le,ft+=h*dt,it+=h*Wt,kt+=h*zt,Ot+=h*qt,Ee+=h*Jt,h=q[5],at+=h*Dt,Bt+=h*Lt,cr+=h*Nt,er+=h*bt,Rt+=h*tr,wt+=h*Vt,At+=h*rr,St+=h*Gt,ut+=h*jt,ct+=h*Mt,ft+=h*le,it+=h*dt,kt+=h*Wt,Ot+=h*zt,Ee+=h*qt,Tt+=h*Jt,h=q[6],Bt+=h*Dt,cr+=h*Lt,er+=h*Nt,Rt+=h*bt,wt+=h*tr,At+=h*Vt,St+=h*rr,ut+=h*Gt,ct+=h*jt,ft+=h*Mt,it+=h*le,kt+=h*dt,Ot+=h*Wt,Ee+=h*zt,Tt+=h*qt,ur+=h*Jt,h=q[7],cr+=h*Dt,er+=h*Lt,Rt+=h*Nt,wt+=h*bt,At+=h*tr,St+=h*Vt,ut+=h*rr,ct+=h*Gt,ft+=h*jt,it+=h*Mt,kt+=h*le,Ot+=h*dt,Ee+=h*Wt,Tt+=h*zt,ur+=h*qt,xr+=h*Jt,h=q[8],er+=h*Dt,Rt+=h*Lt,wt+=h*Nt,At+=h*bt,St+=h*tr,ut+=h*Vt,ct+=h*rr,ft+=h*Gt,it+=h*jt,kt+=h*Mt,Ot+=h*le,Ee+=h*dt,Tt+=h*Wt,ur+=h*zt,xr+=h*qt,Pr+=h*Jt,h=q[9],Rt+=h*Dt,wt+=h*Lt,At+=h*Nt,St+=h*bt,ut+=h*tr,ct+=h*Vt,ft+=h*rr,it+=h*Gt,kt+=h*jt,Ot+=h*Mt,Ee+=h*le,Tt+=h*dt,ur+=h*Wt,xr+=h*zt,Pr+=h*qt,Ur+=h*Jt,h=q[10],wt+=h*Dt,At+=h*Lt,St+=h*Nt,ut+=h*bt,ct+=h*tr,ft+=h*Vt,it+=h*rr,kt+=h*Gt,Ot+=h*jt,Ee+=h*Mt,Tt+=h*le,ur+=h*dt,xr+=h*Wt,Pr+=h*zt,Ur+=h*qt,fr+=h*Jt,h=q[11],At+=h*Dt,St+=h*Lt,ut+=h*Nt,ct+=h*bt,ft+=h*tr,it+=h*Vt,kt+=h*rr,Ot+=h*Gt,Ee+=h*jt,Tt+=h*Mt,ur+=h*le,xr+=h*dt,Pr+=h*Wt,Ur+=h*zt,fr+=h*qt,Yr+=h*Jt,h=q[12],St+=h*Dt,ut+=h*Lt,ct+=h*Nt,ft+=h*bt,it+=h*tr,kt+=h*Vt,Ot+=h*rr,Ee+=h*Gt,Tt+=h*jt,ur+=h*Mt,xr+=h*le,Pr+=h*dt,Ur+=h*Wt,fr+=h*zt,Yr+=h*qt,yi+=h*Jt,h=q[13],ut+=h*Dt,ct+=h*Lt,ft+=h*Nt,it+=h*bt,kt+=h*tr,Ot+=h*Vt,Ee+=h*rr,Tt+=h*Gt,ur+=h*jt,xr+=h*Mt,Pr+=h*le,Ur+=h*dt,fr+=h*Wt,Yr+=h*zt,yi+=h*qt,Yi+=h*Jt,h=q[14],ct+=h*Dt,ft+=h*Lt,it+=h*Nt,kt+=h*bt,Ot+=h*tr,Ee+=h*Vt,Tt+=h*rr,ur+=h*Gt,xr+=h*jt,Pr+=h*Mt,Ur+=h*le,fr+=h*dt,Yr+=h*Wt,yi+=h*zt,Yi+=h*qt,vi+=h*Jt,h=q[15],ft+=h*Dt,it+=h*Lt,kt+=h*Nt,Ot+=h*bt,Ee+=h*tr,Tt+=h*Vt,ur+=h*rr,xr+=h*Gt,Pr+=h*jt,Ur+=h*Mt,fr+=h*le,Yr+=h*dt,yi+=h*Wt,Yi+=h*zt,vi+=h*qt,mi+=h*Jt,me+=38*it,Fe+=38*kt,qe+=38*Ot,yt+=38*Ee,Ge+=38*Tt,at+=38*ur,Bt+=38*xr,cr+=38*Pr,er+=38*Ur,Rt+=38*fr,wt+=38*Yr,At+=38*yi,St+=38*Yi,ut+=38*vi,ct+=38*mi,S=1,h=me+S+65535,S=Math.floor(h/65536),me=h-S*65536,h=Fe+S+65535,S=Math.floor(h/65536),Fe=h-S*65536,h=qe+S+65535,S=Math.floor(h/65536),qe=h-S*65536,h=yt+S+65535,S=Math.floor(h/65536),yt=h-S*65536,h=Ge+S+65535,S=Math.floor(h/65536),Ge=h-S*65536,h=at+S+65535,S=Math.floor(h/65536),at=h-S*65536,h=Bt+S+65535,S=Math.floor(h/65536),Bt=h-S*65536,h=cr+S+65535,S=Math.floor(h/65536),cr=h-S*65536,h=er+S+65535,S=Math.floor(h/65536),er=h-S*65536,h=Rt+S+65535,S=Math.floor(h/65536),Rt=h-S*65536,h=wt+S+65535,S=Math.floor(h/65536),wt=h-S*65536,h=At+S+65535,S=Math.floor(h/65536),At=h-S*65536,h=St+S+65535,S=Math.floor(h/65536),St=h-S*65536,h=ut+S+65535,S=Math.floor(h/65536),ut=h-S*65536,h=ct+S+65535,S=Math.floor(h/65536),ct=h-S*65536,h=ft+S+65535,S=Math.floor(h/65536),ft=h-S*65536,me+=S-1+37*(S-1),S=1,h=me+S+65535,S=Math.floor(h/65536),me=h-S*65536,h=Fe+S+65535,S=Math.floor(h/65536),Fe=h-S*65536,h=qe+S+65535,S=Math.floor(h/65536),qe=h-S*65536,h=yt+S+65535,S=Math.floor(h/65536),yt=h-S*65536,h=Ge+S+65535,S=Math.floor(h/65536),Ge=h-S*65536,h=at+S+65535,S=Math.floor(h/65536),at=h-S*65536,h=Bt+S+65535,S=Math.floor(h/65536),Bt=h-S*65536,h=cr+S+65535,S=Math.floor(h/65536),cr=h-S*65536,h=er+S+65535,S=Math.floor(h/65536),er=h-S*65536,h=Rt+S+65535,S=Math.floor(h/65536),Rt=h-S*65536,h=wt+S+65535,S=Math.floor(h/65536),wt=h-S*65536,h=At+S+65535,S=Math.floor(h/65536),At=h-S*65536,h=St+S+65535,S=Math.floor(h/65536),St=h-S*65536,h=ut+S+65535,S=Math.floor(h/65536),ut=h-S*65536,h=ct+S+65535,S=Math.floor(h/65536),ct=h-S*65536,h=ft+S+65535,S=Math.floor(h/65536),ft=h-S*65536,me+=S-1+37*(S-1),z[0]=me,z[1]=Fe,z[2]=qe,z[3]=yt,z[4]=Ge,z[5]=at,z[6]=Bt,z[7]=cr,z[8]=er,z[9]=Rt,z[10]=wt,z[11]=At,z[12]=St,z[13]=ut,z[14]=ct,z[15]=ft}function pe(z,q){oe(z,q,q)}function Ae(z,q){const F=re();let h;for(h=0;h<16;h++)F[h]=q[h];for(h=253;h>=0;h--)pe(F,F),h!==2&&h!==4&&oe(F,F,q);for(h=0;h<16;h++)z[h]=F[h]}function b(z,q){const F=re();let h;for(h=0;h<16;h++)F[h]=q[h];for(h=250;h>=0;h--)pe(F,F),h!==1&&oe(F,F,q);for(h=0;h<16;h++)z[h]=F[h]}function R(z,q){const F=re(),h=re(),S=re(),me=re(),Fe=re(),qe=re(),yt=re(),Ge=re(),at=re();H(F,z[1],z[0]),H(at,q[1],q[0]),oe(F,F,at),Ye(h,z[0],z[1]),Ye(at,q[0],q[1]),oe(h,h,at),oe(S,z[3],q[3]),oe(S,S,ue),oe(me,z[2],q[2]),Ye(me,me,me),H(Fe,h,F),H(qe,me,S),Ye(yt,me,S),Ye(Ge,h,F),oe(z[0],Fe,qe),oe(z[1],Ge,yt),oe(z[2],yt,qe),oe(z[3],Fe,Ge)}function C(z,q,F){for(let h=0;h<4;h++)_t(z[h],q[h],F)}function E(z,q){const F=re(),h=re(),S=re();Ae(S,q[2]),oe(F,q[0],S),oe(h,q[1],S),Qe(z,h),z[31]^=Xt(F)<<7}function _(z,q,F){ce(z[0],Te),ce(z[1],ie),ce(z[2],ie),ce(z[3],Te);for(let h=255;h>=0;--h){const S=F[h/8|0]>>(h&7)&1;C(z,q,S),R(q,z),R(z,z),C(z,q,S)}}function O(z,q){const F=[re(),re(),re(),re()];ce(F[0],Re),ce(F[1],we),ce(F[2],ie),oe(F[3],Re,we),_(z,F,q)}function G(z){if(z.length!==te.aP)throw new Error(`ed25519: seed must be ${te.aP} bytes`);const q=(0,y.hash)(z);q[0]&=248,q[31]&=127,q[31]|=64;const F=new Uint8Array(32),h=[re(),re(),re(),re()];O(h,q),E(F,h);const S=new Uint8Array(64);return S.set(z),S.set(F,32),{publicKey:F,secretKey:S}}te._w=G;function V(z){const q=(0,_e.randomBytes)(32,z),F=G(q);return(0,ot.wipe)(q),F}se=V;function Z(z){if(z.length!==te.KS)throw new Error(`ed25519: secret key must be ${te.KS} bytes`);return new Uint8Array(z.subarray(32))}se=Z;const N=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function W(z,q){let F,h,S,me;for(h=63;h>=32;--h){for(F=0,S=h-32,me=h-12;S<me;++S)q[S]+=F-16*q[h]*N[S-(h-32)],F=Math.floor((q[S]+128)/256),q[S]-=F*256;q[S]+=F,q[h]=0}for(F=0,S=0;S<32;S++)q[S]+=F-(q[31]>>4)*N[S],F=q[S]>>8,q[S]&=255;for(S=0;S<32;S++)q[S]-=F*N[S];for(h=0;h<32;h++)q[h+1]+=q[h]>>8,z[h]=q[h]&255}function xe(z){const q=new Float64Array(64);for(let F=0;F<64;F++)q[F]=z[F];for(let F=0;F<64;F++)z[F]=0;W(z,q)}function ve(z,q){const F=new Float64Array(64),h=[re(),re(),re(),re()],S=(0,y.hash)(z.subarray(0,32));S[0]&=248,S[31]&=127,S[31]|=64;const me=new Uint8Array(64);me.set(S.subarray(32),32);const Fe=new y.SHA512;Fe.update(me.subarray(32)),Fe.update(q);const qe=Fe.digest();Fe.clean(),xe(qe),O(h,qe),E(me,h),Fe.reset(),Fe.update(me.subarray(0,32)),Fe.update(z.subarray(32)),Fe.update(q);const yt=Fe.digest();xe(yt);for(let Ge=0;Ge<32;Ge++)F[Ge]=qe[Ge];for(let Ge=0;Ge<32;Ge++)for(let at=0;at<32;at++)F[Ge+at]+=yt[Ge]*S[at];return W(me.subarray(32),F),me}te.Xx=ve;function be(z,q){const F=re(),h=re(),S=re(),me=re(),Fe=re(),qe=re(),yt=re();return ce(z[2],ie),Kt(z[1],q),pe(S,z[1]),oe(me,S,ne),H(S,S,z[2]),Ye(me,z[2],me),pe(Fe,me),pe(qe,Fe),oe(yt,qe,Fe),oe(F,yt,S),oe(F,F,me),b(F,F),oe(F,F,S),oe(F,F,me),oe(F,F,me),oe(z[0],F,me),pe(h,z[0]),oe(h,h,me),Yt(h,S)&&oe(z[0],z[0],Ce),pe(h,z[0]),oe(h,h,me),Yt(h,S)?-1:(Xt(z[0])===q[31]>>7&&H(z[0],Te,z[0]),oe(z[3],z[0],z[1]),0)}function ar(z,q,F){const h=new Uint8Array(32),S=[re(),re(),re(),re()],me=[re(),re(),re(),re()];if(F.length!==te.jQ)throw new Error(`ed25519: signature must be ${te.jQ} bytes`);if(be(me,z))return!1;const Fe=new y.SHA512;Fe.update(F.subarray(0,32)),Fe.update(z),Fe.update(q);const qe=Fe.digest();return xe(qe),_(S,me,qe),O(me,F.subarray(32)),R(S,me),E(h,S),!Ue(F,h)}se=ar;function Nr(z){let q=[re(),re(),re(),re()];if(be(q,z))throw new Error("Ed25519: invalid public key");let F=re(),h=re(),S=q[1];Ye(F,ie,S),H(h,ie,S),Ae(h,h),oe(F,F,h);let me=new Uint8Array(32);return Qe(me,F),me}se=Nr;function gt(z){const q=(0,y.hash)(z.subarray(0,32));q[0]&=248,q[31]&=127,q[31]|=64;const F=new Uint8Array(q.subarray(0,32));return(0,ot.wipe)(q),F}se=gt},93350:function(tt,te,Y){"use strict";Object.defineProperty(te,"__esModule",{value:!0});var se=Y(98099),_e=Y(17309);te.DIGEST_LENGTH=64,te.BLOCK_SIZE=128;var y=function(){function Te(){this.digestLength=te.DIGEST_LENGTH,this.blockSize=te.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return Te.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},Te.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},Te.prototype.clean=function(){_e.wipe(this._buffer),_e.wipe(this._tempHi),_e.wipe(this._tempLo),this.reset()},Te.prototype.update=function(ie,ne){if(ne===void 0&&(ne=ie.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var ue=0;if(this._bytesHashed+=ne,this._bufferLength>0){for(;this._bufferLength<te.BLOCK_SIZE&&ne>0;)this._buffer[this._bufferLength++]=ie[ue++],ne--;this._bufferLength===this.blockSize&&(re(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(ne>=this.blockSize&&(ue=re(this._tempHi,this._tempLo,this._stateHi,this._stateLo,ie,ue,ne),ne%=this.blockSize);ne>0;)this._buffer[this._bufferLength++]=ie[ue++],ne--;return this},Te.prototype.finish=function(ie){if(!this._finished){var ne=this._bytesHashed,ue=this._bufferLength,Re=ne/536870912|0,we=ne<<3,Ce=ne%128<112?128:256;this._buffer[ue]=128;for(var ce=ue+1;ce<Ce-8;ce++)this._buffer[ce]=0;se.writeUint32BE(Re,this._buffer,Ce-8),se.writeUint32BE(we,this._buffer,Ce-4),re(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,Ce),this._finished=!0}for(var ce=0;ce<this.digestLength/8;ce++)se.writeUint32BE(this._stateHi[ce],ie,ce*8),se.writeUint32BE(this._stateLo[ce],ie,ce*8+4);return this},Te.prototype.digest=function(){var ie=new Uint8Array(this.digestLength);return this.finish(ie),ie},Te.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},Te.prototype.restoreState=function(ie){return this._stateHi.set(ie.stateHi),this._stateLo.set(ie.stateLo),this._bufferLength=ie.bufferLength,ie.buffer&&this._buffer.set(ie.buffer),this._bytesHashed=ie.bytesHashed,this._finished=!1,this},Te.prototype.cleanSavedState=function(ie){_e.wipe(ie.stateHi),_e.wipe(ie.stateLo),ie.buffer&&_e.wipe(ie.buffer),ie.bufferLength=0,ie.bytesHashed=0},Te}();te.SHA512=y;var ot=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function re(Te,ie,ne,ue,Re,we,Ce){for(var ce=ne[0],rt=ne[1],_t=ne[2],Qe=ne[3],Ue=ne[4],Yt=ne[5],Xt=ne[6],Kt=ne[7],Ye=ue[0],H=ue[1],oe=ue[2],pe=ue[3],Ae=ue[4],b=ue[5],R=ue[6],C=ue[7],E,_,O,G,V,Z,N,W;Ce>=128;){for(var xe=0;xe<16;xe++){var ve=8*xe+we;Te[xe]=se.readUint32BE(Re,ve),ie[xe]=se.readUint32BE(Re,ve+4)}for(var xe=0;xe<80;xe++){var be=ce,ar=rt,Nr=_t,gt=Qe,z=Ue,q=Yt,F=Xt,h=Kt,S=Ye,me=H,Fe=oe,qe=pe,yt=Ae,Ge=b,at=R,Bt=C;if(E=Kt,_=C,V=_&65535,Z=_>>>16,N=E&65535,W=E>>>16,E=(Ue>>>14|Ae<<32-14)^(Ue>>>18|Ae<<32-18)^(Ae>>>41-32|Ue<<32-(41-32)),_=(Ae>>>14|Ue<<32-14)^(Ae>>>18|Ue<<32-18)^(Ue>>>41-32|Ae<<32-(41-32)),V+=_&65535,Z+=_>>>16,N+=E&65535,W+=E>>>16,E=Ue&Yt^~Ue&Xt,_=Ae&b^~Ae&R,V+=_&65535,Z+=_>>>16,N+=E&65535,W+=E>>>16,E=ot[xe*2],_=ot[xe*2+1],V+=_&65535,Z+=_>>>16,N+=E&65535,W+=E>>>16,E=Te[xe%16],_=ie[xe%16],V+=_&65535,Z+=_>>>16,N+=E&65535,W+=E>>>16,Z+=V>>>16,N+=Z>>>16,W+=N>>>16,O=N&65535|W<<16,G=V&65535|Z<<16,E=O,_=G,V=_&65535,Z=_>>>16,N=E&65535,W=E>>>16,E=(ce>>>28|Ye<<32-28)^(Ye>>>34-32|ce<<32-(34-32))^(Ye>>>39-32|ce<<32-(39-32)),_=(Ye>>>28|ce<<32-28)^(ce>>>34-32|Ye<<32-(34-32))^(ce>>>39-32|Ye<<32-(39-32)),V+=_&65535,Z+=_>>>16,N+=E&65535,W+=E>>>16,E=ce&rt^ce&_t^rt&_t,_=Ye&H^Ye&oe^H&oe,V+=_&65535,Z+=_>>>16,N+=E&65535,W+=E>>>16,Z+=V>>>16,N+=Z>>>16,W+=N>>>16,h=N&65535|W<<16,Bt=V&65535|Z<<16,E=gt,_=qe,V=_&65535,Z=_>>>16,N=E&65535,W=E>>>16,E=O,_=G,V+=_&65535,Z+=_>>>16,N+=E&65535,W+=E>>>16,Z+=V>>>16,N+=Z>>>16,W+=N>>>16,gt=N&65535|W<<16,qe=V&65535|Z<<16,rt=be,_t=ar,Qe=Nr,Ue=gt,Yt=z,Xt=q,Kt=F,ce=h,H=S,oe=me,pe=Fe,Ae=qe,b=yt,R=Ge,C=at,Ye=Bt,xe%16===15)for(var ve=0;ve<16;ve++)E=Te[ve],_=ie[ve],V=_&65535,Z=_>>>16,N=E&65535,W=E>>>16,E=Te[(ve+9)%16],_=ie[(ve+9)%16],V+=_&65535,Z+=_>>>16,N+=E&65535,W+=E>>>16,O=Te[(ve+1)%16],G=ie[(ve+1)%16],E=(O>>>1|G<<32-1)^(O>>>8|G<<32-8)^O>>>7,_=(G>>>1|O<<32-1)^(G>>>8|O<<32-8)^(G>>>7|O<<32-7),V+=_&65535,Z+=_>>>16,N+=E&65535,W+=E>>>16,O=Te[(ve+14)%16],G=ie[(ve+14)%16],E=(O>>>19|G<<32-19)^(G>>>61-32|O<<32-(61-32))^O>>>6,_=(G>>>19|O<<32-19)^(O>>>61-32|G<<32-(61-32))^(G>>>6|O<<32-6),V+=_&65535,Z+=_>>>16,N+=E&65535,W+=E>>>16,Z+=V>>>16,N+=Z>>>16,W+=N>>>16,Te[ve]=N&65535|W<<16,ie[ve]=V&65535|Z<<16}E=ce,_=Ye,V=_&65535,Z=_>>>16,N=E&65535,W=E>>>16,E=ne[0],_=ue[0],V+=_&65535,Z+=_>>>16,N+=E&65535,W+=E>>>16,Z+=V>>>16,N+=Z>>>16,W+=N>>>16,ne[0]=ce=N&65535|W<<16,ue[0]=Ye=V&65535|Z<<16,E=rt,_=H,V=_&65535,Z=_>>>16,N=E&65535,W=E>>>16,E=ne[1],_=ue[1],V+=_&65535,Z+=_>>>16,N+=E&65535,W+=E>>>16,Z+=V>>>16,N+=Z>>>16,W+=N>>>16,ne[1]=rt=N&65535|W<<16,ue[1]=H=V&65535|Z<<16,E=_t,_=oe,V=_&65535,Z=_>>>16,N=E&65535,W=E>>>16,E=ne[2],_=ue[2],V+=_&65535,Z+=_>>>16,N+=E&65535,W+=E>>>16,Z+=V>>>16,N+=Z>>>16,W+=N>>>16,ne[2]=_t=N&65535|W<<16,ue[2]=oe=V&65535|Z<<16,E=Qe,_=pe,V=_&65535,Z=_>>>16,N=E&65535,W=E>>>16,E=ne[3],_=ue[3],V+=_&65535,Z+=_>>>16,N+=E&65535,W+=E>>>16,Z+=V>>>16,N+=Z>>>16,W+=N>>>16,ne[3]=Qe=N&65535|W<<16,ue[3]=pe=V&65535|Z<<16,E=Ue,_=Ae,V=_&65535,Z=_>>>16,N=E&65535,W=E>>>16,E=ne[4],_=ue[4],V+=_&65535,Z+=_>>>16,N+=E&65535,W+=E>>>16,Z+=V>>>16,N+=Z>>>16,W+=N>>>16,ne[4]=Ue=N&65535|W<<16,ue[4]=Ae=V&65535|Z<<16,E=Yt,_=b,V=_&65535,Z=_>>>16,N=E&65535,W=E>>>16,E=ne[5],_=ue[5],V+=_&65535,Z+=_>>>16,N+=E&65535,W+=E>>>16,Z+=V>>>16,N+=Z>>>16,W+=N>>>16,ne[5]=Yt=N&65535|W<<16,ue[5]=b=V&65535|Z<<16,E=Xt,_=R,V=_&65535,Z=_>>>16,N=E&65535,W=E>>>16,E=ne[6],_=ue[6],V+=_&65535,Z+=_>>>16,N+=E&65535,W+=E>>>16,Z+=V>>>16,N+=Z>>>16,W+=N>>>16,ne[6]=Xt=N&65535|W<<16,ue[6]=R=V&65535|Z<<16,E=Kt,_=C,V=_&65535,Z=_>>>16,N=E&65535,W=E>>>16,E=ne[7],_=ue[7],V+=_&65535,Z+=_>>>16,N+=E&65535,W+=E>>>16,Z+=V>>>16,N+=Z>>>16,W+=N>>>16,ne[7]=Kt=N&65535|W<<16,ue[7]=C=V&65535|Z<<16,we+=128,Ce-=128}return we}function Oe(Te){var ie=new y;ie.update(Te);var ne=ie.digest();return ie.clean(),ne}te.hash=Oe},57875:function(tt,te,Y){"use strict";Y.r(te),Y.d(te,{__assign:function(){return re},__asyncDelegator:function(){return Xt},__asyncGenerator:function(){return Yt},__asyncValues:function(){return Kt},__await:function(){return Ue},__awaiter:function(){return ue},__classPrivateFieldGet:function(){return pe},__classPrivateFieldSet:function(){return Ae},__createBinding:function(){return we},__decorate:function(){return Te},__exportStar:function(){return Ce},__extends:function(){return ot},__generator:function(){return Re},__importDefault:function(){return oe},__importStar:function(){return H},__makeTemplateObject:function(){return Ye},__metadata:function(){return ne},__param:function(){return ie},__read:function(){return rt},__rest:function(){return Oe},__spread:function(){return _t},__spreadArrays:function(){return Qe},__values:function(){return ce}});var se=Y(52677),_e=Y.n(se);var y=function(R,C){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,_){E.__proto__=_}||function(E,_){for(var O in _)_.hasOwnProperty(O)&&(E[O]=_[O])},y(R,C)};function ot(b,R){y(b,R);function C(){this.constructor=b}b.prototype=R===null?Object.create(R):(C.prototype=R.prototype,new C)}var re=function(){return re=Object.assign||function(C){for(var E,_=1,O=arguments.length;_<O;_++){E=arguments[_];for(var G in E)Object.prototype.hasOwnProperty.call(E,G)&&(C[G]=E[G])}return C},re.apply(this,arguments)};function Oe(b,R){var C={};for(var E in b)Object.prototype.hasOwnProperty.call(b,E)&&R.indexOf(E)<0&&(C[E]=b[E]);if(b!=null&&typeof Object.getOwnPropertySymbols=="function")for(var _=0,E=Object.getOwnPropertySymbols(b);_<E.length;_++)R.indexOf(E[_])<0&&Object.prototype.propertyIsEnumerable.call(b,E[_])&&(C[E[_]]=b[E[_]]);return C}function Te(b,R,C,E){var _=arguments.length,O=_<3?R:E===null?E=Object.getOwnPropertyDescriptor(R,C):E,G;if((typeof Reflect>"u"?"undefined":_e()(Reflect))==="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(b,R,C,E);else for(var V=b.length-1;V>=0;V--)(G=b[V])&&(O=(_<3?G(O):_>3?G(R,C,O):G(R,C))||O);return _>3&&O&&Object.defineProperty(R,C,O),O}function ie(b,R){return function(C,E){R(C,E,b)}}function ne(b,R){if((typeof Reflect>"u"?"undefined":_e()(Reflect))==="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(b,R)}function ue(b,R,C,E){function _(O){return O instanceof C?O:new C(function(G){G(O)})}return new(C||(C=Promise))(function(O,G){function V(W){try{N(E.next(W))}catch(xe){G(xe)}}function Z(W){try{N(E.throw(W))}catch(xe){G(xe)}}function N(W){W.done?O(W.value):_(W.value).then(V,Z)}N((E=E.apply(b,R||[])).next())})}function Re(b,R){var C={label:0,sent:function(){if(O[0]&1)throw O[1];return O[1]},trys:[],ops:[]},E,_,O,G;return G={next:V(0),throw:V(1),return:V(2)},typeof Symbol=="function"&&(G[Symbol.iterator]=function(){return this}),G;function V(N){return function(W){return Z([N,W])}}function Z(N){if(E)throw new TypeError("Generator is already executing.");for(;C;)try{if(E=1,_&&(O=N[0]&2?_.return:N[0]?_.throw||((O=_.return)&&O.call(_),0):_.next)&&!(O=O.call(_,N[1])).done)return O;switch(_=0,O&&(N=[N[0]&2,O.value]),N[0]){case 0:case 1:O=N;break;case 4:return C.label++,{value:N[1],done:!1};case 5:C.label++,_=N[1],N=[0];continue;case 7:N=C.ops.pop(),C.trys.pop();continue;default:if(O=C.trys,!(O=O.length>0&&O[O.length-1])&&(N[0]===6||N[0]===2)){C=0;continue}if(N[0]===3&&(!O||N[1]>O[0]&&N[1]<O[3])){C.label=N[1];break}if(N[0]===6&&C.label<O[1]){C.label=O[1],O=N;break}if(O&&C.label<O[2]){C.label=O[2],C.ops.push(N);break}O[2]&&C.ops.pop(),C.trys.pop();continue}N=R.call(b,C)}catch(W){N=[6,W],_=0}finally{E=O=0}if(N[0]&5)throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}}function we(b,R,C,E){E===void 0&&(E=C),b[E]=R[C]}function Ce(b,R){for(var C in b)C!=="default"&&!R.hasOwnProperty(C)&&(R[C]=b[C])}function ce(b){var R=typeof Symbol=="function"&&Symbol.iterator,C=R&&b[R],E=0;if(C)return C.call(b);if(b&&typeof b.length=="number")return{next:function(){return b&&E>=b.length&&(b=void 0),{value:b&&b[E++],done:!b}}};throw new TypeError(R?"Object is not iterable.":"Symbol.iterator is not defined.")}function rt(b,R){var C=typeof Symbol=="function"&&b[Symbol.iterator];if(!C)return b;var E=C.call(b),_,O=[],G;try{for(;(R===void 0||R-- >0)&&!(_=E.next()).done;)O.push(_.value)}catch(V){G={error:V}}finally{try{_&&!_.done&&(C=E.return)&&C.call(E)}finally{if(G)throw G.error}}return O}function _t(){for(var b=[],R=0;R<arguments.length;R++)b=b.concat(rt(arguments[R]));return b}function Qe(){for(var b=0,R=0,C=arguments.length;R<C;R++)b+=arguments[R].length;for(var E=Array(b),_=0,R=0;R<C;R++)for(var O=arguments[R],G=0,V=O.length;G<V;G++,_++)E[_]=O[G];return E}function Ue(b){return this instanceof Ue?(this.v=b,this):new Ue(b)}function Yt(b,R,C){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var E=C.apply(b,R||[]),_,O=[];return _={},G("next"),G("throw"),G("return"),_[Symbol.asyncIterator]=function(){return this},_;function G(ve){E[ve]&&(_[ve]=function(be){return new Promise(function(ar,Nr){O.push([ve,be,ar,Nr])>1||V(ve,be)})})}function V(ve,be){try{Z(E[ve](be))}catch(ar){xe(O[0][3],ar)}}function Z(ve){ve.value instanceof Ue?Promise.resolve(ve.value.v).then(N,W):xe(O[0][2],ve)}function N(ve){V("next",ve)}function W(ve){V("throw",ve)}function xe(ve,be){ve(be),O.shift(),O.length&&V(O[0][0],O[0][1])}}function Xt(b){var R,C;return R={},E("next"),E("throw",function(_){throw _}),E("return"),R[Symbol.iterator]=function(){return this},R;function E(_,O){R[_]=b[_]?function(G){return(C=!C)?{value:Ue(b[_](G)),done:_==="return"}:O?O(G):G}:O}}function Kt(b){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var R=b[Symbol.asyncIterator],C;return R?R.call(b):(b=typeof ce=="function"?ce(b):b[Symbol.iterator](),C={},E("next"),E("throw"),E("return"),C[Symbol.asyncIterator]=function(){return this},C);function E(O){C[O]=b[O]&&function(G){return new Promise(function(V,Z){G=b[O](G),_(V,Z,G.done,G.value)})}}function _(O,G,V,Z){Promise.resolve(Z).then(function(N){O({value:N,done:V})},G)}}function Ye(b,R){return Object.defineProperty?Object.defineProperty(b,"raw",{value:R}):b.raw=R,b}function H(b){if(b&&b.__esModule)return b;var R={};if(b!=null)for(var C in b)Object.hasOwnProperty.call(b,C)&&(R[C]=b[C]);return R.default=b,R}function oe(b){return b&&b.__esModule?b:{default:b}}function pe(b,R){if(!R.has(b))throw new TypeError("attempted to get private field on non-instance");return R.get(b)}function Ae(b,R,C){if(!R.has(b))throw new TypeError("attempted to set private field on non-instance");return R.set(b,C),C}},85906:function(tt,te,Y){"use strict";Y.r(te),Y.d(te,{__assign:function(){return re},__asyncDelegator:function(){return Xt},__asyncGenerator:function(){return Yt},__asyncValues:function(){return Kt},__await:function(){return Ue},__awaiter:function(){return ue},__classPrivateFieldGet:function(){return pe},__classPrivateFieldSet:function(){return Ae},__createBinding:function(){return we},__decorate:function(){return Te},__exportStar:function(){return Ce},__extends:function(){return ot},__generator:function(){return Re},__importDefault:function(){return oe},__importStar:function(){return H},__makeTemplateObject:function(){return Ye},__metadata:function(){return ne},__param:function(){return ie},__read:function(){return rt},__rest:function(){return Oe},__spread:function(){return _t},__spreadArrays:function(){return Qe},__values:function(){return ce}});var se=Y(52677),_e=Y.n(se);var y=function(R,C){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,_){E.__proto__=_}||function(E,_){for(var O in _)_.hasOwnProperty(O)&&(E[O]=_[O])},y(R,C)};function ot(b,R){y(b,R);function C(){this.constructor=b}b.prototype=R===null?Object.create(R):(C.prototype=R.prototype,new C)}var re=function(){return re=Object.assign||function(C){for(var E,_=1,O=arguments.length;_<O;_++){E=arguments[_];for(var G in E)Object.prototype.hasOwnProperty.call(E,G)&&(C[G]=E[G])}return C},re.apply(this,arguments)};function Oe(b,R){var C={};for(var E in b)Object.prototype.hasOwnProperty.call(b,E)&&R.indexOf(E)<0&&(C[E]=b[E]);if(b!=null&&typeof Object.getOwnPropertySymbols=="function")for(var _=0,E=Object.getOwnPropertySymbols(b);_<E.length;_++)R.indexOf(E[_])<0&&Object.prototype.propertyIsEnumerable.call(b,E[_])&&(C[E[_]]=b[E[_]]);return C}function Te(b,R,C,E){var _=arguments.length,O=_<3?R:E===null?E=Object.getOwnPropertyDescriptor(R,C):E,G;if((typeof Reflect>"u"?"undefined":_e()(Reflect))==="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(b,R,C,E);else for(var V=b.length-1;V>=0;V--)(G=b[V])&&(O=(_<3?G(O):_>3?G(R,C,O):G(R,C))||O);return _>3&&O&&Object.defineProperty(R,C,O),O}function ie(b,R){return function(C,E){R(C,E,b)}}function ne(b,R){if((typeof Reflect>"u"?"undefined":_e()(Reflect))==="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(b,R)}function ue(b,R,C,E){function _(O){return O instanceof C?O:new C(function(G){G(O)})}return new(C||(C=Promise))(function(O,G){function V(W){try{N(E.next(W))}catch(xe){G(xe)}}function Z(W){try{N(E.throw(W))}catch(xe){G(xe)}}function N(W){W.done?O(W.value):_(W.value).then(V,Z)}N((E=E.apply(b,R||[])).next())})}function Re(b,R){var C={label:0,sent:function(){if(O[0]&1)throw O[1];return O[1]},trys:[],ops:[]},E,_,O,G;return G={next:V(0),throw:V(1),return:V(2)},typeof Symbol=="function"&&(G[Symbol.iterator]=function(){return this}),G;function V(N){return function(W){return Z([N,W])}}function Z(N){if(E)throw new TypeError("Generator is already executing.");for(;C;)try{if(E=1,_&&(O=N[0]&2?_.return:N[0]?_.throw||((O=_.return)&&O.call(_),0):_.next)&&!(O=O.call(_,N[1])).done)return O;switch(_=0,O&&(N=[N[0]&2,O.value]),N[0]){case 0:case 1:O=N;break;case 4:return C.label++,{value:N[1],done:!1};case 5:C.label++,_=N[1],N=[0];continue;case 7:N=C.ops.pop(),C.trys.pop();continue;default:if(O=C.trys,!(O=O.length>0&&O[O.length-1])&&(N[0]===6||N[0]===2)){C=0;continue}if(N[0]===3&&(!O||N[1]>O[0]&&N[1]<O[3])){C.label=N[1];break}if(N[0]===6&&C.label<O[1]){C.label=O[1],O=N;break}if(O&&C.label<O[2]){C.label=O[2],C.ops.push(N);break}O[2]&&C.ops.pop(),C.trys.pop();continue}N=R.call(b,C)}catch(W){N=[6,W],_=0}finally{E=O=0}if(N[0]&5)throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}}function we(b,R,C,E){E===void 0&&(E=C),b[E]=R[C]}function Ce(b,R){for(var C in b)C!=="default"&&!R.hasOwnProperty(C)&&(R[C]=b[C])}function ce(b){var R=typeof Symbol=="function"&&Symbol.iterator,C=R&&b[R],E=0;if(C)return C.call(b);if(b&&typeof b.length=="number")return{next:function(){return b&&E>=b.length&&(b=void 0),{value:b&&b[E++],done:!b}}};throw new TypeError(R?"Object is not iterable.":"Symbol.iterator is not defined.")}function rt(b,R){var C=typeof Symbol=="function"&&b[Symbol.iterator];if(!C)return b;var E=C.call(b),_,O=[],G;try{for(;(R===void 0||R-- >0)&&!(_=E.next()).done;)O.push(_.value)}catch(V){G={error:V}}finally{try{_&&!_.done&&(C=E.return)&&C.call(E)}finally{if(G)throw G.error}}return O}function _t(){for(var b=[],R=0;R<arguments.length;R++)b=b.concat(rt(arguments[R]));return b}function Qe(){for(var b=0,R=0,C=arguments.length;R<C;R++)b+=arguments[R].length;for(var E=Array(b),_=0,R=0;R<C;R++)for(var O=arguments[R],G=0,V=O.length;G<V;G++,_++)E[_]=O[G];return E}function Ue(b){return this instanceof Ue?(this.v=b,this):new Ue(b)}function Yt(b,R,C){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var E=C.apply(b,R||[]),_,O=[];return _={},G("next"),G("throw"),G("return"),_[Symbol.asyncIterator]=function(){return this},_;function G(ve){E[ve]&&(_[ve]=function(be){return new Promise(function(ar,Nr){O.push([ve,be,ar,Nr])>1||V(ve,be)})})}function V(ve,be){try{Z(E[ve](be))}catch(ar){xe(O[0][3],ar)}}function Z(ve){ve.value instanceof Ue?Promise.resolve(ve.value.v).then(N,W):xe(O[0][2],ve)}function N(ve){V("next",ve)}function W(ve){V("throw",ve)}function xe(ve,be){ve(be),O.shift(),O.length&&V(O[0][0],O[0][1])}}function Xt(b){var R,C;return R={},E("next"),E("throw",function(_){throw _}),E("return"),R[Symbol.iterator]=function(){return this},R;function E(_,O){R[_]=b[_]?function(G){return(C=!C)?{value:Ue(b[_](G)),done:_==="return"}:O?O(G):G}:O}}function Kt(b){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var R=b[Symbol.asyncIterator],C;return R?R.call(b):(b=typeof ce=="function"?ce(b):b[Symbol.iterator](),C={},E("next"),E("throw"),E("return"),C[Symbol.asyncIterator]=function(){return this},C);function E(O){C[O]=b[O]&&function(G){return new Promise(function(V,Z){G=b[O](G),_(V,Z,G.done,G.value)})}}function _(O,G,V,Z){Promise.resolve(Z).then(function(N){O({value:N,done:V})},G)}}function Ye(b,R){return Object.defineProperty?Object.defineProperty(b,"raw",{value:R}):b.raw=R,b}function H(b){if(b&&b.__esModule)return b;var R={};if(b!=null)for(var C in b)Object.hasOwnProperty.call(b,C)&&(R[C]=b[C]);return R.default=b,R}function oe(b){return b&&b.__esModule?b:{default:b}}function pe(b,R){if(!R.has(b))throw new TypeError("attempted to get private field on non-instance");return R.get(b)}function Ae(b,R,C){if(!R.has(b))throw new TypeError("attempted to set private field on non-instance");return R.set(b,C),C}},1354:function(tt,te,Y){tt.exports=self.fetch||(self.fetch=Y(13576).default||Y(13576))},13576:function(tt,te,Y){"use strict";Y.r(te),Y.d(te,{default:function(){return se}});function se(_e,y){return y=y||{},new Promise(function(ot,re){var Oe=new XMLHttpRequest,Te=[],ie=[],ne={},ue=function(){return{ok:(Oe.status/100|0)==2,statusText:Oe.statusText,status:Oe.status,url:Oe.responseURL,text:function(){return Promise.resolve(Oe.responseText)},json:function(){return Promise.resolve(Oe.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([Oe.response]))},clone:ue,headers:{keys:function(){return Te},entries:function(){return ie},get:function(we){return ne[we.toLowerCase()]},has:function(we){return we.toLowerCase()in ne}}}};for(var Re in Oe.open(y.method||"get",_e,!0),Oe.onload=function(){Oe.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(we,Ce,ce){Te.push(Ce=Ce.toLowerCase()),ie.push([Ce,ce]),ne[Ce]=ne[Ce]?ne[Ce]+","+ce:ce}),ot(ue())},Oe.onerror=re,Oe.withCredentials=y.credentials=="include",y.headers)Oe.setRequestHeader(Re,y.headers[Re]);Oe.send(y.body||null)})}},70490:function(tt,te,Y){"use strict";Y.d(te,{EthereumProvider:function(){return og}});var se=Y(17187),_e=Y.n(se),y=Y(50778);const ot=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,re=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Oe=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Te(l,r){if(l==="__proto__"||l==="constructor"&&r&&typeof r=="object"&&"prototype"in r){ie(l);return}return r}function ie(l){console.warn(`[destr] Dropping "${l}" key to prevent prototype pollution.`)}function ne(l,r={}){if(typeof l!="string")return l;const n=l.trim();if(l[0]==='"'&&l.at(-1)==='"'&&!l.includes("\\"))return n.slice(1,-1);if(n.length<=9){const o=n.toLowerCase();if(o==="true")return!0;if(o==="false")return!1;if(o==="undefined")return;if(o==="null")return null;if(o==="nan")return Number.NaN;if(o==="infinity")return Number.POSITIVE_INFINITY;if(o==="-infinity")return Number.NEGATIVE_INFINITY}if(!Oe.test(l)){if(r.strict)throw new SyntaxError("[destr] Invalid JSON");return l}try{if(ot.test(l)||re.test(l)){if(r.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(l,Te)}return JSON.parse(l)}catch(o){if(r.strict)throw o;return l}}function ue(l,r={}){return ne(l,{...r,strict:!0})}var Re=Y(48764).Buffer;function we(l){return!l||typeof l.then!="function"?Promise.resolve(l):l}function Ce(l,...r){try{return we(l(...r))}catch(n){return Promise.reject(n)}}function ce(l){const r=typeof l;return l===null||r!=="object"&&r!=="function"}function rt(l){const r=Object.getPrototypeOf(l);return!r||r.isPrototypeOf(Object)}function _t(l){if(ce(l))return String(l);if(rt(l)||Array.isArray(l))return JSON.stringify(l);if(typeof l.toJSON=="function")return _t(l.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function Qe(){if(typeof Re===void 0)throw new TypeError("[unstorage] Buffer is not supported!")}const Ue="base64:";function Yt(l){if(typeof l=="string")return l;Qe();const r=Re.from(l).toString("base64");return Ue+r}function Xt(l){return typeof l!="string"||!l.startsWith(Ue)?l:(Qe(),Re.from(l.slice(Ue.length),"base64"))}const Kt=null;function Ye(l,r){if(r=pe(r),!r)return l;const n={...l};for(const o of Kt)n[o]=(a="",...d)=>l[o](r+a,...d);return n.getKeys=(o="",...a)=>l.getKeys(r+o,...a).then(d=>d.map(v=>v.slice(r.length))),n}function H(l){return l?l.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function oe(...l){return H(l.join(":"))}function pe(l){return l=H(l),l?l+":":""}function Ae(l){return l}const b="memory",R=()=>{const l=new Map;return{name:b,options:{},hasItem(r){return l.has(r)},getItem(r){return l.get(r)??null},getItemRaw(r){return l.get(r)??null},setItem(r,n){l.set(r,n)},setItemRaw(r,n){l.set(r,n)},removeItem(r){l.delete(r)},getKeys(){return Array.from(l.keys())},clear(){l.clear()},dispose(){l.clear()}}};function C(l={}){const r={mounts:{"":l.driver||R()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=x=>{for(const M of r.mountpoints)if(x.startsWith(M))return{base:M,relativeKey:x.slice(M.length),driver:r.mounts[M]};return{base:"",relativeKey:x,driver:r.mounts[""]}},o=(x,M)=>r.mountpoints.filter(K=>K.startsWith(x)||M&&x.startsWith(K)).map(K=>({relativeBase:x.length>K.length?x.slice(K.length):void 0,mountpoint:K,driver:r.mounts[K]})),a=(x,M)=>{if(r.watching){M=H(M);for(const K of r.watchListeners)K(x,M)}},d=async()=>{if(!r.watching){r.watching=!0;for(const x in r.mounts)r.unwatch[x]=await O(r.mounts[x],a,x)}},v=async()=>{if(r.watching){for(const x in r.unwatch)await r.unwatch[x]();r.unwatch={},r.watching=!1}},P=(x,M,K)=>{const Q=new Map,ge=ae=>{let He=Q.get(ae.base);return He||(He={driver:ae.driver,base:ae.base,items:[]},Q.set(ae.base,He)),He};for(const ae of x){const He=typeof ae=="string",nt=H(He?ae:ae.key),Ve=He?void 0:ae.value,nr=He||!ae.options?M:{...M,...ae.options},We=n(nt);ge(We).items.push({key:nt,value:Ve,relativeKey:We.relativeKey,options:nr})}return Promise.all([...Q.values()].map(ae=>K(ae))).then(ae=>ae.flat())},j={hasItem(x,M={}){x=H(x);const{relativeKey:K,driver:Q}=n(x);return Ce(Q.hasItem,K,M)},getItem(x,M={}){x=H(x);const{relativeKey:K,driver:Q}=n(x);return Ce(Q.getItem,K,M).then(ge=>ne(ge))},getItems(x,M){return P(x,M,K=>K.driver.getItems?Ce(K.driver.getItems,K.items.map(Q=>({key:Q.relativeKey,options:Q.options})),M).then(Q=>Q.map(ge=>({key:oe(K.base,ge.key),value:ne(ge.value)}))):Promise.all(K.items.map(Q=>Ce(K.driver.getItem,Q.relativeKey,Q.options).then(ge=>({key:Q.key,value:ne(ge)})))))},getItemRaw(x,M={}){x=H(x);const{relativeKey:K,driver:Q}=n(x);return Q.getItemRaw?Ce(Q.getItemRaw,K,M):Ce(Q.getItem,K,M).then(ge=>Xt(ge))},async setItem(x,M,K={}){if(M===void 0)return j.removeItem(x);x=H(x);const{relativeKey:Q,driver:ge}=n(x);ge.setItem&&(await Ce(ge.setItem,Q,_t(M),K),ge.watch||a("update",x))},async setItems(x,M){await P(x,M,async K=>{K.driver.setItems&&await Ce(K.driver.setItems,K.items.map(Q=>({key:Q.relativeKey,value:_t(Q.value),options:Q.options})),M),K.driver.setItem&&await Promise.all(K.items.map(Q=>Ce(K.driver.setItem,Q.relativeKey,_t(Q.value),Q.options)))})},async setItemRaw(x,M,K={}){if(M===void 0)return j.removeItem(x,K);x=H(x);const{relativeKey:Q,driver:ge}=n(x);if(ge.setItemRaw)await Ce(ge.setItemRaw,Q,M,K);else if(ge.setItem)await Ce(ge.setItem,Q,Yt(M),K);else return;ge.watch||a("update",x)},async removeItem(x,M={}){typeof M=="boolean"&&(M={removeMeta:M}),x=H(x);const{relativeKey:K,driver:Q}=n(x);Q.removeItem&&(await Ce(Q.removeItem,K,M),(M.removeMeta||M.removeMata)&&await Ce(Q.removeItem,K+"$",M),Q.watch||a("remove",x))},async getMeta(x,M={}){typeof M=="boolean"&&(M={nativeOnly:M}),x=H(x);const{relativeKey:K,driver:Q}=n(x),ge=Object.create(null);if(Q.getMeta&&Object.assign(ge,await Ce(Q.getMeta,K,M)),!M.nativeOnly){const ae=await Ce(Q.getItem,K+"$",M).then(He=>ne(He));ae&&typeof ae=="object"&&(typeof ae.atime=="string"&&(ae.atime=new Date(ae.atime)),typeof ae.mtime=="string"&&(ae.mtime=new Date(ae.mtime)),Object.assign(ge,ae))}return ge},setMeta(x,M,K={}){return this.setItem(x+"$",M,K)},removeMeta(x,M={}){return this.removeItem(x+"$",M)},async getKeys(x,M={}){x=pe(x);const K=o(x,!0);let Q=[];const ge=[];for(const ae of K){const nt=(await Ce(ae.driver.getKeys,ae.relativeBase,M)).map(Ve=>ae.mountpoint+H(Ve)).filter(Ve=>!Q.some(nr=>Ve.startsWith(nr)));ge.push(...nt),Q=[ae.mountpoint,...Q.filter(Ve=>!Ve.startsWith(ae.mountpoint))]}return x?ge.filter(ae=>ae.startsWith(x)&&!ae.endsWith("$")):ge.filter(ae=>!ae.endsWith("$"))},async clear(x,M={}){x=pe(x),await Promise.all(o(x,!1).map(async K=>{if(K.driver.clear)return Ce(K.driver.clear,K.relativeBase,M);if(K.driver.removeItem){const Q=await K.driver.getKeys(K.relativeBase||"",M);return Promise.all(Q.map(ge=>K.driver.removeItem(ge,M)))}}))},async dispose(){await Promise.all(Object.values(r.mounts).map(x=>G(x)))},async watch(x){return await d(),r.watchListeners.push(x),async()=>{r.watchListeners=r.watchListeners.filter(M=>M!==x),r.watchListeners.length===0&&await v()}},async unwatch(){r.watchListeners=[],await v()},mount(x,M){if(x=pe(x),x&&r.mounts[x])throw new Error(`already mounted at ${x}`);return x&&(r.mountpoints.push(x),r.mountpoints.sort((K,Q)=>Q.length-K.length)),r.mounts[x]=M,r.watching&&Promise.resolve(O(M,a,x)).then(K=>{r.unwatch[x]=K}).catch(console.error),j},async unmount(x,M=!0){x=pe(x),!(!x||!r.mounts[x])&&(r.watching&&x in r.unwatch&&(r.unwatch[x](),delete r.unwatch[x]),M&&await G(r.mounts[x]),r.mountpoints=r.mountpoints.filter(K=>K!==x),delete r.mounts[x])},getMount(x=""){x=H(x)+":";const M=n(x);return{driver:M.driver,base:M.base}},getMounts(x="",M={}){return x=H(x),o(x,M.parents).map(Q=>({driver:Q.driver,base:Q.mountpoint}))}};return j}async function E(l,r){r=normalizeBaseKey(r);const n=await l.getKeys(r),o={};return await Promise.all(n.map(async a=>{o[a.slice(r.length)]=await l.getItem(a)})),o}async function _(l,r,n=""){n=normalizeBaseKey(n),await Promise.all(Object.entries(r).map(o=>l.setItem(n+o[0],o[1])))}function O(l,r,n){return l.watch?l.watch((o,a)=>r(o,n+a)):()=>{}}async function G(l){typeof l.dispose=="function"&&await Ce(l.dispose)}const V={azureAppConfiguration:"unstorage/drivers/azure-app-configuration",azureCosmos:"unstorage/drivers/azure-cosmos",azureKeyVault:"unstorage/drivers/azure-key-vault",azureStorageBlob:"unstorage/drivers/azure-storage-blob",azureStorageTable:"unstorage/drivers/azure-storage-table",cloudflareKVBinding:"unstorage/drivers/cloudflare-kv-binding",cloudflareKVHTTP:"unstorage/drivers/cloudflare-kv-http",cloudflareR2Binding:"unstorage/drivers/cloudflare-r2-binding",fs:"unstorage/drivers/fs",fsLite:"unstorage/drivers/fs-lite",github:"unstorage/drivers/github",http:"unstorage/drivers/http",indexedb:"unstorage/drivers/indexedb",localStorage:"unstorage/drivers/localstorage",lruCache:"unstorage/drivers/lru-cache",memory:"unstorage/drivers/memory",mongodb:"unstorage/drivers/mongodb",netlifyBlobs:"unstorage/drivers/netlify-blobs",overlay:"unstorage/drivers/overlay",planetscale:"unstorage/drivers/planetscale",redis:"unstorage/drivers/redis",sessionStorage:"unstorage/drivers/session-storage",vercelKV:"unstorage/drivers/vercel-kv","cloudflare-kv-binding":"unstorage/drivers/cloudflare-kv-binding","cloudflare-kv-http":"unstorage/drivers/cloudflare-kv-http"};function Z(l){return new Promise((r,n)=>{l.oncomplete=l.onsuccess=()=>r(l.result),l.onabort=l.onerror=()=>n(l.error)})}function N(l,r){const n=indexedDB.open(l);n.onupgradeneeded=()=>n.result.createObjectStore(r);const o=Z(n);return(a,d)=>o.then(v=>d(v.transaction(r,a).objectStore(r)))}let W;function xe(){return W||(W=N("keyval-store","keyval")),W}function ve(l,r=xe()){return r("readonly",n=>Z(n.get(l)))}function be(l,r,n=xe()){return n("readwrite",o=>(o.put(r,l),Z(o.transaction)))}function ar(l,r=xe()){return r("readwrite",n=>(l.forEach(o=>n.put(o[1],o[0])),Z(n.transaction)))}function Nr(l,r=xe()){return r("readonly",n=>Promise.all(l.map(o=>Z(n.get(o)))))}function gt(l,r,n=xe()){return n("readwrite",o=>new Promise((a,d)=>{o.get(l).onsuccess=function(){try{o.put(r(this.result),l),a(Z(o.transaction))}catch(v){d(v)}}}))}function z(l,r=xe()){return r("readwrite",n=>(n.delete(l),Z(n.transaction)))}function q(l,r=xe()){return r("readwrite",n=>(l.forEach(o=>n.delete(o)),Z(n.transaction)))}function F(l=xe()){return l("readwrite",r=>(r.clear(),Z(r.transaction)))}function h(l,r){return l.openCursor().onsuccess=function(){this.result&&(r(this.result),this.result.continue())},Z(l.transaction)}function S(l=xe()){return l("readonly",r=>{if(r.getAllKeys)return Z(r.getAllKeys());const n=[];return h(r,o=>n.push(o.key)).then(()=>n)})}function me(l=xe()){return l("readonly",r=>{if(r.getAll)return Z(r.getAll());const n=[];return h(r,o=>n.push(o.value)).then(()=>n)})}function Fe(l=xe()){return l("readonly",r=>{if(r.getAll&&r.getAllKeys)return Promise.all([Z(r.getAllKeys()),Z(r.getAll())]).then(([o,a])=>o.map((d,v)=>[d,a[v]]));const n=[];return l("readonly",o=>h(o,a=>n.push([a.key,a.value])).then(()=>n))})}var qe=Y(85094);function yt(l){return l}const Ge="idb-keyval";var at=(l={})=>{const r=l.base&&l.base.length>0?`${l.base}:`:"",n=a=>r+a;let o;return l.dbName&&l.storeName&&(o=N(l.dbName,l.storeName)),{name:Ge,options:l,async hasItem(a){return!(typeof await ve(n(a),o)>"u")},async getItem(a){return await ve(n(a),o)??null},setItem(a,d){return be(n(a),d,o)},removeItem(a){return z(n(a),o)},getKeys(){return S(o)},clear(){return F(o)}}};const Bt="WALLET_CONNECT_V2_INDEXED_DB",cr="keyvaluestorage";class er{constructor(){this.indexedDb=C({driver:at({dbName:Bt,storeName:cr})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(r=>[r.key,r.value])}async getItem(r){const n=await this.indexedDb.getItem(r);if(n!==null)return n}async setItem(r,n){await this.indexedDb.setItem(r,(0,qe.u)(n))}async removeItem(r){await this.indexedDb.removeItem(r)}}var Rt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Y.g<"u"?Y.g:typeof self<"u"?self:{},wt={exports:{}};(function(){let l;function r(){}l=r,l.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},l.prototype.setItem=function(n,o){this[n]=String(o)},l.prototype.removeItem=function(n){delete this[n]},l.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(o){n[o]=void 0,delete n[o]})},l.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},l.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Rt<"u"&&Rt.localStorage?wt.exports=Rt.localStorage:typeof window<"u"&&window.localStorage?wt.exports=window.localStorage:wt.exports=new r})();function At(l){var r;return[l[0],(0,qe.D)((r=l[1])!=null?r:"")]}class St{constructor(){this.localStorage=wt.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(At)}async getItem(r){const n=this.localStorage.getItem(r);if(n!==null)return(0,qe.D)(n)}async setItem(r,n){this.localStorage.setItem(r,(0,qe.u)(n))}async removeItem(r){this.localStorage.removeItem(r)}}const ut="wc_storage_version",ct=1,ft=async(l,r,n)=>{const o=ut,a=await r.getItem(o);if(a&&a>=ct){n(r);return}const d=await l.getKeys();if(!d.length){n(r);return}const v=[];for(;d.length;){const P=d.shift();if(!P)continue;const j=P.toLowerCase();if(j.includes("wc@")||j.includes("walletconnect")||j.includes("wc_")||j.includes("wallet_connect")){const x=await l.getItem(P);await r.setItem(P,x),v.push(P)}}await r.setItem(o,ct),n(r),it(l,v)},it=async(l,r)=>{r.length&&r.forEach(async n=>{await l.removeItem(n)})};class kt{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const r=new St;this.storage=r;try{const n=new er;ft(r,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(r){return await this.initialize(),this.storage.getItem(r)}async setItem(r,n){return await this.initialize(),this.storage.setItem(r,n)}async removeItem(r){return await this.initialize(),this.storage.removeItem(r)}async initialize(){this.initialized||await new Promise(r=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),r())},20)})}}var Ot=Y(90772),Ee=Y(9107),Tt=Y(38200);class ur extends Tt.q{constructor(r){super(),this.opts=r,this.protocol="wc",this.version=2}}class xr{constructor(r,n,o){this.core=r,this.logger=n}}class Pr extends Tt.q{constructor(r,n){super(),this.core=r,this.logger=n,this.records=new Map}}class Ur{constructor(r,n){this.logger=r,this.core=n}}class fr extends Tt.q{constructor(r,n){super(),this.relayer=r,this.logger=n}}class Yr extends Tt.q{constructor(r){super()}}class yi{constructor(r,n,o,a){this.core=r,this.logger=n,this.name=o}}class Yi{constructor(){this.map=new Map}}class vi extends Tt.q{constructor(r,n){super(),this.relayer=r,this.logger=n}}class mi{constructor(r,n){this.core=r,this.logger=n}}class Dt extends Tt.q{constructor(r,n){super(),this.core=r,this.logger=n}}class Lt{constructor(r,n){this.logger=r,this.core=n}}class Nt{constructor(r,n){this.projectId=r,this.logger=n}}class bt{constructor(r,n){this.projectId=r,this.logger=n}}class tr extends null{constructor(){super()}}class Vt{constructor(r){this.opts=r,this.protocol="wc",this.version=2}}class rr extends null{constructor(){super()}}class Gt{constructor(r){this.client=r}}var jt=Y(31050),Mt=Y(31416),le=Y(66736);const dt="EdDSA",Wt="JWT",zt=".",qt="base64url",Jt="utf8",Oo="utf8",Xr=":",Co="did",Ro="key",gs="base58btc",Ao="z",To="K36",ji=32,Do=32;var No=Y(20605),Mn=Y(92263),zn=Y(52217);function fn(l){return safeJsonParse(toString(fromString(l,JWT_ENCODING),JSON_ENCODING))}function _i(l){return(0,Mn.B)((0,zn.m)((0,qe.u)(l),Jt),qt)}function ys(l){const r=(0,zn.m)(To,gs),n=Ao+(0,Mn.B)((0,No.z)([r,l]),gs);return[Co,Ro,n].join(Xr)}function qc(l){const[r,n,o]=l.split(DID_DELIMITER);if(r!==DID_PREFIX||n!==DID_METHOD)throw new Error('Issuer must be a DID with method "key"');if(o.slice(0,1)!==MULTICODEC_ED25519_BASE)throw new Error("Issuer must be a key in mulicodec format");const d=fromString(o.slice(1),MULTICODEC_ED25519_ENCODING);if(toString(d.slice(0,2),MULTICODEC_ED25519_ENCODING)!==MULTICODEC_ED25519_HEADER)throw new Error('Issuer must be a public key with type "Ed25519"');const P=d.slice(2);if(P.length!==MULTICODEC_ED25519_LENGTH)throw new Error("Issuer must be a public key with length 32 bytes");return P}function ci(l){return(0,Mn.B)(l,qt)}function Fo(l){return fromString(l,JWT_ENCODING)}function Lo(l){return(0,zn.m)([_i(l.header),_i(l.payload)].join(zt),Oo)}function $c(l){const r=toString(l,DATA_ENCODING).split(JWT_DELIMITER),n=fn(r[0]),o=fn(r[1]);return{header:n,payload:o}}function jo(l){return[_i(l.header),_i(l.payload),ci(l.signature)].join(zt)}function Uc(l){const r=l.split(JWT_DELIMITER),n=fn(r[0]),o=fn(r[1]),a=Fo(r[2]),d=fromString(r.slice(0,2).join(JWT_DELIMITER),DATA_ENCODING);return{header:n,payload:o,signature:a,data:d}}function vs(l=(0,Mt.randomBytes)(Do)){return jt._w(l)}async function dn(l,r,n,o,a=(0,le.fromMiliseconds)(Date.now())){const d={alg:dt,typ:Wt},v=ys(o.publicKey),P=a+n,j={iss:v,sub:l,aud:r,iat:a,exp:P},x=Lo({header:d,payload:j}),M=jt.Xx(o.secretKey,x);return jo({header:d,payload:j,signature:M})}async function Hc(l){const{header:r,payload:n,data:o,signature:a}=decodeJWT(l);if(r.alg!==JWT_IRIDIUM_ALG||r.typ!==JWT_IRIDIUM_TYP)throw new Error("JWT must use EdDSA algorithm");const d=decodeIss(n.iss);return ed25519.verify(d,o,a)}var pn=Y(43014),ms=Y(37466),Hr=Y(46160),De=Y(56186);const Mo=()=>typeof WebSocket<"u"?WebSocket:typeof Y.g<"u"&&typeof Y.g.WebSocket<"u"?Y.g.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:Y(57026),zo=()=>typeof WebSocket<"u"||typeof Y.g<"u"&&typeof Y.g.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",_s=l=>l.split("?")[0],qn=10,qo=Mo();class $o{constructor(r){if(this.url=r,this.events=new se.EventEmitter,this.registering=!1,!(0,De.isWsUrl)(r))throw new Error(`Provided URL is not compatible with WebSocket connection: ${r}`);this.url=r}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(r,n){this.events.on(r,n)}once(r,n){this.events.once(r,n)}off(r,n){this.events.off(r,n)}removeListener(r,n){this.events.removeListener(r,n)}async open(r=this.url){await this.register(r)}async close(){return new Promise((r,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=o=>{this.onClose(o),r()},this.socket.close()})}async send(r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send((0,qe.u)(r))}catch(n){this.onError(r.id,n)}}register(r=this.url){if(!(0,De.isWsUrl)(r))throw new Error(`Provided URL is not compatible with WebSocket connection: ${r}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((o,a)=>{this.events.once("register_error",d=>{this.resetMaxListeners(),a(d)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return a(new Error("WebSocket connection is missing or invalid"));o(this.socket)})})}return this.url=r,this.registering=!0,new Promise((n,o)=>{const a=new URLSearchParams(r).get("origin"),d=(0,De.isReactNative)()?{headers:{origin:a}}:{rejectUnauthorized:!(0,De.isLocalhostUrl)(r)},v=new qo(r,[],d);zo()?v.onerror=P=>{const j=P;o(this.emitError(j.error))}:v.on("error",P=>{o(this.emitError(P))}),v.onopen=()=>{this.onOpen(v),n(v)}})}onOpen(r){r.onmessage=n=>this.onPayload(n),r.onclose=n=>this.onClose(n),this.socket=r,this.registering=!1,this.events.emit("open")}onClose(r){this.socket=void 0,this.registering=!1,this.events.emit("close",r)}onPayload(r){if(typeof r.data>"u")return;const n=typeof r.data=="string"?(0,qe.D)(r.data):r.data;this.events.emit("payload",n)}onError(r,n){const o=this.parseError(n),a=o.message||o.toString(),d=(0,De.formatJsonRpcError)(r,a);this.events.emit("payload",d)}parseError(r,n=this.url){return(0,De.parseConnectionError)(r,_s(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>qn&&this.events.setMaxListeners(qn)}emitError(r){const n=this.parseError(new Error((r==null?void 0:r.message)||`WebSocket connection failed for host: ${_s(this.url)}`));return this.events.emit("register_error",n),n}}var ws=Y(72307),gn=Y.n(ws),Mi=Y(1354),Uo=Y.n(Mi);function Ho(l,r){if(l.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),o=0;o<n.length;o++)n[o]=255;for(var a=0;a<l.length;a++){var d=l.charAt(a),v=d.charCodeAt(0);if(n[v]!==255)throw new TypeError(d+" is ambiguous");n[v]=a}var P=l.length,j=l.charAt(0),x=Math.log(P)/Math.log(256),M=Math.log(256)/Math.log(P);function K(ae){if(ae instanceof Uint8Array||(ArrayBuffer.isView(ae)?ae=new Uint8Array(ae.buffer,ae.byteOffset,ae.byteLength):Array.isArray(ae)&&(ae=Uint8Array.from(ae))),!(ae instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(ae.length===0)return"";for(var He=0,nt=0,Ve=0,nr=ae.length;Ve!==nr&&ae[Ve]===0;)Ve++,He++;for(var We=(nr-Ve)*M+1>>>0,Je=new Uint8Array(We);Ve!==nr;){for(var xt=ae[Ve],_r=0,$t=We-1;(xt!==0||_r<nt)&&$t!==-1;$t--,_r++)xt+=256*Je[$t]>>>0,Je[$t]=xt%P>>>0,xt=xt/P>>>0;if(xt!==0)throw new Error("Non-zero carry");nt=_r,Ve++}for(var wr=We-nt;wr!==We&&Je[wr]===0;)wr++;for(var Ui=j.repeat(He);wr<We;++wr)Ui+=l.charAt(Je[wr]);return Ui}function Q(ae){if(typeof ae!="string")throw new TypeError("Expected String");if(ae.length===0)return new Uint8Array;var He=0;if(ae[He]!==" "){for(var nt=0,Ve=0;ae[He]===j;)nt++,He++;for(var nr=(ae.length-He)*x+1>>>0,We=new Uint8Array(nr);ae[He];){var Je=n[ae.charCodeAt(He)];if(Je===255)return;for(var xt=0,_r=nr-1;(Je!==0||xt<Ve)&&_r!==-1;_r--,xt++)Je+=P*We[_r]>>>0,We[_r]=Je%256>>>0,Je=Je/256>>>0;if(Je!==0)throw new Error("Non-zero carry");Ve=xt,He++}if(ae[He]!==" "){for(var $t=nr-Ve;$t!==nr&&We[$t]===0;)$t++;for(var wr=new Uint8Array(nt+(nr-$t)),Ui=nt;$t!==nr;)wr[Ui++]=We[$t++];return wr}}}function ge(ae){var He=Q(ae);if(He)return He;throw new Error(`Non-${r} character`)}return{encode:K,decodeUnsafe:Q,decode:ge}}var ui=Ho,Ko=ui;const bs=l=>{if(l instanceof Uint8Array&&l.constructor.name==="Uint8Array")return l;if(l instanceof ArrayBuffer)return new Uint8Array(l);if(ArrayBuffer.isView(l))return new Uint8Array(l.buffer,l.byteOffset,l.byteLength);throw new Error("Unknown type, must be binary type")},Bo=l=>new TextEncoder().encode(l),ko=l=>new TextDecoder().decode(l);class Vo{constructor(r,n,o){this.name=r,this.prefix=n,this.baseEncode=o}encode(r){if(r instanceof Uint8Array)return`${this.prefix}${this.baseEncode(r)}`;throw Error("Unknown type, must be binary type")}}class wi{constructor(r,n,o){if(this.name=r,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=o}decode(r){if(typeof r=="string"){if(r.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(r)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(r.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(r){return Is(this,r)}}class Es{constructor(r){this.decoders=r}or(r){return Is(this,r)}decode(r){const n=r[0],o=this.decoders[n];if(o)return o.decode(r);throw RangeError(`Unable to decode multibase string ${JSON.stringify(r)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Is=(l,r)=>new Es({...l.decoders||{[l.prefix]:l},...r.decoders||{[r.prefix]:r}});class yn{constructor(r,n,o,a){this.name=r,this.prefix=n,this.baseEncode=o,this.baseDecode=a,this.encoder=new Vo(r,n,o),this.decoder=new wi(r,n,a)}encode(r){return this.encoder.encode(r)}decode(r){return this.decoder.decode(r)}}const vn=({name:l,prefix:r,encode:n,decode:o})=>new yn(l,r,n,o),bi=({prefix:l,name:r,alphabet:n})=>{const{encode:o,decode:a}=Ko(n,r);return vn({prefix:l,name:r,encode:o,decode:d=>bs(a(d))})},Go=(l,r,n,o)=>{const a={};for(let M=0;M<r.length;++M)a[r[M]]=M;let d=l.length;for(;l[d-1]==="=";)--d;const v=new Uint8Array(d*n/8|0);let P=0,j=0,x=0;for(let M=0;M<d;++M){const K=a[l[M]];if(K===void 0)throw new SyntaxError(`Non-${o} character`);j=j<<n|K,P+=n,P>=8&&(P-=8,v[x++]=255&j>>P)}if(P>=n||255&j<<8-P)throw new SyntaxError("Unexpected end of data");return v},xs=(l,r,n)=>{const o=r[r.length-1]==="=",a=(1<<n)-1;let d="",v=0,P=0;for(let j=0;j<l.length;++j)for(P=P<<8|l[j],v+=8;v>n;)v-=n,d+=r[a&P>>v];if(v&&(d+=r[a&P<<n-v]),o)for(;d.length*n&7;)d+="=";return d},Zt=({name:l,prefix:r,bitsPerChar:n,alphabet:o})=>vn({prefix:r,name:l,encode(a){return xs(a,o,n)},decode(a){return Go(a,o,n,l)}}),Ps=vn({prefix:"\0",name:"identity",encode:l=>ko(l),decode:l=>Bo(l)});var Xi=Object.freeze({__proto__:null,identity:Ps});const Ss=Zt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Wo=Object.freeze({__proto__:null,base2:Ss});const Jo=Zt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Zo=Object.freeze({__proto__:null,base8:Jo});const m=bi({prefix:"9",name:"base10",alphabet:"0123456789"});var A=Object.freeze({__proto__:null,base10:m});const J=Zt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),fe=Zt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var ht=Object.freeze({__proto__:null,base16:J,base16upper:fe});const Le=Zt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Et=Zt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Qt=Zt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ir=Zt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),vt=Zt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),mr=Zt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Fr=Zt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),hr=Zt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Sr=Zt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Or=Object.freeze({__proto__:null,base32:Le,base32upper:Et,base32pad:Qt,base32padupper:ir,base32hex:vt,base32hexupper:mr,base32hexpad:Fr,base32hexpadupper:hr,base32z:Sr});const hi=bi({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ei=bi({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Ei=Object.freeze({__proto__:null,base36:hi,base36upper:ei});const Os=bi({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),mn=bi({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var _n=Object.freeze({__proto__:null,base58btc:Os,base58flickr:mn});const vf=Zt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),mf=Zt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),_f=Zt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),wf=Zt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var bf=Object.freeze({__proto__:null,base64:vf,base64pad:mf,base64url:_f,base64urlpad:wf});const Kc=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),Ef=Kc.reduce((l,r,n)=>(l[n]=r,l),[]),If=Kc.reduce((l,r,n)=>(l[r.codePointAt(0)]=n,l),[]);function xf(l){return l.reduce((r,n)=>(r+=Ef[n],r),"")}function Pf(l){const r=[];for(const n of l){const o=If[n.codePointAt(0)];if(o===void 0)throw new Error(`Non-base256emoji character: ${n}`);r.push(o)}return new Uint8Array(r)}const Sf=vn({prefix:"\u{1F680}",name:"base256emoji",encode:xf,decode:Pf});var Of=Object.freeze({__proto__:null,base256emoji:Sf}),Cf=kc,Bc=128,Rf=127,Af=~Rf,Tf=Math.pow(2,31);function kc(l,r,n){r=r||[],n=n||0;for(var o=n;l>=Tf;)r[n++]=l&255|Bc,l/=128;for(;l&Af;)r[n++]=l&255|Bc,l>>>=7;return r[n]=l|0,kc.bytes=n-o+1,r}var Df=Qo,Nf=128,Vc=127;function Qo(l,o){var n=0,o=o||0,a=0,d=o,v,P=l.length;do{if(d>=P)throw Qo.bytes=0,new RangeError("Could not decode varint");v=l[d++],n+=a<28?(v&Vc)<<a:(v&Vc)*Math.pow(2,a),a+=7}while(v>=Nf);return Qo.bytes=d-o,n}var Ff=Math.pow(2,7),Lf=Math.pow(2,14),jf=Math.pow(2,21),Mf=Math.pow(2,28),zf=Math.pow(2,35),qf=Math.pow(2,42),$f=Math.pow(2,49),Uf=Math.pow(2,56),Hf=Math.pow(2,63),Kf=function(l){return l<Ff?1:l<Lf?2:l<jf?3:l<Mf?4:l<zf?5:l<qf?6:l<$f?7:l<Uf?8:l<Hf?9:10},Bf={encode:Cf,decode:Df,encodingLength:Kf},Gc=Bf;const Wc=(l,r,n=0)=>(Gc.encode(l,r,n),r),Jc=l=>Gc.encodingLength(l),Yo=(l,r)=>{const n=r.byteLength,o=Jc(l),a=o+Jc(n),d=new Uint8Array(a+n);return Wc(l,d,0),Wc(n,d,o),d.set(r,a),new kf(l,n,r,d)};class kf{constructor(r,n,o,a){this.code=r,this.size=n,this.digest=o,this.bytes=a}}const Zc=({name:l,code:r,encode:n})=>new Vf(l,r,n);class Vf{constructor(r,n,o){this.name=r,this.code=n,this.encode=o}digest(r){if(r instanceof Uint8Array){const n=this.encode(r);return n instanceof Uint8Array?Yo(this.code,n):n.then(o=>Yo(this.code,o))}else throw Error("Unknown type, must be binary type")}}const Qc=l=>async r=>new Uint8Array(await crypto.subtle.digest(l,r)),Gf=Zc({name:"sha2-256",code:18,encode:Qc("SHA-256")}),Wf=Zc({name:"sha2-512",code:19,encode:Qc("SHA-512")});var Jf=Object.freeze({__proto__:null,sha256:Gf,sha512:Wf});const Yc=0,Zf="identity",Xc=bs;var Qf=Object.freeze({__proto__:null,identity:{code:Yc,name:Zf,encode:Xc,digest:l=>Yo(Yc,Xc(l))}});new TextEncoder,new TextDecoder;const eu={...Xi,...Wo,...Zo,...A,...ht,...Or,...Ei,..._n,...bf,...Of};({...Jf,...Qf});function tu(l){return globalThis.Buffer!=null?new Uint8Array(l.buffer,l.byteOffset,l.byteLength):l}function Yf(l=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?tu(globalThis.Buffer.allocUnsafe(l)):new Uint8Array(l)}function ru(l,r,n,o){return{name:l,prefix:r,encoder:{name:l,prefix:r,encode:n},decoder:{decode:o}}}const iu=ru("utf8","u",l=>"u"+new TextDecoder("utf8").decode(l),l=>new TextEncoder().encode(l.substring(1))),Xo=ru("ascii","a",l=>{let r="a";for(let n=0;n<l.length;n++)r+=String.fromCharCode(l[n]);return r},l=>{l=l.substring(1);const r=Yf(l.length);for(let n=0;n<l.length;n++)r[n]=l.charCodeAt(n);return r}),Xf={utf8:iu,"utf-8":iu,hex:eu.base16,latin1:Xo,ascii:Xo,binary:Xo,...eu};function ed(l,r="utf8"){const n=Xf[r];if(!n)throw new Error(`Unsupported encoding "${r}"`);return(r==="utf8"||r==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?tu(globalThis.Buffer.from(l,"utf-8")):n.decoder.decode(`${n.prefix}${l}`)}const nu="wc",td=2,ea="core",zi=`${nu}@2:${ea}:`,rd={name:ea,logger:"error"},id={database:":memory:"},nd="crypto",su="client_ed25519_seed",sd=le.ONE_DAY,od="keychain",ad="0.3",cd="messages",ud="0.3",hd=le.SIX_HOURS,ld="publisher",ou="irn",fd="error",au="wss://relay.walletconnect.com",cu="wss://relay.walletconnect.org",dd="relayer",gr={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},pd="_subscription",Ii={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},gd=le.ONE_SECOND,nb={database:":memory:"},yd="2.11.0",vd=1e4,md="0.3",_d="WALLETCONNECT_CLIENT_ID",ti={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},sb=null,wd="subscription",bd="0.3",Ed=le.FIVE_SECONDS*1e3,Id="pairing",xd="0.3",ob=null,$n={wc_pairingDelete:{req:{ttl:le.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:le.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:le.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:le.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:le.ONE_DAY,prompt:!1,tag:0},res:{ttl:le.ONE_DAY,prompt:!1,tag:0}}},Un={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},li={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Pd="history",Sd="0.3",Od="expirer",Kr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},Cd="0.3",ab=null,ta="verify-api",wn="https://verify.walletconnect.com",ra="https://verify.walletconnect.org",Rd=[wn,ra],Ad="echo",Td="https://echo.walletconnect.com";class Dd{constructor(r,n){this.core=r,this.logger=n,this.keychain=new Map,this.name=od,this.version=ad,this.initialized=!1,this.storagePrefix=zi,this.init=async()=>{if(!this.initialized){const o=await this.getKeyChain();typeof o<"u"&&(this.keychain=o),this.initialized=!0}},this.has=o=>(this.isInitialized(),this.keychain.has(o)),this.set=async(o,a)=>{this.isInitialized(),this.keychain.set(o,a),await this.persist()},this.get=o=>{this.isInitialized();const a=this.keychain.get(o);if(typeof a>"u"){const{message:d}=(0,y.Z7)("NO_MATCHING_KEY",`${this.name}: ${o}`);throw new Error(d)}return a},this.del=async o=>{this.isInitialized(),this.keychain.delete(o),await this.persist()},this.core=r,this.logger=(0,Ee.generateChildLogger)(n,this.name)}get context(){return(0,Ee.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(r){await this.core.storage.setItem(this.storageKey,(0,y.KC)(r))}async getKeyChain(){const r=await this.core.storage.getItem(this.storageKey);return typeof r<"u"?(0,y.IP)(r):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:r}=(0,y.Z7)("NOT_INITIALIZED",this.name);throw new Error(r)}}}class Nd{constructor(r,n,o){this.core=r,this.logger=n,this.name=nd,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=a=>(this.isInitialized(),this.keychain.has(a)),this.getClientId=async()=>{this.isInitialized();const a=await this.getClientSeed(),d=vs(a);return ys(d.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const a=(0,y.Au)();return this.setPrivateKey(a.publicKey,a.privateKey)},this.signJWT=async a=>{this.isInitialized();const d=await this.getClientSeed(),v=vs(d),P=(0,y.jd)();return await dn(P,a,sd,v)},this.generateSharedKey=(a,d,v)=>{this.isInitialized();const P=this.getPrivateKey(a),j=(0,y.m$)(P,d);return this.setSymKey(j,v)},this.setSymKey=async(a,d)=>{this.isInitialized();const v=d||(0,y.Ym)(a);return await this.keychain.set(v,a),v},this.deleteKeyPair=async a=>{this.isInitialized(),await this.keychain.del(a)},this.deleteSymKey=async a=>{this.isInitialized(),await this.keychain.del(a)},this.encode=async(a,d,v)=>{this.isInitialized();const P=(0,y.EN)(v),j=(0,qe.u)(d);if((0,y.Q8)(P)){const Q=P.senderPublicKey,ge=P.receiverPublicKey;a=await this.generateSharedKey(Q,ge)}const x=this.getSymKey(a),{type:M,senderPublicKey:K}=P;return(0,y.HI)({type:M,symKey:x,message:j,senderPublicKey:K})},this.decode=async(a,d,v)=>{this.isInitialized();const P=(0,y.Ll)(d,v);if((0,y.Q8)(P)){const j=P.receiverPublicKey,x=P.senderPublicKey;a=await this.generateSharedKey(j,x)}try{const j=this.getSymKey(a),x=(0,y.pe)({symKey:j,encoded:d});return(0,qe.D)(x)}catch(j){this.logger.error(`Failed to decode message from topic: '${a}', clientId: '${await this.getClientId()}'`),this.logger.error(j)}},this.getPayloadType=a=>{const d=(0,y.vB)(a);return(0,y.WG)(d.type)},this.getPayloadSenderPublicKey=a=>{const d=(0,y.vB)(a);return d.senderPublicKey?(0,ms.BB)(d.senderPublicKey,y.AW):void 0},this.core=r,this.logger=(0,Ee.generateChildLogger)(n,this.name),this.keychain=o||new Dd(this.core,this.logger)}get context(){return(0,Ee.getLoggerContext)(this.logger)}async setPrivateKey(r,n){return await this.keychain.set(r,n),r}getPrivateKey(r){return this.keychain.get(r)}async getClientSeed(){let r="";try{r=this.keychain.get(su)}catch{r=(0,y.jd)(),await this.keychain.set(su,r)}return ed(r,"base16")}getSymKey(r){return this.keychain.get(r)}isInitialized(){if(!this.initialized){const{message:r}=(0,y.Z7)("NOT_INITIALIZED",this.name);throw new Error(r)}}}class Fd extends Ur{constructor(r,n){super(r,n),this.logger=r,this.core=n,this.messages=new Map,this.name=cd,this.version=ud,this.initialized=!1,this.storagePrefix=zi,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const o=await this.getRelayerMessages();typeof o<"u"&&(this.messages=o),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(o){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(o)}finally{this.initialized=!0}}},this.set=async(o,a)=>{this.isInitialized();const d=(0,y.rj)(a);let v=this.messages.get(o);return typeof v>"u"&&(v={}),typeof v[d]<"u"||(v[d]=a,this.messages.set(o,v),await this.persist()),d},this.get=o=>{this.isInitialized();let a=this.messages.get(o);return typeof a>"u"&&(a={}),a},this.has=(o,a)=>{this.isInitialized();const d=this.get(o),v=(0,y.rj)(a);return typeof d[v]<"u"},this.del=async o=>{this.isInitialized(),this.messages.delete(o),await this.persist()},this.logger=(0,Ee.generateChildLogger)(r,this.name),this.core=n}get context(){return(0,Ee.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(r){await this.core.storage.setItem(this.storageKey,(0,y.KC)(r))}async getRelayerMessages(){const r=await this.core.storage.getItem(this.storageKey);return typeof r<"u"?(0,y.IP)(r):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:r}=(0,y.Z7)("NOT_INITIALIZED",this.name);throw new Error(r)}}}class Ld extends fr{constructor(r,n){super(r,n),this.relayer=r,this.logger=n,this.events=new se.EventEmitter,this.name=ld,this.queue=new Map,this.publishTimeout=(0,le.toMiliseconds)(le.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(o,a,d)=>{var v;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:o,message:a,opts:d}});try{const P=(d==null?void 0:d.ttl)||hd,j=(0,y._H)(d),x=(d==null?void 0:d.prompt)||!1,M=(d==null?void 0:d.tag)||0,K=(d==null?void 0:d.id)||(0,De.getBigIntRpcId)().toString(),Q={topic:o,message:a,opts:{ttl:P,relay:j,prompt:x,tag:M,id:K}},ge=setTimeout(()=>this.queue.set(K,Q),this.publishTimeout);try{await await(0,y.hF)(this.rpcPublish(o,a,P,j,x,M,K),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(K),this.relayer.events.emit(gr.publish,Q)}catch(ae){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(v=d==null?void 0:d.internal)!=null&&v.throwOnFailedPublish)throw this.removeRequestFromQueue(K),ae;return}finally{clearTimeout(ge)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:o,message:a,opts:d}})}catch(P){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(P),P}},this.on=(o,a)=>{this.events.on(o,a)},this.once=(o,a)=>{this.events.once(o,a)},this.off=(o,a)=>{this.events.off(o,a)},this.removeListener=(o,a)=>{this.events.removeListener(o,a)},this.relayer=r,this.logger=(0,Ee.generateChildLogger)(n,this.name),this.registerEventListeners()}get context(){return(0,Ee.getLoggerContext)(this.logger)}rpcPublish(r,n,o,a,d,v,P){var j,x,M,K;const Q={method:(0,y.cO)(a.protocol).publish,params:{topic:r,message:n,ttl:o,prompt:d,tag:v},id:P};return(0,y.o8)((j=Q.params)==null?void 0:j.prompt)&&((x=Q.params)==null||delete x.prompt),(0,y.o8)((M=Q.params)==null?void 0:M.tag)&&((K=Q.params)==null||delete K.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:Q}),this.relayer.request(Q)}removeRequestFromQueue(r){this.queue.delete(r)}checkQueue(){this.queue.forEach(async r=>{const{topic:n,message:o,opts:a}=r;await this.publish(n,o,a)})}registerEventListeners(){this.relayer.core.heartbeat.on(Ot.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(gr.connection_stalled);return}this.checkQueue()}),this.relayer.on(gr.message_ack,r=>{this.removeRequestFromQueue(r.id.toString())})}}class jd{constructor(){this.map=new Map,this.set=(r,n)=>{const o=this.get(r);this.exists(r,n)||this.map.set(r,[...o,n])},this.get=r=>this.map.get(r)||[],this.exists=(r,n)=>this.get(r).includes(n),this.delete=(r,n)=>{if(typeof n>"u"){this.map.delete(r);return}if(!this.map.has(r))return;const o=this.get(r);if(!this.exists(r,n))return;const a=o.filter(d=>d!==n);if(!a.length){this.map.delete(r);return}this.map.set(r,a)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var Md=Object.defineProperty,zd=Object.defineProperties,qd=Object.getOwnPropertyDescriptors,uu=Object.getOwnPropertySymbols,$d=Object.prototype.hasOwnProperty,Ud=Object.prototype.propertyIsEnumerable,hu=(l,r,n)=>r in l?Md(l,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):l[r]=n,Hn=(l,r)=>{for(var n in r||(r={}))$d.call(r,n)&&hu(l,n,r[n]);if(uu)for(var n of uu(r))Ud.call(r,n)&&hu(l,n,r[n]);return l},ia=(l,r)=>zd(l,qd(r));class Hd extends vi{constructor(r,n){super(r,n),this.relayer=r,this.logger=n,this.subscriptions=new Map,this.topicMap=new jd,this.events=new se.EventEmitter,this.name=wd,this.version=bd,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=zi,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(o,a)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:o,opts:a}});try{const d=(0,y._H)(a),v={topic:o,relay:d};this.pending.set(o,v);const P=await this.rpcSubscribe(o,d);return this.onSubscribe(P,v),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:o,opts:a}}),P}catch(d){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(d),d}},this.unsubscribe=async(o,a)=>{await this.restartToComplete(),this.isInitialized(),typeof(a==null?void 0:a.id)<"u"?await this.unsubscribeById(o,a.id,a):await this.unsubscribeByTopic(o,a)},this.isSubscribed=async o=>this.topics.includes(o)?!0:await new Promise((a,d)=>{const v=new le.Watch;v.start(this.pendingSubscriptionWatchLabel);const P=setInterval(()=>{!this.pending.has(o)&&this.topics.includes(o)&&(clearInterval(P),v.stop(this.pendingSubscriptionWatchLabel),a(!0)),v.elapsed(this.pendingSubscriptionWatchLabel)>=Ed&&(clearInterval(P),v.stop(this.pendingSubscriptionWatchLabel),d(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(o,a)=>{this.events.on(o,a)},this.once=(o,a)=>{this.events.once(o,a)},this.off=(o,a)=>{this.events.off(o,a)},this.removeListener=(o,a)=>{this.events.removeListener(o,a)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=r,this.logger=(0,Ee.generateChildLogger)(n,this.name),this.clientId=""}get context(){return(0,Ee.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(r,n){let o=!1;try{o=this.getSubscription(r).topic===n}catch{}return o}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(r,n){const o=this.topicMap.get(r);await Promise.all(o.map(async a=>await this.unsubscribeById(r,a,n)))}async unsubscribeById(r,n,o){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:r,id:n,opts:o}});try{const a=(0,y._H)(o);await this.rpcUnsubscribe(r,n,a);const d=(0,y.D6)("USER_DISCONNECTED",`${this.name}, ${r}`);await this.onUnsubscribe(r,n,d),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:r,id:n,opts:o}})}catch(a){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(a),a}}async rpcSubscribe(r,n){const o={method:(0,y.cO)(n.protocol).subscribe,params:{topic:r}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:o});try{await await(0,y.hF)(this.relayer.request(o),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(gr.connection_stalled)}return(0,y.rj)(r+this.clientId)}async rpcBatchSubscribe(r){if(!r.length)return;const n=r[0].relay,o={method:(0,y.cO)(n.protocol).batchSubscribe,params:{topics:r.map(a=>a.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:o});try{return await await(0,y.hF)(this.relayer.request(o),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(gr.connection_stalled)}}rpcUnsubscribe(r,n,o){const a={method:(0,y.cO)(o.protocol).unsubscribe,params:{topic:r,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a}),this.relayer.request(a)}onSubscribe(r,n){this.setSubscription(r,ia(Hn({},n),{id:r})),this.pending.delete(n.topic)}onBatchSubscribe(r){r.length&&r.forEach(n=>{this.setSubscription(n.id,Hn({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(r,n,o){this.events.removeAllListeners(n),this.hasSubscription(n,r)&&this.deleteSubscription(n,o),await this.relayer.messages.del(r)}async setRelayerSubscriptions(r){await this.relayer.core.storage.setItem(this.storageKey,r)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(r,n){this.subscriptions.has(r)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:r,subscription:n}),this.addSubscription(r,n))}addSubscription(r,n){this.subscriptions.set(r,Hn({},n)),this.topicMap.set(n.topic,r),this.events.emit(ti.created,n)}getSubscription(r){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:r});const n=this.subscriptions.get(r);if(!n){const{message:o}=(0,y.Z7)("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(o)}return n}deleteSubscription(r,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:r,reason:n});const o=this.getSubscription(r);this.subscriptions.delete(r),this.topicMap.delete(o.topic,r),this.events.emit(ti.deleted,ia(Hn({},o),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(ti.sync)}async reset(){if(this.cached.length){const r=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let n=0;n<r;n++){const o=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(o)}}this.events.emit(ti.resubscribed)}async restore(){try{const r=await this.getRelayerSubscriptions();if(typeof r>"u"||!r.length)return;if(this.subscriptions.size){const{message:n}=(0,y.Z7)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=r,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(r){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(r)}}async batchSubscribe(r){if(!r.length)return;const n=await this.rpcBatchSubscribe(r);(0,y.qt)(n)&&this.onBatchSubscribe(n.map((o,a)=>ia(Hn({},r[a]),{id:o})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const r=[];this.pending.forEach(n=>{r.push(n)}),await this.batchSubscribe(r)}registerEventListeners(){this.relayer.core.heartbeat.on(Ot.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(gr.connect,async()=>{await this.onConnect()}),this.relayer.on(gr.disconnect,()=>{this.onDisconnect()}),this.events.on(ti.created,async r=>{const n=ti.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:r}),await this.persist()}),this.events.on(ti.deleted,async r=>{const n=ti.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:r}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:r}=(0,y.Z7)("NOT_INITIALIZED",this.name);throw new Error(r)}}async restartToComplete(){this.restartInProgress&&await new Promise(r=>{const n=setInterval(()=>{this.restartInProgress||(clearInterval(n),r())},this.pollingInterval)})}}var Kd=Object.defineProperty,lu=Object.getOwnPropertySymbols,Bd=Object.prototype.hasOwnProperty,kd=Object.prototype.propertyIsEnumerable,fu=(l,r,n)=>r in l?Kd(l,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):l[r]=n,Vd=(l,r)=>{for(var n in r||(r={}))Bd.call(r,n)&&fu(l,n,r[n]);if(lu)for(var n of lu(r))kd.call(r,n)&&fu(l,n,r[n]);return l};class Gd extends Yr{constructor(r){super(r),this.protocol="wc",this.version=2,this.events=new se.EventEmitter,this.name=dd,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async n=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(n)}catch(o){throw this.logger.debug("Failed to Publish Request"),this.logger.error(o),o}},this.onPayloadHandler=n=>{this.onProviderPayload(n)},this.onConnectHandler=()=>{this.events.emit(gr.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=n=>{this.logger.error(n),this.events.emit(gr.error,n),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(Ii.payload,this.onPayloadHandler),this.provider.on(Ii.connect,this.onConnectHandler),this.provider.on(Ii.disconnect,this.onDisconnectHandler),this.provider.on(Ii.error,this.onProviderErrorHandler)},this.core=r.core,this.logger=typeof r.logger<"u"&&typeof r.logger!="string"?(0,Ee.generateChildLogger)(r.logger,this.name):(0,Ee.pino)((0,Ee.getDefaultLoggerOptions)({level:r.logger||fd})),this.messages=new Fd(this.logger,r.core),this.subscriber=new Hd(this,this.logger),this.publisher=new Ld(this,this.logger),this.relayUrl=(r==null?void 0:r.relayUrl)||au,this.projectId=r.projectId,this.bundleId=(0,y.X_)(),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${cu}...`),await this.restartTransport(cu)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},vd)}get context(){return(0,Ee.getLoggerContext)(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(r,n,o){this.isInitialized(),await this.publisher.publish(r,n,o),await this.recordMessageEvent({topic:r,message:n,publishedAt:Date.now()})}async subscribe(r,n){var o;this.isInitialized();let a=((o=this.subscriber.topicMap.get(r))==null?void 0:o[0])||"";if(a)return a;let d;const v=P=>{P.topic===r&&(this.subscriber.off(ti.created,v),d())};return await Promise.all([new Promise(P=>{d=P,this.subscriber.on(ti.created,v)}),new Promise(async P=>{a=await this.subscriber.subscribe(r,n),P()})]),a}async unsubscribe(r,n){this.isInitialized(),await this.subscriber.unsubscribe(r,n)}on(r,n){this.events.on(r,n)}once(r,n){this.events.once(r,n)}off(r,n){this.events.off(r,n)}removeListener(r,n){this.events.removeListener(r,n)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await(0,y.hF)(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(r){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){r&&r!==this.relayUrl&&(this.relayUrl=r,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(n=>{if(!this.initialized)return n();this.subscriber.once(ti.resubscribed,()=>{n()})}),new Promise(async(n,o)=>{try{await(0,y.hF)(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(a){o(a);return}n()})])}catch(n){this.logger.error(n);const o=n;if(!this.isConnectionStalled(o.message))throw n;this.provider.events.emit(Ii.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(r){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=r||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await(0,y.Gg)())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(r){return this.staleConnectionErrors.some(n=>r.includes(n))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const r=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Hr.r(new $o((0,y.$0)({sdkVersion:yd,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:r,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(r){const{topic:n,message:o}=r;await this.messages.set(n,o)}async shouldIgnoreMessageEvent(r){const{topic:n,message:o}=r;if(!o||o.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${o}`),!0;if(!await this.subscriber.isSubscribed(n))return this.logger.debug(`Ignoring message for non-subscribed topic ${n}`),!0;const a=this.messages.has(n,o);return a&&this.logger.debug(`Ignoring duplicate message: ${o}`),a}async onProviderPayload(r){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:r}),(0,De.isJsonRpcRequest)(r)){if(!r.method.endsWith(pd))return;const n=r.params,{topic:o,message:a,publishedAt:d}=n.data,v={topic:o,message:a,publishedAt:d};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Vd({type:"event",event:n.id},v)),this.events.emit(n.id,v),await this.acknowledgePayload(r),await this.onMessageEvent(v)}else(0,De.isJsonRpcResponse)(r)&&this.events.emit(gr.message_ack,r)}async onMessageEvent(r){await this.shouldIgnoreMessageEvent(r)||(this.events.emit(gr.message,r),await this.recordMessageEvent(r))}async acknowledgePayload(r){const n=(0,De.formatJsonRpcResult)(r.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(Ii.payload,this.onPayloadHandler),this.provider.off(Ii.connect,this.onConnectHandler),this.provider.off(Ii.disconnect,this.onDisconnectHandler),this.provider.off(Ii.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(gr.connection_stalled,()=>{this.restartTransport().catch(n=>this.logger.error(n))});let r=await(0,y.Gg)();(0,y.uw)(async n=>{this.initialized&&r!==n&&(r=n,n?await this.restartTransport().catch(o=>this.logger.error(o)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(o=>this.logger.error(o))))})}onProviderDisconnect(){this.events.emit(gr.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(r=>this.logger.error(r))},(0,le.toMiliseconds)(gd)))}isInitialized(){if(!this.initialized){const{message:r}=(0,y.Z7)("NOT_INITIALIZED",this.name);throw new Error(r)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(r=>{const n=setInterval(()=>{this.connected&&(clearInterval(n),r())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var Wd=Object.defineProperty,du=Object.getOwnPropertySymbols,Jd=Object.prototype.hasOwnProperty,Zd=Object.prototype.propertyIsEnumerable,pu=(l,r,n)=>r in l?Wd(l,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):l[r]=n,gu=(l,r)=>{for(var n in r||(r={}))Jd.call(r,n)&&pu(l,n,r[n]);if(du)for(var n of du(r))Zd.call(r,n)&&pu(l,n,r[n]);return l};class Cs extends yi{constructor(r,n,o,a=zi,d=void 0){super(r,n,o,a),this.core=r,this.logger=n,this.name=o,this.map=new Map,this.version=md,this.cached=[],this.initialized=!1,this.storagePrefix=zi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(v=>{this.getKey&&v!==null&&!(0,y.o8)(v)?this.map.set(this.getKey(v),v):(0,y.xW)(v)?this.map.set(v.id,v):(0,y.h1)(v)&&this.map.set(v.topic,v)}),this.cached=[],this.initialized=!0)},this.set=async(v,P)=>{this.isInitialized(),this.map.has(v)?await this.update(v,P):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:v,value:P}),this.map.set(v,P),await this.persist())},this.get=v=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:v}),this.getData(v)),this.getAll=v=>(this.isInitialized(),v?this.values.filter(P=>Object.keys(v).every(j=>gn()(P[j],v[j]))):this.values),this.update=async(v,P)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:v,update:P});const j=gu(gu({},this.getData(v)),P);this.map.set(v,j),await this.persist()},this.delete=async(v,P)=>{this.isInitialized(),this.map.has(v)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:v,reason:P}),this.map.delete(v),await this.persist())},this.logger=(0,Ee.generateChildLogger)(n,this.name),this.storagePrefix=a,this.getKey=d}get context(){return(0,Ee.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(r){await this.core.storage.setItem(this.storageKey,r)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(r){const n=this.map.get(r);if(!n){const{message:o}=(0,y.Z7)("NO_MATCHING_KEY",`${this.name}: ${r}`);throw this.logger.error(o),new Error(o)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const r=await this.getDataStore();if(typeof r>"u"||!r.length)return;if(this.map.size){const{message:n}=(0,y.Z7)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=r,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(r){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(r)}}isInitialized(){if(!this.initialized){const{message:r}=(0,y.Z7)("NOT_INITIALIZED",this.name);throw new Error(r)}}}class Qd{constructor(r,n){this.core=r,this.logger=n,this.name=Id,this.version=xd,this.events=new(_e()),this.initialized=!1,this.storagePrefix=zi,this.ignoredPayloadTypes=[y.rV],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:o})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...o])]},this.create=async()=>{this.isInitialized();const o=(0,y.jd)(),a=await this.core.crypto.setSymKey(o),d=(0,y.gn)(le.FIVE_MINUTES),v={protocol:ou},P={topic:a,expiry:d,relay:v,active:!1},j=(0,y.Bv)({protocol:this.core.protocol,version:this.core.version,topic:a,symKey:o,relay:v});return await this.pairings.set(a,P),await this.core.relayer.subscribe(a),this.core.expirer.set(a,d),{topic:a,uri:j}},this.pair=async o=>{this.isInitialized(),this.isValidPair(o);const{topic:a,symKey:d,relay:v}=(0,y.he)(o.uri);let P;if(this.pairings.keys.includes(a)&&(P=this.pairings.get(a),P.active))throw new Error(`Pairing already exists: ${a}. Please try again with a new connection URI.`);const j=(0,y.gn)(le.FIVE_MINUTES),x={topic:a,relay:v,expiry:j,active:!1};return await this.pairings.set(a,x),this.core.expirer.set(a,j),o.activatePairing&&await this.activate({topic:a}),this.events.emit(Un.create,x),this.core.crypto.keychain.has(a)||(await this.core.crypto.setSymKey(d,a),await this.core.relayer.subscribe(a,{relay:v})),x},this.activate=async({topic:o})=>{this.isInitialized();const a=(0,y.gn)(le.THIRTY_DAYS);await this.pairings.update(o,{active:!0,expiry:a}),this.core.expirer.set(o,a)},this.ping=async o=>{this.isInitialized(),await this.isValidPing(o);const{topic:a}=o;if(this.pairings.keys.includes(a)){const d=await this.sendRequest(a,"wc_pairingPing",{}),{done:v,resolve:P,reject:j}=(0,y.H1)();this.events.once((0,y.E0)("pairing_ping",d),({error:x})=>{x?j(x):P()}),await v()}},this.updateExpiry=async({topic:o,expiry:a})=>{this.isInitialized(),await this.pairings.update(o,{expiry:a})},this.updateMetadata=async({topic:o,metadata:a})=>{this.isInitialized(),await this.pairings.update(o,{peerMetadata:a})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async o=>{this.isInitialized(),await this.isValidDisconnect(o);const{topic:a}=o;this.pairings.keys.includes(a)&&(await this.sendRequest(a,"wc_pairingDelete",(0,y.D6)("USER_DISCONNECTED")),await this.deletePairing(a))},this.sendRequest=async(o,a,d)=>{const v=(0,De.formatJsonRpcRequest)(a,d),P=await this.core.crypto.encode(o,v),j=$n[a].req;return this.core.history.set(o,v),this.core.relayer.publish(o,P,j),v.id},this.sendResult=async(o,a,d)=>{const v=(0,De.formatJsonRpcResult)(o,d),P=await this.core.crypto.encode(a,v),j=await this.core.history.get(a,o),x=$n[j.request.method].res;await this.core.relayer.publish(a,P,x),await this.core.history.resolve(v)},this.sendError=async(o,a,d)=>{const v=(0,De.formatJsonRpcError)(o,d),P=await this.core.crypto.encode(a,v),j=await this.core.history.get(a,o),x=$n[j.request.method]?$n[j.request.method].res:$n.unregistered_method.res;await this.core.relayer.publish(a,P,x),await this.core.history.resolve(v)},this.deletePairing=async(o,a)=>{await this.core.relayer.unsubscribe(o),await Promise.all([this.pairings.delete(o,(0,y.D6)("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(o),a?Promise.resolve():this.core.expirer.del(o)])},this.cleanup=async()=>{const o=this.pairings.getAll().filter(a=>(0,y.Bw)(a.expiry));await Promise.all(o.map(a=>this.deletePairing(a.topic)))},this.onRelayEventRequest=o=>{const{topic:a,payload:d}=o;switch(d.method){case"wc_pairingPing":return this.onPairingPingRequest(a,d);case"wc_pairingDelete":return this.onPairingDeleteRequest(a,d);default:return this.onUnknownRpcMethodRequest(a,d)}},this.onRelayEventResponse=async o=>{const{topic:a,payload:d}=o,v=(await this.core.history.get(a,d.id)).request.method;switch(v){case"wc_pairingPing":return this.onPairingPingResponse(a,d);default:return this.onUnknownRpcMethodResponse(v)}},this.onPairingPingRequest=async(o,a)=>{const{id:d}=a;try{this.isValidPing({topic:o}),await this.sendResult(d,o,!0),this.events.emit(Un.ping,{id:d,topic:o})}catch(v){await this.sendError(d,o,v),this.logger.error(v)}},this.onPairingPingResponse=(o,a)=>{const{id:d}=a;setTimeout(()=>{(0,De.isJsonRpcResult)(a)?this.events.emit((0,y.E0)("pairing_ping",d),{}):(0,De.isJsonRpcError)(a)&&this.events.emit((0,y.E0)("pairing_ping",d),{error:a.error})},500)},this.onPairingDeleteRequest=async(o,a)=>{const{id:d}=a;try{this.isValidDisconnect({topic:o}),await this.deletePairing(o),this.events.emit(Un.delete,{id:d,topic:o})}catch(v){await this.sendError(d,o,v),this.logger.error(v)}},this.onUnknownRpcMethodRequest=async(o,a)=>{const{id:d,method:v}=a;try{if(this.registeredMethods.includes(v))return;const P=(0,y.D6)("WC_METHOD_UNSUPPORTED",v);await this.sendError(d,o,P),this.logger.error(P)}catch(P){await this.sendError(d,o,P),this.logger.error(P)}},this.onUnknownRpcMethodResponse=o=>{this.registeredMethods.includes(o)||this.logger.error((0,y.D6)("WC_METHOD_UNSUPPORTED",o))},this.isValidPair=o=>{var a;if(!(0,y.EJ)(o)){const{message:v}=(0,y.Z7)("MISSING_OR_INVALID",`pair() params: ${o}`);throw new Error(v)}if(!(0,y.jv)(o.uri)){const{message:v}=(0,y.Z7)("MISSING_OR_INVALID",`pair() uri: ${o.uri}`);throw new Error(v)}const d=(0,y.he)(o.uri);if(!((a=d==null?void 0:d.relay)!=null&&a.protocol)){const{message:v}=(0,y.Z7)("MISSING_OR_INVALID","pair() uri#relay-protocol");throw new Error(v)}if(!(d!=null&&d.symKey)){const{message:v}=(0,y.Z7)("MISSING_OR_INVALID","pair() uri#symKey");throw new Error(v)}},this.isValidPing=async o=>{if(!(0,y.EJ)(o)){const{message:d}=(0,y.Z7)("MISSING_OR_INVALID",`ping() params: ${o}`);throw new Error(d)}const{topic:a}=o;await this.isValidPairingTopic(a)},this.isValidDisconnect=async o=>{if(!(0,y.EJ)(o)){const{message:d}=(0,y.Z7)("MISSING_OR_INVALID",`disconnect() params: ${o}`);throw new Error(d)}const{topic:a}=o;await this.isValidPairingTopic(a)},this.isValidPairingTopic=async o=>{if(!(0,y.M_)(o,!1)){const{message:a}=(0,y.Z7)("MISSING_OR_INVALID",`pairing topic should be a string: ${o}`);throw new Error(a)}if(!this.pairings.keys.includes(o)){const{message:a}=(0,y.Z7)("NO_MATCHING_KEY",`pairing topic doesn't exist: ${o}`);throw new Error(a)}if((0,y.Bw)(this.pairings.get(o).expiry)){await this.deletePairing(o);const{message:a}=(0,y.Z7)("EXPIRED",`pairing topic: ${o}`);throw new Error(a)}},this.core=r,this.logger=(0,Ee.generateChildLogger)(n,this.name),this.pairings=new Cs(this.core,this.logger,this.name,this.storagePrefix)}get context(){return(0,Ee.getLoggerContext)(this.logger)}isInitialized(){if(!this.initialized){const{message:r}=(0,y.Z7)("NOT_INITIALIZED",this.name);throw new Error(r)}}registerRelayerEvents(){this.core.relayer.on(gr.message,async r=>{const{topic:n,message:o}=r;if(!this.pairings.keys.includes(n)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(o)))return;const a=await this.core.crypto.decode(n,o);try{(0,De.isJsonRpcRequest)(a)?(this.core.history.set(n,a),this.onRelayEventRequest({topic:n,payload:a})):(0,De.isJsonRpcResponse)(a)&&(await this.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a}),this.core.history.delete(n,a.id))}catch(d){this.logger.error(d)}})}registerExpirerEvents(){this.core.expirer.on(Kr.expired,async r=>{const{topic:n}=(0,y.iP)(r.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(Un.expire,{topic:n}))})}}class Yd extends Pr{constructor(r,n){super(r,n),this.core=r,this.logger=n,this.records=new Map,this.events=new se.EventEmitter,this.name=Pd,this.version=Sd,this.cached=[],this.initialized=!1,this.storagePrefix=zi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>this.records.set(o.id,o)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(o,a,d)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:o,request:a,chainId:d}),this.records.has(a.id))return;const v={id:a.id,topic:o,request:{method:a.method,params:a.params||null},chainId:d,expiry:(0,y.gn)(le.THIRTY_DAYS)};this.records.set(v.id,v),this.events.emit(li.created,v)},this.resolve=async o=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:o}),!this.records.has(o.id))return;const a=await this.getRecord(o.id);typeof a.response>"u"&&(a.response=(0,De.isJsonRpcError)(o)?{error:o.error}:{result:o.result},this.records.set(a.id,a),this.events.emit(li.updated,a))},this.get=async(o,a)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:o,id:a}),await this.getRecord(a)),this.delete=(o,a)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:a}),this.values.forEach(d=>{if(d.topic===o){if(typeof a<"u"&&d.id!==a)return;this.records.delete(d.id),this.events.emit(li.deleted,d)}})},this.exists=async(o,a)=>(this.isInitialized(),this.records.has(a)?(await this.getRecord(a)).topic===o:!1),this.on=(o,a)=>{this.events.on(o,a)},this.once=(o,a)=>{this.events.once(o,a)},this.off=(o,a)=>{this.events.off(o,a)},this.removeListener=(o,a)=>{this.events.removeListener(o,a)},this.logger=(0,Ee.generateChildLogger)(n,this.name)}get context(){return(0,Ee.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const r=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const o={topic:n.topic,request:(0,De.formatJsonRpcRequest)(n.request.method,n.request.params,n.id),chainId:n.chainId};return r.push(o)}),r}async setJsonRpcRecords(r){await this.core.storage.setItem(this.storageKey,r)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(r){this.isInitialized();const n=this.records.get(r);if(!n){const{message:o}=(0,y.Z7)("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(o)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(li.sync)}async restore(){try{const r=await this.getJsonRpcRecords();if(typeof r>"u"||!r.length)return;if(this.records.size){const{message:n}=(0,y.Z7)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=r,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}}registerEventListeners(){this.events.on(li.created,r=>{const n=li.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:r}),this.persist()}),this.events.on(li.updated,r=>{const n=li.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:r}),this.persist()}),this.events.on(li.deleted,r=>{const n=li.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:r}),this.persist()}),this.core.heartbeat.on(Ot.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(r=>{(0,le.toMiliseconds)(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.delete(r.topic,r.id))})}catch(r){this.logger.warn(r)}}isInitialized(){if(!this.initialized){const{message:r}=(0,y.Z7)("NOT_INITIALIZED",this.name);throw new Error(r)}}}class Xd extends Dt{constructor(r,n){super(r,n),this.core=r,this.logger=n,this.expirations=new Map,this.events=new se.EventEmitter,this.name=Od,this.version=Cd,this.cached=[],this.initialized=!1,this.storagePrefix=zi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>this.expirations.set(o.target,o)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=o=>{try{const a=this.formatTarget(o);return typeof this.getExpiration(a)<"u"}catch{return!1}},this.set=(o,a)=>{this.isInitialized();const d=this.formatTarget(o),v={target:d,expiry:a};this.expirations.set(d,v),this.checkExpiry(d,v),this.events.emit(Kr.created,{target:d,expiration:v})},this.get=o=>{this.isInitialized();const a=this.formatTarget(o);return this.getExpiration(a)},this.del=o=>{if(this.isInitialized(),this.has(o)){const a=this.formatTarget(o),d=this.getExpiration(a);this.expirations.delete(a),this.events.emit(Kr.deleted,{target:a,expiration:d})}},this.on=(o,a)=>{this.events.on(o,a)},this.once=(o,a)=>{this.events.once(o,a)},this.off=(o,a)=>{this.events.off(o,a)},this.removeListener=(o,a)=>{this.events.removeListener(o,a)},this.logger=(0,Ee.generateChildLogger)(n,this.name)}get context(){return(0,Ee.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(r){if(typeof r=="string")return(0,y.Z4)(r);if(typeof r=="number")return(0,y.Gq)(r);const{message:n}=(0,y.Z7)("UNKNOWN_TYPE",`Target type: ${typeof r}`);throw new Error(n)}async setExpirations(r){await this.core.storage.setItem(this.storageKey,r)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Kr.sync)}async restore(){try{const r=await this.getExpirations();if(typeof r>"u"||!r.length)return;if(this.expirations.size){const{message:n}=(0,y.Z7)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=r,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(r){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(r)}}getExpiration(r){const n=this.expirations.get(r);if(!n){const{message:o}=(0,y.Z7)("NO_MATCHING_KEY",`${this.name}: ${r}`);throw this.logger.error(o),new Error(o)}return n}checkExpiry(r,n){const{expiry:o}=n;(0,le.toMiliseconds)(o)-Date.now()<=0&&this.expire(r,n)}expire(r,n){this.expirations.delete(r),this.events.emit(Kr.expired,{target:r,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((r,n)=>this.checkExpiry(n,r))}registerEventListeners(){this.core.heartbeat.on(Ot.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Kr.created,r=>{const n=Kr.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:r}),this.persist()}),this.events.on(Kr.expired,r=>{const n=Kr.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:r}),this.persist()}),this.events.on(Kr.deleted,r=>{const n=Kr.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:r}),this.persist()})}isInitialized(){if(!this.initialized){const{message:r}=(0,y.Z7)("NOT_INITIALIZED",this.name);throw new Error(r)}}}class ep extends Nt{constructor(r,n){super(r,n),this.projectId=r,this.logger=n,this.name=ta,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async o=>{if(this.verifyDisabled||(0,y.b$)()||!(0,y.jU)())return;const a=this.getVerifyUrl(o==null?void 0:o.verifyUrl);this.verifyUrl!==a&&this.removeIframe(),this.verifyUrl=a;try{await this.createIframe()}catch(d){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(d)}if(!this.initialized){this.removeIframe(),this.verifyUrl=ra;try{await this.createIframe()}catch(d){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(d),this.verifyDisabled=!0}}},this.register=async o=>{this.initialized?this.sendPost(o.attestationId):(this.addToQueue(o.attestationId),await this.init())},this.resolve=async o=>{if(this.isDevEnv)return"";const a=this.getVerifyUrl(o==null?void 0:o.verifyUrl);let d;try{d=await this.fetchAttestation(o.attestationId,a)}catch(v){this.logger.info(`failed to resolve attestation: ${o.attestationId} from url: ${a}`),this.logger.info(v),d=await this.fetchAttestation(o.attestationId,ra)}return d},this.fetchAttestation=async(o,a)=>{this.logger.info(`resolving attestation: ${o} from url: ${a}`);const d=this.startAbortTimer(le.ONE_SECOND*2),v=await fetch(`${a}/attestation/${o}`,{signal:this.abortController.signal});return clearTimeout(d),v.status===200?await v.json():void 0},this.addToQueue=o=>{this.queue.push(o)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(o=>this.sendPost(o)),this.queue=[])},this.sendPost=o=>{var a;try{if(!this.iframe)return;(a=this.iframe.contentWindow)==null||a.postMessage(o,"*"),this.logger.info(`postMessage sent: ${o} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let o;const a=d=>{d.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",a),o())};await Promise.race([new Promise(d=>{if(document.getElementById(ta))return d();window.addEventListener("message",a);const v=document.createElement("iframe");v.id=ta,v.src=`${this.verifyUrl}/${this.projectId}`,v.style.display="none",document.body.append(v),this.iframe=v,o=d}),new Promise((d,v)=>setTimeout(()=>{window.removeEventListener("message",a),v("verify iframe load timeout")},(0,le.toMiliseconds)(le.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.getVerifyUrl=o=>{let a=o||wn;return Rd.includes(a)||(this.logger.info(`verify url: ${a}, not included in trusted list, assigning default: ${wn}`),a=wn),a},this.logger=(0,Ee.generateChildLogger)(n,this.name),this.verifyUrl=wn,this.abortController=new AbortController,this.isDevEnv=(0,y.UG)()&&{NODE_ENV:"production",PUBLIC_PATH:"/"}.IS_VITEST}get context(){return(0,Ee.getLoggerContext)(this.logger)}startAbortTimer(r){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),(0,le.toMiliseconds)(r))}}class tp extends bt{constructor(r,n){super(r,n),this.projectId=r,this.logger=n,this.context=Ad,this.registerDeviceToken=async o=>{const{clientId:a,token:d,notificationType:v,enableEncrypted:P=!1}=o,j=`${Td}/${this.projectId}/clients`;await Uo()(j,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:a,type:v,token:d,always_raw:P})})},this.logger=(0,Ee.generateChildLogger)(n,this.context)}}var rp=Object.defineProperty,yu=Object.getOwnPropertySymbols,ip=Object.prototype.hasOwnProperty,np=Object.prototype.propertyIsEnumerable,vu=(l,r,n)=>r in l?rp(l,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):l[r]=n,mu=(l,r)=>{for(var n in r||(r={}))ip.call(r,n)&&vu(l,n,r[n]);if(yu)for(var n of yu(r))np.call(r,n)&&vu(l,n,r[n]);return l};class na extends ur{constructor(r){super(r),this.protocol=nu,this.version=td,this.name=ea,this.events=new se.EventEmitter,this.initialized=!1,this.on=(o,a)=>this.events.on(o,a),this.once=(o,a)=>this.events.once(o,a),this.off=(o,a)=>this.events.off(o,a),this.removeListener=(o,a)=>this.events.removeListener(o,a),this.projectId=r==null?void 0:r.projectId,this.relayUrl=(r==null?void 0:r.relayUrl)||au,this.customStoragePrefix=r!=null&&r.customStoragePrefix?`:${r.customStoragePrefix}`:"";const n=typeof(r==null?void 0:r.logger)<"u"&&typeof(r==null?void 0:r.logger)!="string"?r.logger:(0,Ee.pino)((0,Ee.getDefaultLoggerOptions)({level:(r==null?void 0:r.logger)||rd.logger}));this.logger=(0,Ee.generateChildLogger)(n,this.name),this.heartbeat=new Ot.HeartBeat,this.crypto=new Nd(this,this.logger,r==null?void 0:r.keychain),this.history=new Yd(this,this.logger),this.expirer=new Xd(this,this.logger),this.storage=r!=null&&r.storage?r.storage:new kt(mu(mu({},id),r==null?void 0:r.storageOptions)),this.relayer=new Gd({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Qd(this,this.logger),this.verify=new ep(this.projectId||"",this.logger),this.echoClient=new tp(this.projectId||"",this.logger)}static async init(r){const n=new na(r);await n.initialize();const o=await n.crypto.getClientId();return await n.storage.setItem(_d,o),n}get context(){return(0,Ee.getLoggerContext)(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(r){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,r),this.logger.error(r.message),r}}}const sp=na,_u="wc",wu=2,bu="client",sa=`${_u}@${wu}:${bu}:`,oa={name:bu,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},cb={session_proposal:"session_proposal",session_update:"session_update",session_extend:"session_extend",session_ping:"session_ping",session_delete:"session_delete",session_expire:"session_expire",session_request:"session_request",session_request_sent:"session_request_sent",session_event:"session_event",proposal_expire:"proposal_expire"},ub={database:":memory:"},Eu="WALLETCONNECT_DEEPLINK_CHOICE",hb={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},lb="history",fb="0.3",op="proposal",db=null,Iu="Proposal expired",ap="session",Rs=le.SEVEN_DAYS,cp="engine",Kn={wc_sessionPropose:{req:{ttl:le.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:le.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:le.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:le.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:le.ONE_DAY,prompt:!1,tag:1104},res:{ttl:le.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:le.ONE_DAY,prompt:!1,tag:1106},res:{ttl:le.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:le.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:le.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:le.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:le.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:le.ONE_DAY,prompt:!1,tag:1112},res:{ttl:le.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:le.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:le.THIRTY_SECONDS,prompt:!1,tag:1115}}},aa={min:le.FIVE_MINUTES,max:le.SEVEN_DAYS},xi={idle:"IDLE",active:"ACTIVE"},up="request",hp=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var lp=Object.defineProperty,fp=Object.defineProperties,dp=Object.getOwnPropertyDescriptors,xu=Object.getOwnPropertySymbols,pp=Object.prototype.hasOwnProperty,gp=Object.prototype.propertyIsEnumerable,Pu=(l,r,n)=>r in l?lp(l,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):l[r]=n,Cr=(l,r)=>{for(var n in r||(r={}))pp.call(r,n)&&Pu(l,n,r[n]);if(xu)for(var n of xu(r))gp.call(r,n)&&Pu(l,n,r[n]);return l},Bn=(l,r)=>fp(l,dp(r));class yp extends Gt{constructor(r){super(r),this.name=cp,this.events=new(_e()),this.initialized=!1,this.ignoredPayloadTypes=[y.rV],this.requestQueue={state:xi.idle,queue:[]},this.sessionRequestQueue={state:xi.idle,queue:[]},this.requestQueueDelay=le.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(Kn)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},(0,le.toMiliseconds)(this.requestQueueDelay)))},this.connect=async n=>{await this.isInitialized();const o=Bn(Cr({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(o);const{pairingTopic:a,requiredNamespaces:d,optionalNamespaces:v,sessionProperties:P,relays:j}=o;let x=a,M,K=!1;if(x&&(K=this.client.core.pairing.pairings.get(x).active),!x||!K){const{topic:We,uri:Je}=await this.client.core.pairing.create();x=We,M=Je}const Q=await this.client.core.crypto.generateKeyPair(),ge=Cr({requiredNamespaces:d,optionalNamespaces:v,relays:j??[{protocol:ou}],proposer:{publicKey:Q,metadata:this.client.metadata}},P&&{sessionProperties:P}),{reject:ae,resolve:He,done:nt}=(0,y.H1)(le.FIVE_MINUTES,Iu);if(this.events.once((0,y.E0)("session_connect"),async({error:We,session:Je})=>{if(We)ae(We);else if(Je){Je.self.publicKey=Q;const xt=Bn(Cr({},Je),{requiredNamespaces:Je.requiredNamespaces,optionalNamespaces:Je.optionalNamespaces});await this.client.session.set(Je.topic,xt),await this.setExpiry(Je.topic,Je.expiry),x&&await this.client.core.pairing.updateMetadata({topic:x,metadata:Je.peer.metadata}),He(xt)}}),!x){const{message:We}=(0,y.Z7)("NO_MATCHING_KEY",`connect() pairing topic: ${x}`);throw new Error(We)}const Ve=await this.sendRequest({topic:x,method:"wc_sessionPropose",params:ge}),nr=(0,y.gn)(le.FIVE_MINUTES);return await this.setProposal(Ve,Cr({id:Ve,expiry:nr},ge)),{uri:M,approval:nt}},this.pair=async n=>(await this.isInitialized(),await this.client.core.pairing.pair(n)),this.approve=async n=>{await this.isInitialized(),await this.isValidApprove(n);const{id:o,relayProtocol:a,namespaces:d,sessionProperties:v}=n,P=this.client.proposal.get(o);let{pairingTopic:j,proposer:x,requiredNamespaces:M,optionalNamespaces:K}=P;j=j||"",(0,y.L5)(M)||(M=(0,y.fc)(d,"approve()"));const Q=await this.client.core.crypto.generateKeyPair(),ge=x.publicKey,ae=await this.client.core.crypto.generateSharedKey(Q,ge);j&&o&&(await this.client.core.pairing.updateMetadata({topic:j,metadata:x.metadata}),await this.sendResult({id:o,topic:j,result:{relay:{protocol:a??"irn"},responderPublicKey:Q}}),await this.client.proposal.delete(o,(0,y.D6)("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:j}));const He=Cr({relay:{protocol:a??"irn"},namespaces:d,requiredNamespaces:M,optionalNamespaces:K,pairingTopic:j,controller:{publicKey:Q,metadata:this.client.metadata},expiry:(0,y.gn)(Rs)},v&&{sessionProperties:v});await this.client.core.relayer.subscribe(ae),await this.sendRequest({topic:ae,method:"wc_sessionSettle",params:He,throwOnFailedPublish:!0});const nt=Bn(Cr({},He),{topic:ae,pairingTopic:j,acknowledged:!1,self:He.controller,peer:{publicKey:x.publicKey,metadata:x.metadata},controller:Q});return await this.client.session.set(ae,nt),await this.setExpiry(ae,(0,y.gn)(Rs)),{topic:ae,acknowledged:()=>new Promise(Ve=>setTimeout(()=>Ve(this.client.session.get(ae)),500))}},this.reject=async n=>{await this.isInitialized(),await this.isValidReject(n);const{id:o,reason:a}=n,{pairingTopic:d}=this.client.proposal.get(o);d&&(await this.sendError(o,d,a),await this.client.proposal.delete(o,(0,y.D6)("USER_DISCONNECTED")))},this.update=async n=>{await this.isInitialized(),await this.isValidUpdate(n);const{topic:o,namespaces:a}=n,d=await this.sendRequest({topic:o,method:"wc_sessionUpdate",params:{namespaces:a}}),{done:v,resolve:P,reject:j}=(0,y.H1)();return this.events.once((0,y.E0)("session_update",d),({error:x})=>{x?j(x):P()}),await this.client.session.update(o,{namespaces:a}),{acknowledged:v}},this.extend=async n=>{await this.isInitialized(),await this.isValidExtend(n);const{topic:o}=n,a=await this.sendRequest({topic:o,method:"wc_sessionExtend",params:{}}),{done:d,resolve:v,reject:P}=(0,y.H1)();return this.events.once((0,y.E0)("session_extend",a),({error:j})=>{j?P(j):v()}),await this.setExpiry(o,(0,y.gn)(Rs)),{acknowledged:d}},this.request=async n=>{await this.isInitialized(),await this.isValidRequest(n);const{chainId:o,request:a,topic:d,expiry:v}=n,P=(0,De.payloadId)(),{done:j,resolve:x,reject:M}=(0,y.H1)(v,"Request expired. Please try again.");return this.events.once((0,y.E0)("session_request",P),({error:K,result:Q})=>{K?M(K):x(Q)}),await Promise.all([new Promise(async K=>{await this.sendRequest({clientRpcId:P,topic:d,method:"wc_sessionRequest",params:{request:a,chainId:o},expiry:v,throwOnFailedPublish:!0}).catch(Q=>M(Q)),this.client.events.emit("session_request_sent",{topic:d,request:a,chainId:o,id:P}),K()}),new Promise(async K=>{const Q=await(0,y.bW)(this.client.core.storage,Eu);(0,y.Hh)({id:P,topic:d,wcDeepLink:Q}),K()}),j()]).then(K=>K[2])},this.respond=async n=>{await this.isInitialized(),await this.isValidRespond(n);const{topic:o,response:a}=n,{id:d}=a;(0,De.isJsonRpcResult)(a)?await this.sendResult({id:d,topic:o,result:a.result,throwOnFailedPublish:!0}):(0,De.isJsonRpcError)(a)&&await this.sendError(d,o,a.error),this.cleanupAfterResponse(n)},this.ping=async n=>{await this.isInitialized(),await this.isValidPing(n);const{topic:o}=n;if(this.client.session.keys.includes(o)){const a=await this.sendRequest({topic:o,method:"wc_sessionPing",params:{}}),{done:d,resolve:v,reject:P}=(0,y.H1)();this.events.once((0,y.E0)("session_ping",a),({error:j})=>{j?P(j):v()}),await d()}else this.client.core.pairing.pairings.keys.includes(o)&&await this.client.core.pairing.ping({topic:o})},this.emit=async n=>{await this.isInitialized(),await this.isValidEmit(n);const{topic:o,event:a,chainId:d}=n;await this.sendRequest({topic:o,method:"wc_sessionEvent",params:{event:a,chainId:d}})},this.disconnect=async n=>{await this.isInitialized(),await this.isValidDisconnect(n);const{topic:o}=n;this.client.session.keys.includes(o)?(await this.sendRequest({topic:o,method:"wc_sessionDelete",params:(0,y.D6)("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession(o)):await this.client.core.pairing.disconnect({topic:o})},this.find=n=>(this.isInitialized(),this.client.session.getAll().filter(o=>(0,y.Ih)(o,n))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async n=>{if(n.pairingTopic)try{const o=this.client.core.pairing.pairings.get(n.pairingTopic),a=this.client.core.pairing.pairings.getAll().filter(d=>{var v,P;return((v=d.peerMetadata)==null?void 0:v.url)&&((P=d.peerMetadata)==null?void 0:P.url)===n.peer.metadata.url&&d.topic&&d.topic!==o.topic});if(a.length===0)return;this.client.logger.info(`Cleaning up ${a.length} duplicate pairing(s)`),await Promise.all(a.map(d=>this.client.core.pairing.disconnect({topic:d.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(o){this.client.logger.error(o)}},this.deleteSession=async(n,o)=>{const{self:a}=this.client.session.get(n);await this.client.core.relayer.unsubscribe(n),this.client.session.delete(n,(0,y.D6)("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(a.publicKey)&&await this.client.core.crypto.deleteKeyPair(a.publicKey),this.client.core.crypto.keychain.has(n)&&await this.client.core.crypto.deleteSymKey(n),o||this.client.core.expirer.del(n),this.client.core.storage.removeItem(Eu).catch(d=>this.client.logger.warn(d)),this.getPendingSessionRequests().forEach(d=>{d.topic===n&&this.deletePendingSessionRequest(d.id,(0,y.D6)("USER_DISCONNECTED"))})},this.deleteProposal=async(n,o)=>{await Promise.all([this.client.proposal.delete(n,(0,y.D6)("USER_DISCONNECTED")),o?Promise.resolve():this.client.core.expirer.del(n)])},this.deletePendingSessionRequest=async(n,o,a=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,o),a?Promise.resolve():this.client.core.expirer.del(n)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(d=>d.id!==n),a&&(this.sessionRequestQueue.state=xi.idle)},this.setExpiry=async(n,o)=>{this.client.session.keys.includes(n)&&await this.client.session.update(n,{expiry:o}),this.client.core.expirer.set(n,o)},this.setProposal=async(n,o)=>{await this.client.proposal.set(n,o),this.client.core.expirer.set(n,o.expiry)},this.setPendingSessionRequest=async n=>{const o=Kn.wc_sessionRequest.req.ttl,{id:a,topic:d,params:v,verifyContext:P}=n;await this.client.pendingRequest.set(a,{id:a,topic:d,params:v,verifyContext:P}),o&&this.client.core.expirer.set(a,(0,y.gn)(o))},this.sendRequest=async n=>{const{topic:o,method:a,params:d,expiry:v,relayRpcId:P,clientRpcId:j,throwOnFailedPublish:x}=n,M=(0,De.formatJsonRpcRequest)(a,d,j);if((0,y.jU)()&&hp.includes(a)){const ge=(0,y.rj)(JSON.stringify(M));this.client.core.verify.register({attestationId:ge})}const K=await this.client.core.crypto.encode(o,M),Q=Kn[a].req;return v&&(Q.ttl=v),P&&(Q.id=P),this.client.core.history.set(o,M),x?(Q.internal=Bn(Cr({},Q.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(o,K,Q)):this.client.core.relayer.publish(o,K,Q).catch(ge=>this.client.logger.error(ge)),M.id},this.sendResult=async n=>{const{id:o,topic:a,result:d,throwOnFailedPublish:v}=n,P=(0,De.formatJsonRpcResult)(o,d),j=await this.client.core.crypto.encode(a,P),x=await this.client.core.history.get(a,o),M=Kn[x.request.method].res;v?(M.internal=Bn(Cr({},M.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(a,j,M)):this.client.core.relayer.publish(a,j,M).catch(K=>this.client.logger.error(K)),await this.client.core.history.resolve(P)},this.sendError=async(n,o,a)=>{const d=(0,De.formatJsonRpcError)(n,a),v=await this.client.core.crypto.encode(o,d),P=await this.client.core.history.get(o,n),j=Kn[P.request.method].res;this.client.core.relayer.publish(o,v,j),await this.client.core.history.resolve(d)},this.cleanup=async()=>{const n=[],o=[];this.client.session.getAll().forEach(a=>{(0,y.Bw)(a.expiry)&&n.push(a.topic)}),this.client.proposal.getAll().forEach(a=>{(0,y.Bw)(a.expiry)&&o.push(a.id)}),await Promise.all([...n.map(a=>this.deleteSession(a)),...o.map(a=>this.deleteProposal(a))])},this.onRelayEventRequest=async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===xi.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=xi.active;const n=this.requestQueue.queue.shift();if(n)try{this.processRequest(n),await new Promise(o=>setTimeout(o,300))}catch(o){this.client.logger.warn(o)}}this.requestQueue.state=xi.idle},this.processRequest=n=>{const{topic:o,payload:a}=n,d=a.method;switch(d){case"wc_sessionPropose":return this.onSessionProposeRequest(o,a);case"wc_sessionSettle":return this.onSessionSettleRequest(o,a);case"wc_sessionUpdate":return this.onSessionUpdateRequest(o,a);case"wc_sessionExtend":return this.onSessionExtendRequest(o,a);case"wc_sessionPing":return this.onSessionPingRequest(o,a);case"wc_sessionDelete":return this.onSessionDeleteRequest(o,a);case"wc_sessionRequest":return this.onSessionRequest(o,a);case"wc_sessionEvent":return this.onSessionEventRequest(o,a);default:return this.client.logger.info(`Unsupported request method ${d}`)}},this.onRelayEventResponse=async n=>{const{topic:o,payload:a}=n,d=(await this.client.core.history.get(o,a.id)).request.method;switch(d){case"wc_sessionPropose":return this.onSessionProposeResponse(o,a);case"wc_sessionSettle":return this.onSessionSettleResponse(o,a);case"wc_sessionUpdate":return this.onSessionUpdateResponse(o,a);case"wc_sessionExtend":return this.onSessionExtendResponse(o,a);case"wc_sessionPing":return this.onSessionPingResponse(o,a);case"wc_sessionRequest":return this.onSessionRequestResponse(o,a);default:return this.client.logger.info(`Unsupported response method ${d}`)}},this.onRelayEventUnknownPayload=n=>{const{topic:o}=n,{message:a}=(0,y.Z7)("MISSING_OR_INVALID",`Decoded payload on topic ${o} is not identifiable as a JSON-RPC request or a response.`);throw new Error(a)},this.onSessionProposeRequest=async(n,o)=>{const{params:a,id:d}=o;try{this.isValidConnect(Cr({},o.params));const v=(0,y.gn)(le.FIVE_MINUTES),P=Cr({id:d,pairingTopic:n,expiry:v},a);await this.setProposal(d,P);const j=(0,y.rj)(JSON.stringify(o)),x=await this.getVerifyContext(j,P.proposer.metadata);this.client.events.emit("session_proposal",{id:d,params:P,verifyContext:x})}catch(v){await this.sendError(d,n,v),this.client.logger.error(v)}},this.onSessionProposeResponse=async(n,o)=>{const{id:a}=o;if((0,De.isJsonRpcResult)(o)){const{result:d}=o;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:d});const v=this.client.proposal.get(a);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:v});const P=v.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:P});const j=d.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:j});const x=await this.client.core.crypto.generateSharedKey(P,j);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:x});const M=await this.client.core.relayer.subscribe(x);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:M}),await this.client.core.pairing.activate({topic:n})}else(0,De.isJsonRpcError)(o)&&(await this.client.proposal.delete(a,(0,y.D6)("USER_DISCONNECTED")),this.events.emit((0,y.E0)("session_connect"),{error:o.error}))},this.onSessionSettleRequest=async(n,o)=>{const{id:a,params:d}=o;try{this.isValidSessionSettleRequest(d);const{relay:v,controller:P,expiry:j,namespaces:x,requiredNamespaces:M,optionalNamespaces:K,sessionProperties:Q,pairingTopic:ge}=o.params,ae=Cr({topic:n,relay:v,expiry:j,namespaces:x,acknowledged:!0,pairingTopic:ge,requiredNamespaces:M,optionalNamespaces:K,controller:P.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:P.publicKey,metadata:P.metadata}},Q&&{sessionProperties:Q});await this.sendResult({id:o.id,topic:n,result:!0}),this.events.emit((0,y.E0)("session_connect"),{session:ae}),this.cleanupDuplicatePairings(ae)}catch(v){await this.sendError(a,n,v),this.client.logger.error(v)}},this.onSessionSettleResponse=async(n,o)=>{const{id:a}=o;(0,De.isJsonRpcResult)(o)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit((0,y.E0)("session_approve",a),{})):(0,De.isJsonRpcError)(o)&&(await this.client.session.delete(n,(0,y.D6)("USER_DISCONNECTED")),this.events.emit((0,y.E0)("session_approve",a),{error:o.error}))},this.onSessionUpdateRequest=async(n,o)=>{const{params:a,id:d}=o;try{const v=`${n}_session_update`,P=y.O6.get(v);if(P&&this.isRequestOutOfSync(P,d)){this.client.logger.info(`Discarding out of sync request - ${d}`);return}this.isValidUpdate(Cr({topic:n},a)),await this.client.session.update(n,{namespaces:a.namespaces}),await this.sendResult({id:d,topic:n,result:!0}),this.client.events.emit("session_update",{id:d,topic:n,params:a}),y.O6.set(v,d)}catch(v){await this.sendError(d,n,v),this.client.logger.error(v)}},this.isRequestOutOfSync=(n,o)=>parseInt(o.toString().slice(0,-3))<=parseInt(n.toString().slice(0,-3)),this.onSessionUpdateResponse=(n,o)=>{const{id:a}=o;(0,De.isJsonRpcResult)(o)?this.events.emit((0,y.E0)("session_update",a),{}):(0,De.isJsonRpcError)(o)&&this.events.emit((0,y.E0)("session_update",a),{error:o.error})},this.onSessionExtendRequest=async(n,o)=>{const{id:a}=o;try{this.isValidExtend({topic:n}),await this.setExpiry(n,(0,y.gn)(Rs)),await this.sendResult({id:a,topic:n,result:!0}),this.client.events.emit("session_extend",{id:a,topic:n})}catch(d){await this.sendError(a,n,d),this.client.logger.error(d)}},this.onSessionExtendResponse=(n,o)=>{const{id:a}=o;(0,De.isJsonRpcResult)(o)?this.events.emit((0,y.E0)("session_extend",a),{}):(0,De.isJsonRpcError)(o)&&this.events.emit((0,y.E0)("session_extend",a),{error:o.error})},this.onSessionPingRequest=async(n,o)=>{const{id:a}=o;try{this.isValidPing({topic:n}),await this.sendResult({id:a,topic:n,result:!0}),this.client.events.emit("session_ping",{id:a,topic:n})}catch(d){await this.sendError(a,n,d),this.client.logger.error(d)}},this.onSessionPingResponse=(n,o)=>{const{id:a}=o;setTimeout(()=>{(0,De.isJsonRpcResult)(o)?this.events.emit((0,y.E0)("session_ping",a),{}):(0,De.isJsonRpcError)(o)&&this.events.emit((0,y.E0)("session_ping",a),{error:o.error})},500)},this.onSessionDeleteRequest=async(n,o)=>{const{id:a}=o;try{this.isValidDisconnect({topic:n,reason:o.params}),await Promise.all([new Promise(d=>{this.client.core.relayer.once(gr.publish,async()=>{d(await this.deleteSession(n))})}),this.sendResult({id:a,topic:n,result:!0})]),this.client.events.emit("session_delete",{id:a,topic:n})}catch(d){this.client.logger.error(d)}},this.onSessionRequest=async(n,o)=>{const{id:a,params:d}=o;try{this.isValidRequest(Cr({topic:n},d));const v=(0,y.rj)(JSON.stringify((0,De.formatJsonRpcRequest)("wc_sessionRequest",d,a))),P=this.client.session.get(n),j=await this.getVerifyContext(v,P.peer.metadata),x={id:a,topic:n,params:d,verifyContext:j};await this.setPendingSessionRequest(x),this.addSessionRequestToSessionRequestQueue(x),this.processSessionRequestQueue()}catch(v){await this.sendError(a,n,v),this.client.logger.error(v)}},this.onSessionRequestResponse=(n,o)=>{const{id:a}=o;(0,De.isJsonRpcResult)(o)?this.events.emit((0,y.E0)("session_request",a),{result:o.result}):(0,De.isJsonRpcError)(o)&&this.events.emit((0,y.E0)("session_request",a),{error:o.error})},this.onSessionEventRequest=async(n,o)=>{const{id:a,params:d}=o;try{const v=`${n}_session_event_${d.event.name}`,P=y.O6.get(v);if(P&&this.isRequestOutOfSync(P,a)){this.client.logger.info(`Discarding out of sync request - ${a}`);return}this.isValidEmit(Cr({topic:n},d)),this.client.events.emit("session_event",{id:a,topic:n,params:d}),y.O6.set(v,a)}catch(v){await this.sendError(a,n,v),this.client.logger.error(v)}},this.addSessionRequestToSessionRequestQueue=n=>{this.sessionRequestQueue.queue.push(n)},this.cleanupAfterResponse=n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=xi.idle,this.processSessionRequestQueue()},(0,le.toMiliseconds)(this.requestQueueDelay))},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===xi.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=xi.active,this.client.events.emit("session_request",n)}catch(o){this.client.logger.error(o)}},this.onPairingCreated=n=>{if(n.active)return;const o=this.client.proposal.getAll().find(a=>a.pairingTopic===n.topic);o&&this.onSessionProposeRequest(n.topic,(0,De.formatJsonRpcRequest)("wc_sessionPropose",{requiredNamespaces:o.requiredNamespaces,optionalNamespaces:o.optionalNamespaces,relays:o.relays,proposer:o.proposer,sessionProperties:o.sessionProperties},o.id))},this.isValidConnect=async n=>{if(!(0,y.EJ)(n)){const{message:j}=(0,y.Z7)("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(j)}const{pairingTopic:o,requiredNamespaces:a,optionalNamespaces:d,sessionProperties:v,relays:P}=n;if((0,y.o8)(o)||await this.isValidPairingTopic(o),!(0,y.PM)(P,!0)){const{message:j}=(0,y.Z7)("MISSING_OR_INVALID",`connect() relays: ${P}`);throw new Error(j)}!(0,y.o8)(a)&&(0,y.L5)(a)!==0&&this.validateNamespaces(a,"requiredNamespaces"),!(0,y.o8)(d)&&(0,y.L5)(d)!==0&&this.validateNamespaces(d,"optionalNamespaces"),(0,y.o8)(v)||this.validateSessionProps(v,"sessionProperties")},this.validateNamespaces=(n,o)=>{const a=(0,y.n)(n,"connect()",o);if(a)throw new Error(a.message)},this.isValidApprove=async n=>{if(!(0,y.EJ)(n))throw new Error((0,y.Z7)("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:o,namespaces:a,relayProtocol:d,sessionProperties:v}=n;await this.isValidProposalId(o);const P=this.client.proposal.get(o),j=(0,y.in)(a,"approve()");if(j)throw new Error(j.message);const x=(0,y.rF)(P.requiredNamespaces,a,"approve()");if(x)throw new Error(x.message);if(!(0,y.M_)(d,!0)){const{message:M}=(0,y.Z7)("MISSING_OR_INVALID",`approve() relayProtocol: ${d}`);throw new Error(M)}(0,y.o8)(v)||this.validateSessionProps(v,"sessionProperties")},this.isValidReject=async n=>{if(!(0,y.EJ)(n)){const{message:d}=(0,y.Z7)("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(d)}const{id:o,reason:a}=n;if(await this.isValidProposalId(o),!(0,y.$t)(a)){const{message:d}=(0,y.Z7)("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(a)}`);throw new Error(d)}},this.isValidSessionSettleRequest=n=>{if(!(0,y.EJ)(n)){const{message:x}=(0,y.Z7)("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(x)}const{relay:o,controller:a,namespaces:d,expiry:v}=n;if(!(0,y.Z2)(o)){const{message:x}=(0,y.Z7)("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(x)}const P=(0,y.Dd)(a,"onSessionSettleRequest()");if(P)throw new Error(P.message);const j=(0,y.in)(d,"onSessionSettleRequest()");if(j)throw new Error(j.message);if((0,y.Bw)(v)){const{message:x}=(0,y.Z7)("EXPIRED","onSessionSettleRequest()");throw new Error(x)}},this.isValidUpdate=async n=>{if(!(0,y.EJ)(n)){const{message:j}=(0,y.Z7)("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(j)}const{topic:o,namespaces:a}=n;await this.isValidSessionTopic(o);const d=this.client.session.get(o),v=(0,y.in)(a,"update()");if(v)throw new Error(v.message);const P=(0,y.rF)(d.requiredNamespaces,a,"update()");if(P)throw new Error(P.message)},this.isValidExtend=async n=>{if(!(0,y.EJ)(n)){const{message:a}=(0,y.Z7)("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(a)}const{topic:o}=n;await this.isValidSessionTopic(o)},this.isValidRequest=async n=>{if(!(0,y.EJ)(n)){const{message:j}=(0,y.Z7)("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(j)}const{topic:o,request:a,chainId:d,expiry:v}=n;await this.isValidSessionTopic(o);const{namespaces:P}=this.client.session.get(o);if(!(0,y.p8)(P,d)){const{message:j}=(0,y.Z7)("MISSING_OR_INVALID",`request() chainId: ${d}`);throw new Error(j)}if(!(0,y.hH)(a)){const{message:j}=(0,y.Z7)("MISSING_OR_INVALID",`request() ${JSON.stringify(a)}`);throw new Error(j)}if(!(0,y.al)(P,d,a.method)){const{message:j}=(0,y.Z7)("MISSING_OR_INVALID",`request() method: ${a.method}`);throw new Error(j)}if(v&&!(0,y.ON)(v,aa)){const{message:j}=(0,y.Z7)("MISSING_OR_INVALID",`request() expiry: ${v}. Expiry must be a number (in seconds) between ${aa.min} and ${aa.max}`);throw new Error(j)}},this.isValidRespond=async n=>{var o;if(!(0,y.EJ)(n)){const{message:v}=(0,y.Z7)("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(v)}const{topic:a,response:d}=n;try{await this.isValidSessionTopic(a)}catch(v){throw(o=n==null?void 0:n.response)!=null&&o.id&&this.cleanupAfterResponse(n),v}if(!(0,y.JT)(d)){const{message:v}=(0,y.Z7)("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(d)}`);throw new Error(v)}},this.isValidPing=async n=>{if(!(0,y.EJ)(n)){const{message:a}=(0,y.Z7)("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(a)}const{topic:o}=n;await this.isValidSessionOrPairingTopic(o)},this.isValidEmit=async n=>{if(!(0,y.EJ)(n)){const{message:P}=(0,y.Z7)("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(P)}const{topic:o,event:a,chainId:d}=n;await this.isValidSessionTopic(o);const{namespaces:v}=this.client.session.get(o);if(!(0,y.p8)(v,d)){const{message:P}=(0,y.Z7)("MISSING_OR_INVALID",`emit() chainId: ${d}`);throw new Error(P)}if(!(0,y.nf)(a)){const{message:P}=(0,y.Z7)("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(a)}`);throw new Error(P)}if(!(0,y.sI)(v,d,a.name)){const{message:P}=(0,y.Z7)("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(a)}`);throw new Error(P)}},this.isValidDisconnect=async n=>{if(!(0,y.EJ)(n)){const{message:a}=(0,y.Z7)("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(a)}const{topic:o}=n;await this.isValidSessionOrPairingTopic(o)},this.getVerifyContext=async(n,o)=>{const a={verified:{verifyUrl:o.verifyUrl||wn,validation:"UNKNOWN",origin:o.url||""}};try{const d=await this.client.core.verify.resolve({attestationId:n,verifyUrl:o.verifyUrl});d&&(a.verified.origin=d.origin,a.verified.isScam=d.isScam,a.verified.validation=d.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(d){this.client.logger.info(d)}return this.client.logger.info(`Verify context: ${JSON.stringify(a)}`),a},this.validateSessionProps=(n,o)=>{Object.values(n).forEach(a=>{if(!(0,y.M_)(a,!1)){const{message:d}=(0,y.Z7)("MISSING_OR_INVALID",`${o} must be in Record<string, string> format. Received: ${JSON.stringify(a)}`);throw new Error(d)}})}}async isInitialized(){if(!this.initialized){const{message:r}=(0,y.Z7)("NOT_INITIALIZED",this.name);throw new Error(r)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(gr.message,async r=>{const{topic:n,message:o}=r;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(o)))return;const a=await this.client.core.crypto.decode(n,o);try{(0,De.isJsonRpcRequest)(a)?(this.client.core.history.set(n,a),this.onRelayEventRequest({topic:n,payload:a})):(0,De.isJsonRpcResponse)(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a}),this.client.core.history.delete(n,a.id)):this.onRelayEventUnknownPayload({topic:n,payload:a})}catch(d){this.client.logger.error(d)}})}registerExpirerEvents(){this.client.core.expirer.on(Kr.expired,async r=>{const{topic:n,id:o}=(0,y.iP)(r.target);if(o&&this.client.pendingRequest.keys.includes(o))return await this.deletePendingSessionRequest(o,(0,y.Z7)("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession(n,!0),this.client.events.emit("session_expire",{topic:n})):o&&(await this.deleteProposal(o,!0),this.client.events.emit("proposal_expire",{id:o}))})}registerPairingEvents(){this.client.core.pairing.events.on(Un.create,r=>this.onPairingCreated(r))}isValidPairingTopic(r){if(!(0,y.M_)(r,!1)){const{message:n}=(0,y.Z7)("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(r)){const{message:n}=(0,y.Z7)("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(n)}if((0,y.Bw)(this.client.core.pairing.pairings.get(r).expiry)){const{message:n}=(0,y.Z7)("EXPIRED",`pairing topic: ${r}`);throw new Error(n)}}async isValidSessionTopic(r){if(!(0,y.M_)(r,!1)){const{message:n}=(0,y.Z7)("MISSING_OR_INVALID",`session topic should be a string: ${r}`);throw new Error(n)}if(!this.client.session.keys.includes(r)){const{message:n}=(0,y.Z7)("NO_MATCHING_KEY",`session topic doesn't exist: ${r}`);throw new Error(n)}if((0,y.Bw)(this.client.session.get(r).expiry)){await this.deleteSession(r);const{message:n}=(0,y.Z7)("EXPIRED",`session topic: ${r}`);throw new Error(n)}}async isValidSessionOrPairingTopic(r){if(this.client.session.keys.includes(r))await this.isValidSessionTopic(r);else if(this.client.core.pairing.pairings.keys.includes(r))this.isValidPairingTopic(r);else if((0,y.M_)(r,!1)){const{message:n}=(0,y.Z7)("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${r}`);throw new Error(n)}else{const{message:n}=(0,y.Z7)("MISSING_OR_INVALID",`session or pairing topic should be a string: ${r}`);throw new Error(n)}}async isValidProposalId(r){if(!(0,y.Q0)(r)){const{message:n}=(0,y.Z7)("MISSING_OR_INVALID",`proposal id should be a number: ${r}`);throw new Error(n)}if(!this.client.proposal.keys.includes(r)){const{message:n}=(0,y.Z7)("NO_MATCHING_KEY",`proposal id doesn't exist: ${r}`);throw new Error(n)}if((0,y.Bw)(this.client.proposal.get(r).expiry)){await this.deleteProposal(r);const{message:n}=(0,y.Z7)("EXPIRED",`proposal id: ${r}`);throw new Error(n)}}}class vp extends Cs{constructor(r,n){super(r,n,op,sa),this.core=r,this.logger=n}}class mp extends Cs{constructor(r,n){super(r,n,ap,sa),this.core=r,this.logger=n}}class _p extends Cs{constructor(r,n){super(r,n,up,sa,o=>o.id),this.core=r,this.logger=n}}class ca extends Vt{constructor(r){super(r),this.protocol=_u,this.version=wu,this.name=oa.name,this.events=new se.EventEmitter,this.on=(o,a)=>this.events.on(o,a),this.once=(o,a)=>this.events.once(o,a),this.off=(o,a)=>this.events.off(o,a),this.removeListener=(o,a)=>this.events.removeListener(o,a),this.removeAllListeners=o=>this.events.removeAllListeners(o),this.connect=async o=>{try{return await this.engine.connect(o)}catch(a){throw this.logger.error(a.message),a}},this.pair=async o=>{try{return await this.engine.pair(o)}catch(a){throw this.logger.error(a.message),a}},this.approve=async o=>{try{return await this.engine.approve(o)}catch(a){throw this.logger.error(a.message),a}},this.reject=async o=>{try{return await this.engine.reject(o)}catch(a){throw this.logger.error(a.message),a}},this.update=async o=>{try{return await this.engine.update(o)}catch(a){throw this.logger.error(a.message),a}},this.extend=async o=>{try{return await this.engine.extend(o)}catch(a){throw this.logger.error(a.message),a}},this.request=async o=>{try{return await this.engine.request(o)}catch(a){throw this.logger.error(a.message),a}},this.respond=async o=>{try{return await this.engine.respond(o)}catch(a){throw this.logger.error(a.message),a}},this.ping=async o=>{try{return await this.engine.ping(o)}catch(a){throw this.logger.error(a.message),a}},this.emit=async o=>{try{return await this.engine.emit(o)}catch(a){throw this.logger.error(a.message),a}},this.disconnect=async o=>{try{return await this.engine.disconnect(o)}catch(a){throw this.logger.error(a.message),a}},this.find=o=>{try{return this.engine.find(o)}catch(a){throw this.logger.error(a.message),a}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(o){throw this.logger.error(o.message),o}},this.name=(r==null?void 0:r.name)||oa.name,this.metadata=(r==null?void 0:r.metadata)||(0,y.D)();const n=typeof(r==null?void 0:r.logger)<"u"&&typeof(r==null?void 0:r.logger)!="string"?r.logger:(0,Ee.pino)((0,Ee.getDefaultLoggerOptions)({level:(r==null?void 0:r.logger)||oa.logger}));this.core=(r==null?void 0:r.core)||new sp(r),this.logger=(0,Ee.generateChildLogger)(n,this.name),this.session=new mp(this.core,this.logger),this.proposal=new vp(this.core,this.logger),this.pendingRequest=new _p(this.core,this.logger),this.engine=new yp(this)}static async init(r){const n=new ca(r);return await n.initialize(),n}get context(){return(0,Ee.getLoggerContext)(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(r){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(r.message),r}}}const pb=null,gb=null;var qi=Y(96641);const Su="error",wp="wss://relay.walletconnect.com",bp="wc",Ep="universal_provider",Ou=`${bp}@2:${Ep}:`,Ip="https://rpc.walletconnect.com/v1/",Pi={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var kn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Y.g<"u"?Y.g:typeof self<"u"?self:{},ua={exports:{}};(function(l,r){(function(){var n,o="4.17.21",a=200,d="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",v="Expected a function",P="Invalid `variable` option passed into `_.template`",j="__lodash_hash_undefined__",x=500,M="__lodash_placeholder__",K=1,Q=2,ge=4,ae=1,He=2,nt=1,Ve=2,nr=4,We=8,Je=16,xt=32,_r=64,$t=128,wr=256,Ui=512,ag=30,cg="...",ug=800,hg=16,zu=1,lg=2,fg=3,tn=1/0,Hi=9007199254740991,dg=17976931348623157e292,Ns=0/0,fi=4294967295,pg=fi-1,gg=fi>>>1,yg=[["ary",$t],["bind",nt],["bindKey",Ve],["curry",We],["curryRight",Je],["flip",Ui],["partial",xt],["partialRight",_r],["rearg",wr]],bn="[object Arguments]",Fs="[object Array]",vg="[object AsyncFunction]",Gn="[object Boolean]",Wn="[object Date]",mg="[object DOMException]",Ls="[object Error]",js="[object Function]",qu="[object GeneratorFunction]",ri="[object Map]",Jn="[object Number]",_g="[object Null]",Si="[object Object]",$u="[object Promise]",wg="[object Proxy]",Zn="[object RegExp]",ii="[object Set]",Qn="[object String]",Ms="[object Symbol]",bg="[object Undefined]",Yn="[object WeakMap]",Eg="[object WeakSet]",Xn="[object ArrayBuffer]",En="[object DataView]",ma="[object Float32Array]",_a="[object Float64Array]",wa="[object Int8Array]",ba="[object Int16Array]",Ea="[object Int32Array]",Ia="[object Uint8Array]",xa="[object Uint8ClampedArray]",Pa="[object Uint16Array]",Sa="[object Uint32Array]",Ig=/\b__p \+= '';/g,xg=/\b(__p \+=) '' \+/g,Pg=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Uu=/&(?:amp|lt|gt|quot|#39);/g,Hu=/[&<>"']/g,Sg=RegExp(Uu.source),Og=RegExp(Hu.source),Cg=/<%-([\s\S]+?)%>/g,Rg=/<%([\s\S]+?)%>/g,Ku=/<%=([\s\S]+?)%>/g,Ag=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Tg=/^\w*$/,Dg=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Oa=/[\\^$.*+?()[\]{}|]/g,Ng=RegExp(Oa.source),Ca=/^\s+/,Fg=/\s/,Lg=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,jg=/\{\n\/\* \[wrapped with (.+)\] \*/,Mg=/,? & /,zg=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,qg=/[()=,{}\[\]\/\s]/,$g=/\\(\\)?/g,Ug=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Bu=/\w*$/,Hg=/^[-+]0x[0-9a-f]+$/i,Kg=/^0b[01]+$/i,Bg=/^\[object .+?Constructor\]$/,kg=/^0o[0-7]+$/i,Vg=/^(?:0|[1-9]\d*)$/,Gg=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,zs=/($^)/,Wg=/['\n\r\u2028\u2029\\]/g,qs="\\ud800-\\udfff",Jg="\\u0300-\\u036f",Zg="\\ufe20-\\ufe2f",Qg="\\u20d0-\\u20ff",ku=Jg+Zg+Qg,Vu="\\u2700-\\u27bf",Gu="a-z\\xdf-\\xf6\\xf8-\\xff",Yg="\\xac\\xb1\\xd7\\xf7",Xg="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",e0="\\u2000-\\u206f",t0=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Wu="A-Z\\xc0-\\xd6\\xd8-\\xde",Ju="\\ufe0e\\ufe0f",Zu=Yg+Xg+e0+t0,Ra="['\u2019]",r0="["+qs+"]",Qu="["+Zu+"]",$s="["+ku+"]",Yu="\\d+",i0="["+Vu+"]",Xu="["+Gu+"]",eh="[^"+qs+Zu+Yu+Vu+Gu+Wu+"]",Aa="\\ud83c[\\udffb-\\udfff]",n0="(?:"+$s+"|"+Aa+")",th="[^"+qs+"]",Ta="(?:\\ud83c[\\udde6-\\uddff]){2}",Da="[\\ud800-\\udbff][\\udc00-\\udfff]",In="["+Wu+"]",rh="\\u200d",ih="(?:"+Xu+"|"+eh+")",s0="(?:"+In+"|"+eh+")",nh="(?:"+Ra+"(?:d|ll|m|re|s|t|ve))?",sh="(?:"+Ra+"(?:D|LL|M|RE|S|T|VE))?",oh=n0+"?",ah="["+Ju+"]?",o0="(?:"+rh+"(?:"+[th,Ta,Da].join("|")+")"+ah+oh+")*",a0="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",c0="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ch=ah+oh+o0,u0="(?:"+[i0,Ta,Da].join("|")+")"+ch,h0="(?:"+[th+$s+"?",$s,Ta,Da,r0].join("|")+")",l0=RegExp(Ra,"g"),f0=RegExp($s,"g"),Na=RegExp(Aa+"(?="+Aa+")|"+h0+ch,"g"),d0=RegExp([In+"?"+Xu+"+"+nh+"(?="+[Qu,In,"$"].join("|")+")",s0+"+"+sh+"(?="+[Qu,In+ih,"$"].join("|")+")",In+"?"+ih+"+"+nh,In+"+"+sh,c0,a0,Yu,u0].join("|"),"g"),p0=RegExp("["+rh+qs+ku+Ju+"]"),g0=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,y0=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],v0=-1,mt={};mt[ma]=mt[_a]=mt[wa]=mt[ba]=mt[Ea]=mt[Ia]=mt[xa]=mt[Pa]=mt[Sa]=!0,mt[bn]=mt[Fs]=mt[Xn]=mt[Gn]=mt[En]=mt[Wn]=mt[Ls]=mt[js]=mt[ri]=mt[Jn]=mt[Si]=mt[Zn]=mt[ii]=mt[Qn]=mt[Yn]=!1;var pt={};pt[bn]=pt[Fs]=pt[Xn]=pt[En]=pt[Gn]=pt[Wn]=pt[ma]=pt[_a]=pt[wa]=pt[ba]=pt[Ea]=pt[ri]=pt[Jn]=pt[Si]=pt[Zn]=pt[ii]=pt[Qn]=pt[Ms]=pt[Ia]=pt[xa]=pt[Pa]=pt[Sa]=!0,pt[Ls]=pt[js]=pt[Yn]=!1;var m0={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},_0={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},w0={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},b0={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},E0=parseFloat,I0=parseInt,uh=typeof kn=="object"&&kn&&kn.Object===Object&&kn,x0=typeof self=="object"&&self&&self.Object===Object&&self,dr=uh||x0||Function("return this")(),Fa=r&&!r.nodeType&&r,rn=Fa&&!0&&l&&!l.nodeType&&l,hh=rn&&rn.exports===Fa,La=hh&&uh.process,Br=function(){try{var T=rn&&rn.require&&rn.require("util").types;return T||La&&La.binding&&La.binding("util")}catch{}}(),lh=Br&&Br.isArrayBuffer,fh=Br&&Br.isDate,dh=Br&&Br.isMap,ph=Br&&Br.isRegExp,gh=Br&&Br.isSet,yh=Br&&Br.isTypedArray;function Lr(T,$,L){switch(L.length){case 0:return T.call($);case 1:return T.call($,L[0]);case 2:return T.call($,L[0],L[1]);case 3:return T.call($,L[0],L[1],L[2])}return T.apply($,L)}function P0(T,$,L,de){for(var Ne=-1,Ze=T==null?0:T.length;++Ne<Ze;){var sr=T[Ne];$(de,sr,L(sr),T)}return de}function kr(T,$){for(var L=-1,de=T==null?0:T.length;++L<de&&$(T[L],L,T)!==!1;);return T}function S0(T,$){for(var L=T==null?0:T.length;L--&&$(T[L],L,T)!==!1;);return T}function vh(T,$){for(var L=-1,de=T==null?0:T.length;++L<de;)if(!$(T[L],L,T))return!1;return!0}function Ki(T,$){for(var L=-1,de=T==null?0:T.length,Ne=0,Ze=[];++L<de;){var sr=T[L];$(sr,L,T)&&(Ze[Ne++]=sr)}return Ze}function Us(T,$){var L=T==null?0:T.length;return!!L&&xn(T,$,0)>-1}function ja(T,$,L){for(var de=-1,Ne=T==null?0:T.length;++de<Ne;)if(L($,T[de]))return!0;return!1}function Pt(T,$){for(var L=-1,de=T==null?0:T.length,Ne=Array(de);++L<de;)Ne[L]=$(T[L],L,T);return Ne}function Bi(T,$){for(var L=-1,de=$.length,Ne=T.length;++L<de;)T[Ne+L]=$[L];return T}function Ma(T,$,L,de){var Ne=-1,Ze=T==null?0:T.length;for(de&&Ze&&(L=T[++Ne]);++Ne<Ze;)L=$(L,T[Ne],Ne,T);return L}function O0(T,$,L,de){var Ne=T==null?0:T.length;for(de&&Ne&&(L=T[--Ne]);Ne--;)L=$(L,T[Ne],Ne,T);return L}function za(T,$){for(var L=-1,de=T==null?0:T.length;++L<de;)if($(T[L],L,T))return!0;return!1}var C0=qa("length");function R0(T){return T.split("")}function A0(T){return T.match(zg)||[]}function mh(T,$,L){var de;return L(T,function(Ne,Ze,sr){if($(Ne,Ze,sr))return de=Ze,!1}),de}function Hs(T,$,L,de){for(var Ne=T.length,Ze=L+(de?1:-1);de?Ze--:++Ze<Ne;)if($(T[Ze],Ze,T))return Ze;return-1}function xn(T,$,L){return $===$?H0(T,$,L):Hs(T,_h,L)}function T0(T,$,L,de){for(var Ne=L-1,Ze=T.length;++Ne<Ze;)if(de(T[Ne],$))return Ne;return-1}function _h(T){return T!==T}function wh(T,$){var L=T==null?0:T.length;return L?Ua(T,$)/L:Ns}function qa(T){return function($){return $==null?n:$[T]}}function $a(T){return function($){return T==null?n:T[$]}}function bh(T,$,L,de,Ne){return Ne(T,function(Ze,sr,lt){L=de?(de=!1,Ze):$(L,Ze,sr,lt)}),L}function D0(T,$){var L=T.length;for(T.sort($);L--;)T[L]=T[L].value;return T}function Ua(T,$){for(var L,de=-1,Ne=T.length;++de<Ne;){var Ze=$(T[de]);Ze!==n&&(L=L===n?Ze:L+Ze)}return L}function Ha(T,$){for(var L=-1,de=Array(T);++L<T;)de[L]=$(L);return de}function N0(T,$){return Pt($,function(L){return[L,T[L]]})}function Eh(T){return T&&T.slice(0,Sh(T)+1).replace(Ca,"")}function jr(T){return function($){return T($)}}function Ka(T,$){return Pt($,function(L){return T[L]})}function es(T,$){return T.has($)}function Ih(T,$){for(var L=-1,de=T.length;++L<de&&xn($,T[L],0)>-1;);return L}function xh(T,$){for(var L=T.length;L--&&xn($,T[L],0)>-1;);return L}function F0(T,$){for(var L=T.length,de=0;L--;)T[L]===$&&++de;return de}var L0=$a(m0),j0=$a(_0);function M0(T){return"\\"+b0[T]}function z0(T,$){return T==null?n:T[$]}function Pn(T){return p0.test(T)}function q0(T){return g0.test(T)}function $0(T){for(var $,L=[];!($=T.next()).done;)L.push($.value);return L}function Ba(T){var $=-1,L=Array(T.size);return T.forEach(function(de,Ne){L[++$]=[Ne,de]}),L}function Ph(T,$){return function(L){return T($(L))}}function ki(T,$){for(var L=-1,de=T.length,Ne=0,Ze=[];++L<de;){var sr=T[L];(sr===$||sr===M)&&(T[L]=M,Ze[Ne++]=L)}return Ze}function Ks(T){var $=-1,L=Array(T.size);return T.forEach(function(de){L[++$]=de}),L}function U0(T){var $=-1,L=Array(T.size);return T.forEach(function(de){L[++$]=[de,de]}),L}function H0(T,$,L){for(var de=L-1,Ne=T.length;++de<Ne;)if(T[de]===$)return de;return-1}function K0(T,$,L){for(var de=L+1;de--;)if(T[de]===$)return de;return de}function Sn(T){return Pn(T)?k0(T):C0(T)}function ni(T){return Pn(T)?V0(T):R0(T)}function Sh(T){for(var $=T.length;$--&&Fg.test(T.charAt($)););return $}var B0=$a(w0);function k0(T){for(var $=Na.lastIndex=0;Na.test(T);)++$;return $}function V0(T){return T.match(Na)||[]}function G0(T){return T.match(d0)||[]}var W0=function T($){$=$==null?dr:On.defaults(dr.Object(),$,On.pick(dr,y0));var L=$.Array,de=$.Date,Ne=$.Error,Ze=$.Function,sr=$.Math,lt=$.Object,ka=$.RegExp,J0=$.String,Vr=$.TypeError,Bs=L.prototype,Z0=Ze.prototype,Cn=lt.prototype,ks=$["__core-js_shared__"],Vs=Z0.toString,st=Cn.hasOwnProperty,Q0=0,Oh=function(){var e=/[^.]+$/.exec(ks&&ks.keys&&ks.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Gs=Cn.toString,Y0=Vs.call(lt),X0=dr._,ey=ka("^"+Vs.call(st).replace(Oa,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ws=hh?$.Buffer:n,Vi=$.Symbol,Js=$.Uint8Array,Ch=Ws?Ws.allocUnsafe:n,Zs=Ph(lt.getPrototypeOf,lt),Rh=lt.create,Ah=Cn.propertyIsEnumerable,Qs=Bs.splice,Th=Vi?Vi.isConcatSpreadable:n,ts=Vi?Vi.iterator:n,nn=Vi?Vi.toStringTag:n,Ys=function(){try{var e=un(lt,"defineProperty");return e({},"",{}),e}catch{}}(),ty=$.clearTimeout!==dr.clearTimeout&&$.clearTimeout,ry=de&&de.now!==dr.Date.now&&de.now,iy=$.setTimeout!==dr.setTimeout&&$.setTimeout,Xs=sr.ceil,eo=sr.floor,Va=lt.getOwnPropertySymbols,ny=Ws?Ws.isBuffer:n,Dh=$.isFinite,sy=Bs.join,oy=Ph(lt.keys,lt),or=sr.max,yr=sr.min,ay=de.now,cy=$.parseInt,Nh=sr.random,uy=Bs.reverse,Ga=un($,"DataView"),rs=un($,"Map"),Wa=un($,"Promise"),Rn=un($,"Set"),is=un($,"WeakMap"),ns=un(lt,"create"),to=is&&new is,An={},hy=hn(Ga),ly=hn(rs),fy=hn(Wa),dy=hn(Rn),py=hn(is),ro=Vi?Vi.prototype:n,ss=ro?ro.valueOf:n,Fh=ro?ro.toString:n;function p(e){if(Ft(e)&&!je(e)&&!(e instanceof Be)){if(e instanceof Gr)return e;if(st.call(e,"__wrapped__"))return Ll(e)}return new Gr(e)}var Tn=function(){function e(){}return function(t){if(!Ct(t))return{};if(Rh)return Rh(t);e.prototype=t;var s=new e;return e.prototype=n,s}}();function io(){}function Gr(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=n}p.templateSettings={escape:Cg,evaluate:Rg,interpolate:Ku,variable:"",imports:{_:p}},p.prototype=io.prototype,p.prototype.constructor=p,Gr.prototype=Tn(io.prototype),Gr.prototype.constructor=Gr;function Be(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=fi,this.__views__=[]}function gy(){var e=new Be(this.__wrapped__);return e.__actions__=Rr(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Rr(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Rr(this.__views__),e}function yy(){if(this.__filtered__){var e=new Be(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function vy(){var e=this.__wrapped__.value(),t=this.__dir__,s=je(e),u=t<0,f=s?e.length:0,g=Rv(0,f,this.__views__),w=g.start,I=g.end,D=I-w,B=u?I:w-1,k=this.__iteratees__,ee=k.length,he=0,ye=yr(D,this.__takeCount__);if(!s||!u&&f==D&&ye==D)return nl(e,this.__actions__);var Pe=[];e:for(;D--&&he<ye;){B+=t;for(var ze=-1,Se=e[B];++ze<ee;){var Ke=k[ze],ke=Ke.iteratee,qr=Ke.type,Ir=ke(Se);if(qr==lg)Se=Ir;else if(!Ir){if(qr==zu)continue e;break e}}Pe[he++]=Se}return Pe}Be.prototype=Tn(io.prototype),Be.prototype.constructor=Be;function sn(e){var t=-1,s=e==null?0:e.length;for(this.clear();++t<s;){var u=e[t];this.set(u[0],u[1])}}function my(){this.__data__=ns?ns(null):{},this.size=0}function _y(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function wy(e){var t=this.__data__;if(ns){var s=t[e];return s===j?n:s}return st.call(t,e)?t[e]:n}function by(e){var t=this.__data__;return ns?t[e]!==n:st.call(t,e)}function Ey(e,t){var s=this.__data__;return this.size+=this.has(e)?0:1,s[e]=ns&&t===n?j:t,this}sn.prototype.clear=my,sn.prototype.delete=_y,sn.prototype.get=wy,sn.prototype.has=by,sn.prototype.set=Ey;function Oi(e){var t=-1,s=e==null?0:e.length;for(this.clear();++t<s;){var u=e[t];this.set(u[0],u[1])}}function Iy(){this.__data__=[],this.size=0}function xy(e){var t=this.__data__,s=no(t,e);if(s<0)return!1;var u=t.length-1;return s==u?t.pop():Qs.call(t,s,1),--this.size,!0}function Py(e){var t=this.__data__,s=no(t,e);return s<0?n:t[s][1]}function Sy(e){return no(this.__data__,e)>-1}function Oy(e,t){var s=this.__data__,u=no(s,e);return u<0?(++this.size,s.push([e,t])):s[u][1]=t,this}Oi.prototype.clear=Iy,Oi.prototype.delete=xy,Oi.prototype.get=Py,Oi.prototype.has=Sy,Oi.prototype.set=Oy;function Ci(e){var t=-1,s=e==null?0:e.length;for(this.clear();++t<s;){var u=e[t];this.set(u[0],u[1])}}function Cy(){this.size=0,this.__data__={hash:new sn,map:new(rs||Oi),string:new sn}}function Ry(e){var t=vo(this,e).delete(e);return this.size-=t?1:0,t}function Ay(e){return vo(this,e).get(e)}function Ty(e){return vo(this,e).has(e)}function Dy(e,t){var s=vo(this,e),u=s.size;return s.set(e,t),this.size+=s.size==u?0:1,this}Ci.prototype.clear=Cy,Ci.prototype.delete=Ry,Ci.prototype.get=Ay,Ci.prototype.has=Ty,Ci.prototype.set=Dy;function on(e){var t=-1,s=e==null?0:e.length;for(this.__data__=new Ci;++t<s;)this.add(e[t])}function Ny(e){return this.__data__.set(e,j),this}function Fy(e){return this.__data__.has(e)}on.prototype.add=on.prototype.push=Ny,on.prototype.has=Fy;function si(e){var t=this.__data__=new Oi(e);this.size=t.size}function Ly(){this.__data__=new Oi,this.size=0}function jy(e){var t=this.__data__,s=t.delete(e);return this.size=t.size,s}function My(e){return this.__data__.get(e)}function zy(e){return this.__data__.has(e)}function qy(e,t){var s=this.__data__;if(s instanceof Oi){var u=s.__data__;if(!rs||u.length<a-1)return u.push([e,t]),this.size=++s.size,this;s=this.__data__=new Ci(u)}return s.set(e,t),this.size=s.size,this}si.prototype.clear=Ly,si.prototype.delete=jy,si.prototype.get=My,si.prototype.has=zy,si.prototype.set=qy;function Lh(e,t){var s=je(e),u=!s&&ln(e),f=!s&&!u&&Qi(e),g=!s&&!u&&!f&&Ln(e),w=s||u||f||g,I=w?Ha(e.length,J0):[],D=I.length;for(var B in e)(t||st.call(e,B))&&!(w&&(B=="length"||f&&(B=="offset"||B=="parent")||g&&(B=="buffer"||B=="byteLength"||B=="byteOffset")||Di(B,D)))&&I.push(B);return I}function jh(e){var t=e.length;return t?e[sc(0,t-1)]:n}function $y(e,t){return mo(Rr(e),an(t,0,e.length))}function Uy(e){return mo(Rr(e))}function Ja(e,t,s){(s!==n&&!oi(e[t],s)||s===n&&!(t in e))&&Ri(e,t,s)}function os(e,t,s){var u=e[t];(!(st.call(e,t)&&oi(u,s))||s===n&&!(t in e))&&Ri(e,t,s)}function no(e,t){for(var s=e.length;s--;)if(oi(e[s][0],t))return s;return-1}function Hy(e,t,s,u){return Gi(e,function(f,g,w){t(u,f,s(f),w)}),u}function Mh(e,t){return e&&pi(t,lr(t),e)}function Ky(e,t){return e&&pi(t,Tr(t),e)}function Ri(e,t,s){t=="__proto__"&&Ys?Ys(e,t,{configurable:!0,enumerable:!0,value:s,writable:!0}):e[t]=s}function Za(e,t){for(var s=-1,u=t.length,f=L(u),g=e==null;++s<u;)f[s]=g?n:Ac(e,t[s]);return f}function an(e,t,s){return e===e&&(s!==n&&(e=e<=s?e:s),t!==n&&(e=e>=t?e:t)),e}function Wr(e,t,s,u,f,g){var w,I=t&K,D=t&Q,B=t&ge;if(s&&(w=f?s(e,u,f,g):s(e)),w!==n)return w;if(!Ct(e))return e;var k=je(e);if(k){if(w=Tv(e),!I)return Rr(e,w)}else{var ee=vr(e),he=ee==js||ee==qu;if(Qi(e))return al(e,I);if(ee==Si||ee==bn||he&&!f){if(w=D||he?{}:Sl(e),!I)return D?wv(e,Ky(w,e)):_v(e,Mh(w,e))}else{if(!pt[ee])return f?e:{};w=Dv(e,ee,I)}}g||(g=new si);var ye=g.get(e);if(ye)return ye;g.set(e,w),tf(e)?e.forEach(function(Se){w.add(Wr(Se,t,s,Se,e,g))}):Xl(e)&&e.forEach(function(Se,Ke){w.set(Ke,Wr(Se,t,s,Ke,e,g))});var Pe=B?D?yc:gc:D?Tr:lr,ze=k?n:Pe(e);return kr(ze||e,function(Se,Ke){ze&&(Ke=Se,Se=e[Ke]),os(w,Ke,Wr(Se,t,s,Ke,e,g))}),w}function By(e){var t=lr(e);return function(s){return zh(s,e,t)}}function zh(e,t,s){var u=s.length;if(e==null)return!u;for(e=lt(e);u--;){var f=s[u],g=t[f],w=e[f];if(w===n&&!(f in e)||!g(w))return!1}return!0}function qh(e,t,s){if(typeof e!="function")throw new Vr(v);return ds(function(){e.apply(n,s)},t)}function as(e,t,s,u){var f=-1,g=Us,w=!0,I=e.length,D=[],B=t.length;if(!I)return D;s&&(t=Pt(t,jr(s))),u?(g=ja,w=!1):t.length>=a&&(g=es,w=!1,t=new on(t));e:for(;++f<I;){var k=e[f],ee=s==null?k:s(k);if(k=u||k!==0?k:0,w&&ee===ee){for(var he=B;he--;)if(t[he]===ee)continue e;D.push(k)}else g(t,ee,u)||D.push(k)}return D}var Gi=fl(di),$h=fl(Ya,!0);function ky(e,t){var s=!0;return Gi(e,function(u,f,g){return s=!!t(u,f,g),s}),s}function so(e,t,s){for(var u=-1,f=e.length;++u<f;){var g=e[u],w=t(g);if(w!=null&&(I===n?w===w&&!zr(w):s(w,I)))var I=w,D=g}return D}function Vy(e,t,s,u){var f=e.length;for(s=Me(s),s<0&&(s=-s>f?0:f+s),u=u===n||u>f?f:Me(u),u<0&&(u+=f),u=s>u?0:nf(u);s<u;)e[s++]=t;return e}function Uh(e,t){var s=[];return Gi(e,function(u,f,g){t(u,f,g)&&s.push(u)}),s}function pr(e,t,s,u,f){var g=-1,w=e.length;for(s||(s=Fv),f||(f=[]);++g<w;){var I=e[g];t>0&&s(I)?t>1?pr(I,t-1,s,u,f):Bi(f,I):u||(f[f.length]=I)}return f}var Qa=dl(),Hh=dl(!0);function di(e,t){return e&&Qa(e,t,lr)}function Ya(e,t){return e&&Hh(e,t,lr)}function oo(e,t){return Ki(t,function(s){return Ni(e[s])})}function cn(e,t){t=Ji(t,e);for(var s=0,u=t.length;e!=null&&s<u;)e=e[gi(t[s++])];return s&&s==u?e:n}function Kh(e,t,s){var u=t(e);return je(e)?u:Bi(u,s(e))}function br(e){return e==null?e===n?bg:_g:nn&&nn in lt(e)?Cv(e):Uv(e)}function Xa(e,t){return e>t}function Gy(e,t){return e!=null&&st.call(e,t)}function Wy(e,t){return e!=null&&t in lt(e)}function Jy(e,t,s){return e>=yr(t,s)&&e<or(t,s)}function ec(e,t,s){for(var u=s?ja:Us,f=e[0].length,g=e.length,w=g,I=L(g),D=1/0,B=[];w--;){var k=e[w];w&&t&&(k=Pt(k,jr(t))),D=yr(k.length,D),I[w]=!s&&(t||f>=120&&k.length>=120)?new on(w&&k):n}k=e[0];var ee=-1,he=I[0];e:for(;++ee<f&&B.length<D;){var ye=k[ee],Pe=t?t(ye):ye;if(ye=s||ye!==0?ye:0,!(he?es(he,Pe):u(B,Pe,s))){for(w=g;--w;){var ze=I[w];if(!(ze?es(ze,Pe):u(e[w],Pe,s)))continue e}he&&he.push(Pe),B.push(ye)}}return B}function Zy(e,t,s,u){return di(e,function(f,g,w){t(u,s(f),g,w)}),u}function cs(e,t,s){t=Ji(t,e),e=Al(e,t);var u=e==null?e:e[gi(Zr(t))];return u==null?n:Lr(u,e,s)}function Bh(e){return Ft(e)&&br(e)==bn}function Qy(e){return Ft(e)&&br(e)==Xn}function Yy(e){return Ft(e)&&br(e)==Wn}function us(e,t,s,u,f){return e===t?!0:e==null||t==null||!Ft(e)&&!Ft(t)?e!==e&&t!==t:Xy(e,t,s,u,us,f)}function Xy(e,t,s,u,f,g){var w=je(e),I=je(t),D=w?Fs:vr(e),B=I?Fs:vr(t);D=D==bn?Si:D,B=B==bn?Si:B;var k=D==Si,ee=B==Si,he=D==B;if(he&&Qi(e)){if(!Qi(t))return!1;w=!0,k=!1}if(he&&!k)return g||(g=new si),w||Ln(e)?Il(e,t,s,u,f,g):Sv(e,t,D,s,u,f,g);if(!(s&ae)){var ye=k&&st.call(e,"__wrapped__"),Pe=ee&&st.call(t,"__wrapped__");if(ye||Pe){var ze=ye?e.value():e,Se=Pe?t.value():t;return g||(g=new si),f(ze,Se,s,u,g)}}return he?(g||(g=new si),Ov(e,t,s,u,f,g)):!1}function ev(e){return Ft(e)&&vr(e)==ri}function tc(e,t,s,u){var f=s.length,g=f,w=!u;if(e==null)return!g;for(e=lt(e);f--;){var I=s[f];if(w&&I[2]?I[1]!==e[I[0]]:!(I[0]in e))return!1}for(;++f<g;){I=s[f];var D=I[0],B=e[D],k=I[1];if(w&&I[2]){if(B===n&&!(D in e))return!1}else{var ee=new si;if(u)var he=u(B,k,D,e,t,ee);if(!(he===n?us(k,B,ae|He,u,ee):he))return!1}}return!0}function kh(e){if(!Ct(e)||jv(e))return!1;var t=Ni(e)?ey:Bg;return t.test(hn(e))}function tv(e){return Ft(e)&&br(e)==Zn}function rv(e){return Ft(e)&&vr(e)==ii}function iv(e){return Ft(e)&&xo(e.length)&&!!mt[br(e)]}function Vh(e){return typeof e=="function"?e:e==null?Dr:typeof e=="object"?je(e)?Jh(e[0],e[1]):Wh(e):gf(e)}function rc(e){if(!fs(e))return oy(e);var t=[];for(var s in lt(e))st.call(e,s)&&s!="constructor"&&t.push(s);return t}function nv(e){if(!Ct(e))return $v(e);var t=fs(e),s=[];for(var u in e)u=="constructor"&&(t||!st.call(e,u))||s.push(u);return s}function ic(e,t){return e<t}function Gh(e,t){var s=-1,u=Ar(e)?L(e.length):[];return Gi(e,function(f,g,w){u[++s]=t(f,g,w)}),u}function Wh(e){var t=mc(e);return t.length==1&&t[0][2]?Cl(t[0][0],t[0][1]):function(s){return s===e||tc(s,e,t)}}function Jh(e,t){return wc(e)&&Ol(t)?Cl(gi(e),t):function(s){var u=Ac(s,e);return u===n&&u===t?Tc(s,e):us(t,u,ae|He)}}function ao(e,t,s,u,f){e!==t&&Qa(t,function(g,w){if(f||(f=new si),Ct(g))sv(e,t,w,s,ao,u,f);else{var I=u?u(Ec(e,w),g,w+"",e,t,f):n;I===n&&(I=g),Ja(e,w,I)}},Tr)}function sv(e,t,s,u,f,g,w){var I=Ec(e,s),D=Ec(t,s),B=w.get(D);if(B){Ja(e,s,B);return}var k=g?g(I,D,s+"",e,t,w):n,ee=k===n;if(ee){var he=je(D),ye=!he&&Qi(D),Pe=!he&&!ye&&Ln(D);k=D,he||ye||Pe?je(I)?k=I:Ut(I)?k=Rr(I):ye?(ee=!1,k=al(D,!0)):Pe?(ee=!1,k=cl(D,!0)):k=[]:ps(D)||ln(D)?(k=I,ln(I)?k=sf(I):(!Ct(I)||Ni(I))&&(k=Sl(D))):ee=!1}ee&&(w.set(D,k),f(k,D,u,g,w),w.delete(D)),Ja(e,s,k)}function Zh(e,t){var s=e.length;if(s)return t+=t<0?s:0,Di(t,s)?e[t]:n}function Qh(e,t,s){t.length?t=Pt(t,function(g){return je(g)?function(w){return cn(w,g.length===1?g[0]:g)}:g}):t=[Dr];var u=-1;t=Pt(t,jr(Ie()));var f=Gh(e,function(g,w,I){var D=Pt(t,function(B){return B(g)});return{criteria:D,index:++u,value:g}});return D0(f,function(g,w){return mv(g,w,s)})}function ov(e,t){return Yh(e,t,function(s,u){return Tc(e,u)})}function Yh(e,t,s){for(var u=-1,f=t.length,g={};++u<f;){var w=t[u],I=cn(e,w);s(I,w)&&hs(g,Ji(w,e),I)}return g}function av(e){return function(t){return cn(t,e)}}function nc(e,t,s,u){var f=u?T0:xn,g=-1,w=t.length,I=e;for(e===t&&(t=Rr(t)),s&&(I=Pt(e,jr(s)));++g<w;)for(var D=0,B=t[g],k=s?s(B):B;(D=f(I,k,D,u))>-1;)I!==e&&Qs.call(I,D,1),Qs.call(e,D,1);return e}function Xh(e,t){for(var s=e?t.length:0,u=s-1;s--;){var f=t[s];if(s==u||f!==g){var g=f;Di(f)?Qs.call(e,f,1):cc(e,f)}}return e}function sc(e,t){return e+eo(Nh()*(t-e+1))}function cv(e,t,s,u){for(var f=-1,g=or(Xs((t-e)/(s||1)),0),w=L(g);g--;)w[u?g:++f]=e,e+=s;return w}function oc(e,t){var s="";if(!e||t<1||t>Hi)return s;do t%2&&(s+=e),t=eo(t/2),t&&(e+=e);while(t);return s}function $e(e,t){return Ic(Rl(e,t,Dr),e+"")}function uv(e){return jh(jn(e))}function hv(e,t){var s=jn(e);return mo(s,an(t,0,s.length))}function hs(e,t,s,u){if(!Ct(e))return e;t=Ji(t,e);for(var f=-1,g=t.length,w=g-1,I=e;I!=null&&++f<g;){var D=gi(t[f]),B=s;if(D==="__proto__"||D==="constructor"||D==="prototype")return e;if(f!=w){var k=I[D];B=u?u(k,D,I):n,B===n&&(B=Ct(k)?k:Di(t[f+1])?[]:{})}os(I,D,B),I=I[D]}return e}var el=to?function(e,t){return to.set(e,t),e}:Dr,lv=Ys?function(e,t){return Ys(e,"toString",{configurable:!0,enumerable:!1,value:Nc(t),writable:!0})}:Dr;function fv(e){return mo(jn(e))}function Jr(e,t,s){var u=-1,f=e.length;t<0&&(t=-t>f?0:f+t),s=s>f?f:s,s<0&&(s+=f),f=t>s?0:s-t>>>0,t>>>=0;for(var g=L(f);++u<f;)g[u]=e[u+t];return g}function dv(e,t){var s;return Gi(e,function(u,f,g){return s=t(u,f,g),!s}),!!s}function co(e,t,s){var u=0,f=e==null?u:e.length;if(typeof t=="number"&&t===t&&f<=gg){for(;u<f;){var g=u+f>>>1,w=e[g];w!==null&&!zr(w)&&(s?w<=t:w<t)?u=g+1:f=g}return f}return ac(e,t,Dr,s)}function ac(e,t,s,u){var f=0,g=e==null?0:e.length;if(g===0)return 0;t=s(t);for(var w=t!==t,I=t===null,D=zr(t),B=t===n;f<g;){var k=eo((f+g)/2),ee=s(e[k]),he=ee!==n,ye=ee===null,Pe=ee===ee,ze=zr(ee);if(w)var Se=u||Pe;else B?Se=Pe&&(u||he):I?Se=Pe&&he&&(u||!ye):D?Se=Pe&&he&&!ye&&(u||!ze):ye||ze?Se=!1:Se=u?ee<=t:ee<t;Se?f=k+1:g=k}return yr(g,pg)}function tl(e,t){for(var s=-1,u=e.length,f=0,g=[];++s<u;){var w=e[s],I=t?t(w):w;if(!s||!oi(I,D)){var D=I;g[f++]=w===0?0:w}}return g}function rl(e){return typeof e=="number"?e:zr(e)?Ns:+e}function Mr(e){if(typeof e=="string")return e;if(je(e))return Pt(e,Mr)+"";if(zr(e))return Fh?Fh.call(e):"";var t=e+"";return t=="0"&&1/e==-tn?"-0":t}function Wi(e,t,s){var u=-1,f=Us,g=e.length,w=!0,I=[],D=I;if(s)w=!1,f=ja;else if(g>=a){var B=t?null:xv(e);if(B)return Ks(B);w=!1,f=es,D=new on}else D=t?[]:I;e:for(;++u<g;){var k=e[u],ee=t?t(k):k;if(k=s||k!==0?k:0,w&&ee===ee){for(var he=D.length;he--;)if(D[he]===ee)continue e;t&&D.push(ee),I.push(k)}else f(D,ee,s)||(D!==I&&D.push(ee),I.push(k))}return I}function cc(e,t){return t=Ji(t,e),e=Al(e,t),e==null||delete e[gi(Zr(t))]}function il(e,t,s,u){return hs(e,t,s(cn(e,t)),u)}function uo(e,t,s,u){for(var f=e.length,g=u?f:-1;(u?g--:++g<f)&&t(e[g],g,e););return s?Jr(e,u?0:g,u?g+1:f):Jr(e,u?g+1:0,u?f:g)}function nl(e,t){var s=e;return s instanceof Be&&(s=s.value()),Ma(t,function(u,f){return f.func.apply(f.thisArg,Bi([u],f.args))},s)}function uc(e,t,s){var u=e.length;if(u<2)return u?Wi(e[0]):[];for(var f=-1,g=L(u);++f<u;)for(var w=e[f],I=-1;++I<u;)I!=f&&(g[f]=as(g[f]||w,e[I],t,s));return Wi(pr(g,1),t,s)}function sl(e,t,s){for(var u=-1,f=e.length,g=t.length,w={};++u<f;){var I=u<g?t[u]:n;s(w,e[u],I)}return w}function hc(e){return Ut(e)?e:[]}function lc(e){return typeof e=="function"?e:Dr}function Ji(e,t){return je(e)?e:wc(e,t)?[e]:Fl(et(e))}var pv=$e;function Zi(e,t,s){var u=e.length;return s=s===n?u:s,!t&&s>=u?e:Jr(e,t,s)}var ol=ty||function(e){return dr.clearTimeout(e)};function al(e,t){if(t)return e.slice();var s=e.length,u=Ch?Ch(s):new e.constructor(s);return e.copy(u),u}function fc(e){var t=new e.constructor(e.byteLength);return new Js(t).set(new Js(e)),t}function gv(e,t){var s=t?fc(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.byteLength)}function yv(e){var t=new e.constructor(e.source,Bu.exec(e));return t.lastIndex=e.lastIndex,t}function vv(e){return ss?lt(ss.call(e)):{}}function cl(e,t){var s=t?fc(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.length)}function ul(e,t){if(e!==t){var s=e!==n,u=e===null,f=e===e,g=zr(e),w=t!==n,I=t===null,D=t===t,B=zr(t);if(!I&&!B&&!g&&e>t||g&&w&&D&&!I&&!B||u&&w&&D||!s&&D||!f)return 1;if(!u&&!g&&!B&&e<t||B&&s&&f&&!u&&!g||I&&s&&f||!w&&f||!D)return-1}return 0}function mv(e,t,s){for(var u=-1,f=e.criteria,g=t.criteria,w=f.length,I=s.length;++u<w;){var D=ul(f[u],g[u]);if(D){if(u>=I)return D;var B=s[u];return D*(B=="desc"?-1:1)}}return e.index-t.index}function hl(e,t,s,u){for(var f=-1,g=e.length,w=s.length,I=-1,D=t.length,B=or(g-w,0),k=L(D+B),ee=!u;++I<D;)k[I]=t[I];for(;++f<w;)(ee||f<g)&&(k[s[f]]=e[f]);for(;B--;)k[I++]=e[f++];return k}function ll(e,t,s,u){for(var f=-1,g=e.length,w=-1,I=s.length,D=-1,B=t.length,k=or(g-I,0),ee=L(k+B),he=!u;++f<k;)ee[f]=e[f];for(var ye=f;++D<B;)ee[ye+D]=t[D];for(;++w<I;)(he||f<g)&&(ee[ye+s[w]]=e[f++]);return ee}function Rr(e,t){var s=-1,u=e.length;for(t||(t=L(u));++s<u;)t[s]=e[s];return t}function pi(e,t,s,u){var f=!s;s||(s={});for(var g=-1,w=t.length;++g<w;){var I=t[g],D=u?u(s[I],e[I],I,s,e):n;D===n&&(D=e[I]),f?Ri(s,I,D):os(s,I,D)}return s}function _v(e,t){return pi(e,_c(e),t)}function wv(e,t){return pi(e,xl(e),t)}function ho(e,t){return function(s,u){var f=je(s)?P0:Hy,g=t?t():{};return f(s,e,Ie(u,2),g)}}function Dn(e){return $e(function(t,s){var u=-1,f=s.length,g=f>1?s[f-1]:n,w=f>2?s[2]:n;for(g=e.length>3&&typeof g=="function"?(f--,g):n,w&&Er(s[0],s[1],w)&&(g=f<3?n:g,f=1),t=lt(t);++u<f;){var I=s[u];I&&e(t,I,u,g)}return t})}function fl(e,t){return function(s,u){if(s==null)return s;if(!Ar(s))return e(s,u);for(var f=s.length,g=t?f:-1,w=lt(s);(t?g--:++g<f)&&u(w[g],g,w)!==!1;);return s}}function dl(e){return function(t,s,u){for(var f=-1,g=lt(t),w=u(t),I=w.length;I--;){var D=w[e?I:++f];if(s(g[D],D,g)===!1)break}return t}}function bv(e,t,s){var u=t&nt,f=ls(e);function g(){var w=this&&this!==dr&&this instanceof g?f:e;return w.apply(u?s:this,arguments)}return g}function pl(e){return function(t){t=et(t);var s=Pn(t)?ni(t):n,u=s?s[0]:t.charAt(0),f=s?Zi(s,1).join(""):t.slice(1);return u[e]()+f}}function Nn(e){return function(t){return Ma(df(ff(t).replace(l0,"")),e,"")}}function ls(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var s=Tn(e.prototype),u=e.apply(s,t);return Ct(u)?u:s}}function Ev(e,t,s){var u=ls(e);function f(){for(var g=arguments.length,w=L(g),I=g,D=Fn(f);I--;)w[I]=arguments[I];var B=g<3&&w[0]!==D&&w[g-1]!==D?[]:ki(w,D);if(g-=B.length,g<s)return _l(e,t,lo,f.placeholder,n,w,B,n,n,s-g);var k=this&&this!==dr&&this instanceof f?u:e;return Lr(k,this,w)}return f}function gl(e){return function(t,s,u){var f=lt(t);if(!Ar(t)){var g=Ie(s,3);t=lr(t),s=function(I){return g(f[I],I,f)}}var w=e(t,s,u);return w>-1?f[g?t[w]:w]:n}}function yl(e){return Ti(function(t){var s=t.length,u=s,f=Gr.prototype.thru;for(e&&t.reverse();u--;){var g=t[u];if(typeof g!="function")throw new Vr(v);if(f&&!w&&yo(g)=="wrapper")var w=new Gr([],!0)}for(u=w?u:s;++u<s;){g=t[u];var I=yo(g),D=I=="wrapper"?vc(g):n;D&&bc(D[0])&&D[1]==($t|We|xt|wr)&&!D[4].length&&D[9]==1?w=w[yo(D[0])].apply(w,D[3]):w=g.length==1&&bc(g)?w[I]():w.thru(g)}return function(){var B=arguments,k=B[0];if(w&&B.length==1&&je(k))return w.plant(k).value();for(var ee=0,he=s?t[ee].apply(this,B):k;++ee<s;)he=t[ee].call(this,he);return he}})}function lo(e,t,s,u,f,g,w,I,D,B){var k=t&$t,ee=t&nt,he=t&Ve,ye=t&(We|Je),Pe=t&Ui,ze=he?n:ls(e);function Se(){for(var Ke=arguments.length,ke=L(Ke),qr=Ke;qr--;)ke[qr]=arguments[qr];if(ye)var Ir=Fn(Se),$r=F0(ke,Ir);if(u&&(ke=hl(ke,u,f,ye)),g&&(ke=ll(ke,g,w,ye)),Ke-=$r,ye&&Ke<B){var Ht=ki(ke,Ir);return _l(e,t,lo,Se.placeholder,s,ke,Ht,I,D,B-Ke)}var ai=ee?s:this,Li=he?ai[e]:e;return Ke=ke.length,I?ke=Hv(ke,I):Pe&&Ke>1&&ke.reverse(),k&&D<Ke&&(ke.length=D),this&&this!==dr&&this instanceof Se&&(Li=ze||ls(Li)),Li.apply(ai,ke)}return Se}function vl(e,t){return function(s,u){return Zy(s,e,t(u),{})}}function fo(e,t){return function(s,u){var f;if(s===n&&u===n)return t;if(s!==n&&(f=s),u!==n){if(f===n)return u;typeof s=="string"||typeof u=="string"?(s=Mr(s),u=Mr(u)):(s=rl(s),u=rl(u)),f=e(s,u)}return f}}function dc(e){return Ti(function(t){return t=Pt(t,jr(Ie())),$e(function(s){var u=this;return e(t,function(f){return Lr(f,u,s)})})})}function po(e,t){t=t===n?" ":Mr(t);var s=t.length;if(s<2)return s?oc(t,e):t;var u=oc(t,Xs(e/Sn(t)));return Pn(t)?Zi(ni(u),0,e).join(""):u.slice(0,e)}function Iv(e,t,s,u){var f=t&nt,g=ls(e);function w(){for(var I=-1,D=arguments.length,B=-1,k=u.length,ee=L(k+D),he=this&&this!==dr&&this instanceof w?g:e;++B<k;)ee[B]=u[B];for(;D--;)ee[B++]=arguments[++I];return Lr(he,f?s:this,ee)}return w}function ml(e){return function(t,s,u){return u&&typeof u!="number"&&Er(t,s,u)&&(s=u=n),t=Fi(t),s===n?(s=t,t=0):s=Fi(s),u=u===n?t<s?1:-1:Fi(u),cv(t,s,u,e)}}function go(e){return function(t,s){return typeof t=="string"&&typeof s=="string"||(t=Qr(t),s=Qr(s)),e(t,s)}}function _l(e,t,s,u,f,g,w,I,D,B){var k=t&We,ee=k?w:n,he=k?n:w,ye=k?g:n,Pe=k?n:g;t|=k?xt:_r,t&=~(k?_r:xt),t&nr||(t&=~(nt|Ve));var ze=[e,t,f,ye,ee,Pe,he,I,D,B],Se=s.apply(n,ze);return bc(e)&&Tl(Se,ze),Se.placeholder=u,Dl(Se,e,t)}function pc(e){var t=sr[e];return function(s,u){if(s=Qr(s),u=u==null?0:yr(Me(u),292),u&&Dh(s)){var f=(et(s)+"e").split("e"),g=t(f[0]+"e"+(+f[1]+u));return f=(et(g)+"e").split("e"),+(f[0]+"e"+(+f[1]-u))}return t(s)}}var xv=Rn&&1/Ks(new Rn([,-0]))[1]==tn?function(e){return new Rn(e)}:jc;function wl(e){return function(t){var s=vr(t);return s==ri?Ba(t):s==ii?U0(t):N0(t,e(t))}}function Ai(e,t,s,u,f,g,w,I){var D=t&Ve;if(!D&&typeof e!="function")throw new Vr(v);var B=u?u.length:0;if(B||(t&=~(xt|_r),u=f=n),w=w===n?w:or(Me(w),0),I=I===n?I:Me(I),B-=f?f.length:0,t&_r){var k=u,ee=f;u=f=n}var he=D?n:vc(e),ye=[e,t,s,u,f,k,ee,g,w,I];if(he&&qv(ye,he),e=ye[0],t=ye[1],s=ye[2],u=ye[3],f=ye[4],I=ye[9]=ye[9]===n?D?0:e.length:or(ye[9]-B,0),!I&&t&(We|Je)&&(t&=~(We|Je)),!t||t==nt)var Pe=bv(e,t,s);else t==We||t==Je?Pe=Ev(e,t,I):(t==xt||t==(nt|xt))&&!f.length?Pe=Iv(e,t,s,u):Pe=lo.apply(n,ye);var ze=he?el:Tl;return Dl(ze(Pe,ye),e,t)}function bl(e,t,s,u){return e===n||oi(e,Cn[s])&&!st.call(u,s)?t:e}function El(e,t,s,u,f,g){return Ct(e)&&Ct(t)&&(g.set(t,e),ao(e,t,n,El,g),g.delete(t)),e}function Pv(e){return ps(e)?n:e}function Il(e,t,s,u,f,g){var w=s&ae,I=e.length,D=t.length;if(I!=D&&!(w&&D>I))return!1;var B=g.get(e),k=g.get(t);if(B&&k)return B==t&&k==e;var ee=-1,he=!0,ye=s&He?new on:n;for(g.set(e,t),g.set(t,e);++ee<I;){var Pe=e[ee],ze=t[ee];if(u)var Se=w?u(ze,Pe,ee,t,e,g):u(Pe,ze,ee,e,t,g);if(Se!==n){if(Se)continue;he=!1;break}if(ye){if(!za(t,function(Ke,ke){if(!es(ye,ke)&&(Pe===Ke||f(Pe,Ke,s,u,g)))return ye.push(ke)})){he=!1;break}}else if(!(Pe===ze||f(Pe,ze,s,u,g))){he=!1;break}}return g.delete(e),g.delete(t),he}function Sv(e,t,s,u,f,g,w){switch(s){case En:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Xn:return!(e.byteLength!=t.byteLength||!g(new Js(e),new Js(t)));case Gn:case Wn:case Jn:return oi(+e,+t);case Ls:return e.name==t.name&&e.message==t.message;case Zn:case Qn:return e==t+"";case ri:var I=Ba;case ii:var D=u&ae;if(I||(I=Ks),e.size!=t.size&&!D)return!1;var B=w.get(e);if(B)return B==t;u|=He,w.set(e,t);var k=Il(I(e),I(t),u,f,g,w);return w.delete(e),k;case Ms:if(ss)return ss.call(e)==ss.call(t)}return!1}function Ov(e,t,s,u,f,g){var w=s&ae,I=gc(e),D=I.length,B=gc(t),k=B.length;if(D!=k&&!w)return!1;for(var ee=D;ee--;){var he=I[ee];if(!(w?he in t:st.call(t,he)))return!1}var ye=g.get(e),Pe=g.get(t);if(ye&&Pe)return ye==t&&Pe==e;var ze=!0;g.set(e,t),g.set(t,e);for(var Se=w;++ee<D;){he=I[ee];var Ke=e[he],ke=t[he];if(u)var qr=w?u(ke,Ke,he,t,e,g):u(Ke,ke,he,e,t,g);if(!(qr===n?Ke===ke||f(Ke,ke,s,u,g):qr)){ze=!1;break}Se||(Se=he=="constructor")}if(ze&&!Se){var Ir=e.constructor,$r=t.constructor;Ir!=$r&&"constructor"in e&&"constructor"in t&&!(typeof Ir=="function"&&Ir instanceof Ir&&typeof $r=="function"&&$r instanceof $r)&&(ze=!1)}return g.delete(e),g.delete(t),ze}function Ti(e){return Ic(Rl(e,n,zl),e+"")}function gc(e){return Kh(e,lr,_c)}function yc(e){return Kh(e,Tr,xl)}var vc=to?function(e){return to.get(e)}:jc;function yo(e){for(var t=e.name+"",s=An[t],u=st.call(An,t)?s.length:0;u--;){var f=s[u],g=f.func;if(g==null||g==e)return f.name}return t}function Fn(e){var t=st.call(p,"placeholder")?p:e;return t.placeholder}function Ie(){var e=p.iteratee||Fc;return e=e===Fc?Vh:e,arguments.length?e(arguments[0],arguments[1]):e}function vo(e,t){var s=e.__data__;return Lv(t)?s[typeof t=="string"?"string":"hash"]:s.map}function mc(e){for(var t=lr(e),s=t.length;s--;){var u=t[s],f=e[u];t[s]=[u,f,Ol(f)]}return t}function un(e,t){var s=z0(e,t);return kh(s)?s:n}function Cv(e){var t=st.call(e,nn),s=e[nn];try{e[nn]=n;var u=!0}catch{}var f=Gs.call(e);return u&&(t?e[nn]=s:delete e[nn]),f}var _c=Va?function(e){return e==null?[]:(e=lt(e),Ki(Va(e),function(t){return Ah.call(e,t)}))}:Mc,xl=Va?function(e){for(var t=[];e;)Bi(t,_c(e)),e=Zs(e);return t}:Mc,vr=br;(Ga&&vr(new Ga(new ArrayBuffer(1)))!=En||rs&&vr(new rs)!=ri||Wa&&vr(Wa.resolve())!=$u||Rn&&vr(new Rn)!=ii||is&&vr(new is)!=Yn)&&(vr=function(e){var t=br(e),s=t==Si?e.constructor:n,u=s?hn(s):"";if(u)switch(u){case hy:return En;case ly:return ri;case fy:return $u;case dy:return ii;case py:return Yn}return t});function Rv(e,t,s){for(var u=-1,f=s.length;++u<f;){var g=s[u],w=g.size;switch(g.type){case"drop":e+=w;break;case"dropRight":t-=w;break;case"take":t=yr(t,e+w);break;case"takeRight":e=or(e,t-w);break}}return{start:e,end:t}}function Av(e){var t=e.match(jg);return t?t[1].split(Mg):[]}function Pl(e,t,s){t=Ji(t,e);for(var u=-1,f=t.length,g=!1;++u<f;){var w=gi(t[u]);if(!(g=e!=null&&s(e,w)))break;e=e[w]}return g||++u!=f?g:(f=e==null?0:e.length,!!f&&xo(f)&&Di(w,f)&&(je(e)||ln(e)))}function Tv(e){var t=e.length,s=new e.constructor(t);return t&&typeof e[0]=="string"&&st.call(e,"index")&&(s.index=e.index,s.input=e.input),s}function Sl(e){return typeof e.constructor=="function"&&!fs(e)?Tn(Zs(e)):{}}function Dv(e,t,s){var u=e.constructor;switch(t){case Xn:return fc(e);case Gn:case Wn:return new u(+e);case En:return gv(e,s);case ma:case _a:case wa:case ba:case Ea:case Ia:case xa:case Pa:case Sa:return cl(e,s);case ri:return new u;case Jn:case Qn:return new u(e);case Zn:return yv(e);case ii:return new u;case Ms:return vv(e)}}function Nv(e,t){var s=t.length;if(!s)return e;var u=s-1;return t[u]=(s>1?"& ":"")+t[u],t=t.join(s>2?", ":" "),e.replace(Lg,`{
/* [wrapped with `+t+`] */
`)}function Fv(e){return je(e)||ln(e)||!!(Th&&e&&e[Th])}function Di(e,t){var s=typeof e;return t=t??Hi,!!t&&(s=="number"||s!="symbol"&&Vg.test(e))&&e>-1&&e%1==0&&e<t}function Er(e,t,s){if(!Ct(s))return!1;var u=typeof t;return(u=="number"?Ar(s)&&Di(t,s.length):u=="string"&&t in s)?oi(s[t],e):!1}function wc(e,t){if(je(e))return!1;var s=typeof e;return s=="number"||s=="symbol"||s=="boolean"||e==null||zr(e)?!0:Tg.test(e)||!Ag.test(e)||t!=null&&e in lt(t)}function Lv(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function bc(e){var t=yo(e),s=p[t];if(typeof s!="function"||!(t in Be.prototype))return!1;if(e===s)return!0;var u=vc(s);return!!u&&e===u[0]}function jv(e){return!!Oh&&Oh in e}var Mv=ks?Ni:zc;function fs(e){var t=e&&e.constructor,s=typeof t=="function"&&t.prototype||Cn;return e===s}function Ol(e){return e===e&&!Ct(e)}function Cl(e,t){return function(s){return s==null?!1:s[e]===t&&(t!==n||e in lt(s))}}function zv(e){var t=Eo(e,function(u){return s.size===x&&s.clear(),u}),s=t.cache;return t}function qv(e,t){var s=e[1],u=t[1],f=s|u,g=f<(nt|Ve|$t),w=u==$t&&s==We||u==$t&&s==wr&&e[7].length<=t[8]||u==($t|wr)&&t[7].length<=t[8]&&s==We;if(!(g||w))return e;u&nt&&(e[2]=t[2],f|=s&nt?0:nr);var I=t[3];if(I){var D=e[3];e[3]=D?hl(D,I,t[4]):I,e[4]=D?ki(e[3],M):t[4]}return I=t[5],I&&(D=e[5],e[5]=D?ll(D,I,t[6]):I,e[6]=D?ki(e[5],M):t[6]),I=t[7],I&&(e[7]=I),u&$t&&(e[8]=e[8]==null?t[8]:yr(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=f,e}function $v(e){var t=[];if(e!=null)for(var s in lt(e))t.push(s);return t}function Uv(e){return Gs.call(e)}function Rl(e,t,s){return t=or(t===n?e.length-1:t,0),function(){for(var u=arguments,f=-1,g=or(u.length-t,0),w=L(g);++f<g;)w[f]=u[t+f];f=-1;for(var I=L(t+1);++f<t;)I[f]=u[f];return I[t]=s(w),Lr(e,this,I)}}function Al(e,t){return t.length<2?e:cn(e,Jr(t,0,-1))}function Hv(e,t){for(var s=e.length,u=yr(t.length,s),f=Rr(e);u--;){var g=t[u];e[u]=Di(g,s)?f[g]:n}return e}function Ec(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var Tl=Nl(el),ds=iy||function(e,t){return dr.setTimeout(e,t)},Ic=Nl(lv);function Dl(e,t,s){var u=t+"";return Ic(e,Nv(u,Kv(Av(u),s)))}function Nl(e){var t=0,s=0;return function(){var u=ay(),f=hg-(u-s);if(s=u,f>0){if(++t>=ug)return arguments[0]}else t=0;return e.apply(n,arguments)}}function mo(e,t){var s=-1,u=e.length,f=u-1;for(t=t===n?u:t;++s<t;){var g=sc(s,f),w=e[g];e[g]=e[s],e[s]=w}return e.length=t,e}var Fl=zv(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Dg,function(s,u,f,g){t.push(f?g.replace($g,"$1"):u||s)}),t});function gi(e){if(typeof e=="string"||zr(e))return e;var t=e+"";return t=="0"&&1/e==-tn?"-0":t}function hn(e){if(e!=null){try{return Vs.call(e)}catch{}try{return e+""}catch{}}return""}function Kv(e,t){return kr(yg,function(s){var u="_."+s[0];t&s[1]&&!Us(e,u)&&e.push(u)}),e.sort()}function Ll(e){if(e instanceof Be)return e.clone();var t=new Gr(e.__wrapped__,e.__chain__);return t.__actions__=Rr(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Bv(e,t,s){(s?Er(e,t,s):t===n)?t=1:t=or(Me(t),0);var u=e==null?0:e.length;if(!u||t<1)return[];for(var f=0,g=0,w=L(Xs(u/t));f<u;)w[g++]=Jr(e,f,f+=t);return w}function kv(e){for(var t=-1,s=e==null?0:e.length,u=0,f=[];++t<s;){var g=e[t];g&&(f[u++]=g)}return f}function Vv(){var e=arguments.length;if(!e)return[];for(var t=L(e-1),s=arguments[0],u=e;u--;)t[u-1]=arguments[u];return Bi(je(s)?Rr(s):[s],pr(t,1))}var Gv=$e(function(e,t){return Ut(e)?as(e,pr(t,1,Ut,!0)):[]}),Wv=$e(function(e,t){var s=Zr(t);return Ut(s)&&(s=n),Ut(e)?as(e,pr(t,1,Ut,!0),Ie(s,2)):[]}),Jv=$e(function(e,t){var s=Zr(t);return Ut(s)&&(s=n),Ut(e)?as(e,pr(t,1,Ut,!0),n,s):[]});function Zv(e,t,s){var u=e==null?0:e.length;return u?(t=s||t===n?1:Me(t),Jr(e,t<0?0:t,u)):[]}function Qv(e,t,s){var u=e==null?0:e.length;return u?(t=s||t===n?1:Me(t),t=u-t,Jr(e,0,t<0?0:t)):[]}function Yv(e,t){return e&&e.length?uo(e,Ie(t,3),!0,!0):[]}function Xv(e,t){return e&&e.length?uo(e,Ie(t,3),!0):[]}function em(e,t,s,u){var f=e==null?0:e.length;return f?(s&&typeof s!="number"&&Er(e,t,s)&&(s=0,u=f),Vy(e,t,s,u)):[]}function jl(e,t,s){var u=e==null?0:e.length;if(!u)return-1;var f=s==null?0:Me(s);return f<0&&(f=or(u+f,0)),Hs(e,Ie(t,3),f)}function Ml(e,t,s){var u=e==null?0:e.length;if(!u)return-1;var f=u-1;return s!==n&&(f=Me(s),f=s<0?or(u+f,0):yr(f,u-1)),Hs(e,Ie(t,3),f,!0)}function zl(e){var t=e==null?0:e.length;return t?pr(e,1):[]}function tm(e){var t=e==null?0:e.length;return t?pr(e,tn):[]}function rm(e,t){var s=e==null?0:e.length;return s?(t=t===n?1:Me(t),pr(e,t)):[]}function im(e){for(var t=-1,s=e==null?0:e.length,u={};++t<s;){var f=e[t];u[f[0]]=f[1]}return u}function ql(e){return e&&e.length?e[0]:n}function nm(e,t,s){var u=e==null?0:e.length;if(!u)return-1;var f=s==null?0:Me(s);return f<0&&(f=or(u+f,0)),xn(e,t,f)}function sm(e){var t=e==null?0:e.length;return t?Jr(e,0,-1):[]}var om=$e(function(e){var t=Pt(e,hc);return t.length&&t[0]===e[0]?ec(t):[]}),am=$e(function(e){var t=Zr(e),s=Pt(e,hc);return t===Zr(s)?t=n:s.pop(),s.length&&s[0]===e[0]?ec(s,Ie(t,2)):[]}),cm=$e(function(e){var t=Zr(e),s=Pt(e,hc);return t=typeof t=="function"?t:n,t&&s.pop(),s.length&&s[0]===e[0]?ec(s,n,t):[]});function um(e,t){return e==null?"":sy.call(e,t)}function Zr(e){var t=e==null?0:e.length;return t?e[t-1]:n}function hm(e,t,s){var u=e==null?0:e.length;if(!u)return-1;var f=u;return s!==n&&(f=Me(s),f=f<0?or(u+f,0):yr(f,u-1)),t===t?K0(e,t,f):Hs(e,_h,f,!0)}function lm(e,t){return e&&e.length?Zh(e,Me(t)):n}var fm=$e($l);function $l(e,t){return e&&e.length&&t&&t.length?nc(e,t):e}function dm(e,t,s){return e&&e.length&&t&&t.length?nc(e,t,Ie(s,2)):e}function pm(e,t,s){return e&&e.length&&t&&t.length?nc(e,t,n,s):e}var gm=Ti(function(e,t){var s=e==null?0:e.length,u=Za(e,t);return Xh(e,Pt(t,function(f){return Di(f,s)?+f:f}).sort(ul)),u});function ym(e,t){var s=[];if(!(e&&e.length))return s;var u=-1,f=[],g=e.length;for(t=Ie(t,3);++u<g;){var w=e[u];t(w,u,e)&&(s.push(w),f.push(u))}return Xh(e,f),s}function xc(e){return e==null?e:uy.call(e)}function vm(e,t,s){var u=e==null?0:e.length;return u?(s&&typeof s!="number"&&Er(e,t,s)?(t=0,s=u):(t=t==null?0:Me(t),s=s===n?u:Me(s)),Jr(e,t,s)):[]}function mm(e,t){return co(e,t)}function _m(e,t,s){return ac(e,t,Ie(s,2))}function wm(e,t){var s=e==null?0:e.length;if(s){var u=co(e,t);if(u<s&&oi(e[u],t))return u}return-1}function bm(e,t){return co(e,t,!0)}function Em(e,t,s){return ac(e,t,Ie(s,2),!0)}function Im(e,t){var s=e==null?0:e.length;if(s){var u=co(e,t,!0)-1;if(oi(e[u],t))return u}return-1}function xm(e){return e&&e.length?tl(e):[]}function Pm(e,t){return e&&e.length?tl(e,Ie(t,2)):[]}function Sm(e){var t=e==null?0:e.length;return t?Jr(e,1,t):[]}function Om(e,t,s){return e&&e.length?(t=s||t===n?1:Me(t),Jr(e,0,t<0?0:t)):[]}function Cm(e,t,s){var u=e==null?0:e.length;return u?(t=s||t===n?1:Me(t),t=u-t,Jr(e,t<0?0:t,u)):[]}function Rm(e,t){return e&&e.length?uo(e,Ie(t,3),!1,!0):[]}function Am(e,t){return e&&e.length?uo(e,Ie(t,3)):[]}var Tm=$e(function(e){return Wi(pr(e,1,Ut,!0))}),Dm=$e(function(e){var t=Zr(e);return Ut(t)&&(t=n),Wi(pr(e,1,Ut,!0),Ie(t,2))}),Nm=$e(function(e){var t=Zr(e);return t=typeof t=="function"?t:n,Wi(pr(e,1,Ut,!0),n,t)});function Fm(e){return e&&e.length?Wi(e):[]}function Lm(e,t){return e&&e.length?Wi(e,Ie(t,2)):[]}function jm(e,t){return t=typeof t=="function"?t:n,e&&e.length?Wi(e,n,t):[]}function Pc(e){if(!(e&&e.length))return[];var t=0;return e=Ki(e,function(s){if(Ut(s))return t=or(s.length,t),!0}),Ha(t,function(s){return Pt(e,qa(s))})}function Ul(e,t){if(!(e&&e.length))return[];var s=Pc(e);return t==null?s:Pt(s,function(u){return Lr(t,n,u)})}var Mm=$e(function(e,t){return Ut(e)?as(e,t):[]}),zm=$e(function(e){return uc(Ki(e,Ut))}),qm=$e(function(e){var t=Zr(e);return Ut(t)&&(t=n),uc(Ki(e,Ut),Ie(t,2))}),$m=$e(function(e){var t=Zr(e);return t=typeof t=="function"?t:n,uc(Ki(e,Ut),n,t)}),Um=$e(Pc);function Hm(e,t){return sl(e||[],t||[],os)}function Km(e,t){return sl(e||[],t||[],hs)}var Bm=$e(function(e){var t=e.length,s=t>1?e[t-1]:n;return s=typeof s=="function"?(e.pop(),s):n,Ul(e,s)});function Hl(e){var t=p(e);return t.__chain__=!0,t}function km(e,t){return t(e),e}function _o(e,t){return t(e)}var Vm=Ti(function(e){var t=e.length,s=t?e[0]:0,u=this.__wrapped__,f=function(g){return Za(g,e)};return t>1||this.__actions__.length||!(u instanceof Be)||!Di(s)?this.thru(f):(u=u.slice(s,+s+(t?1:0)),u.__actions__.push({func:_o,args:[f],thisArg:n}),new Gr(u,this.__chain__).thru(function(g){return t&&!g.length&&g.push(n),g}))});function Gm(){return Hl(this)}function Wm(){return new Gr(this.value(),this.__chain__)}function Jm(){this.__values__===n&&(this.__values__=rf(this.value()));var e=this.__index__>=this.__values__.length,t=e?n:this.__values__[this.__index__++];return{done:e,value:t}}function Zm(){return this}function Qm(e){for(var t,s=this;s instanceof io;){var u=Ll(s);u.__index__=0,u.__values__=n,t?f.__wrapped__=u:t=u;var f=u;s=s.__wrapped__}return f.__wrapped__=e,t}function Ym(){var e=this.__wrapped__;if(e instanceof Be){var t=e;return this.__actions__.length&&(t=new Be(this)),t=t.reverse(),t.__actions__.push({func:_o,args:[xc],thisArg:n}),new Gr(t,this.__chain__)}return this.thru(xc)}function Xm(){return nl(this.__wrapped__,this.__actions__)}var e_=ho(function(e,t,s){st.call(e,s)?++e[s]:Ri(e,s,1)});function t_(e,t,s){var u=je(e)?vh:ky;return s&&Er(e,t,s)&&(t=n),u(e,Ie(t,3))}function r_(e,t){var s=je(e)?Ki:Uh;return s(e,Ie(t,3))}var i_=gl(jl),n_=gl(Ml);function s_(e,t){return pr(wo(e,t),1)}function o_(e,t){return pr(wo(e,t),tn)}function a_(e,t,s){return s=s===n?1:Me(s),pr(wo(e,t),s)}function Kl(e,t){var s=je(e)?kr:Gi;return s(e,Ie(t,3))}function Bl(e,t){var s=je(e)?S0:$h;return s(e,Ie(t,3))}var c_=ho(function(e,t,s){st.call(e,s)?e[s].push(t):Ri(e,s,[t])});function u_(e,t,s,u){e=Ar(e)?e:jn(e),s=s&&!u?Me(s):0;var f=e.length;return s<0&&(s=or(f+s,0)),Po(e)?s<=f&&e.indexOf(t,s)>-1:!!f&&xn(e,t,s)>-1}var h_=$e(function(e,t,s){var u=-1,f=typeof t=="function",g=Ar(e)?L(e.length):[];return Gi(e,function(w){g[++u]=f?Lr(t,w,s):cs(w,t,s)}),g}),l_=ho(function(e,t,s){Ri(e,s,t)});function wo(e,t){var s=je(e)?Pt:Gh;return s(e,Ie(t,3))}function f_(e,t,s,u){return e==null?[]:(je(t)||(t=t==null?[]:[t]),s=u?n:s,je(s)||(s=s==null?[]:[s]),Qh(e,t,s))}var d_=ho(function(e,t,s){e[s?0:1].push(t)},function(){return[[],[]]});function p_(e,t,s){var u=je(e)?Ma:bh,f=arguments.length<3;return u(e,Ie(t,4),s,f,Gi)}function g_(e,t,s){var u=je(e)?O0:bh,f=arguments.length<3;return u(e,Ie(t,4),s,f,$h)}function y_(e,t){var s=je(e)?Ki:Uh;return s(e,Io(Ie(t,3)))}function v_(e){var t=je(e)?jh:uv;return t(e)}function m_(e,t,s){(s?Er(e,t,s):t===n)?t=1:t=Me(t);var u=je(e)?$y:hv;return u(e,t)}function __(e){var t=je(e)?Uy:fv;return t(e)}function w_(e){if(e==null)return 0;if(Ar(e))return Po(e)?Sn(e):e.length;var t=vr(e);return t==ri||t==ii?e.size:rc(e).length}function b_(e,t,s){var u=je(e)?za:dv;return s&&Er(e,t,s)&&(t=n),u(e,Ie(t,3))}var E_=$e(function(e,t){if(e==null)return[];var s=t.length;return s>1&&Er(e,t[0],t[1])?t=[]:s>2&&Er(t[0],t[1],t[2])&&(t=[t[0]]),Qh(e,pr(t,1),[])}),bo=ry||function(){return dr.Date.now()};function I_(e,t){if(typeof t!="function")throw new Vr(v);return e=Me(e),function(){if(--e<1)return t.apply(this,arguments)}}function kl(e,t,s){return t=s?n:t,t=e&&t==null?e.length:t,Ai(e,$t,n,n,n,n,t)}function Vl(e,t){var s;if(typeof t!="function")throw new Vr(v);return e=Me(e),function(){return--e>0&&(s=t.apply(this,arguments)),e<=1&&(t=n),s}}var Sc=$e(function(e,t,s){var u=nt;if(s.length){var f=ki(s,Fn(Sc));u|=xt}return Ai(e,u,t,s,f)}),Gl=$e(function(e,t,s){var u=nt|Ve;if(s.length){var f=ki(s,Fn(Gl));u|=xt}return Ai(t,u,e,s,f)});function Wl(e,t,s){t=s?n:t;var u=Ai(e,We,n,n,n,n,n,t);return u.placeholder=Wl.placeholder,u}function Jl(e,t,s){t=s?n:t;var u=Ai(e,Je,n,n,n,n,n,t);return u.placeholder=Jl.placeholder,u}function Zl(e,t,s){var u,f,g,w,I,D,B=0,k=!1,ee=!1,he=!0;if(typeof e!="function")throw new Vr(v);t=Qr(t)||0,Ct(s)&&(k=!!s.leading,ee="maxWait"in s,g=ee?or(Qr(s.maxWait)||0,t):g,he="trailing"in s?!!s.trailing:he);function ye(Ht){var ai=u,Li=f;return u=f=n,B=Ht,w=e.apply(Li,ai),w}function Pe(Ht){return B=Ht,I=ds(Ke,t),k?ye(Ht):w}function ze(Ht){var ai=Ht-D,Li=Ht-B,yf=t-ai;return ee?yr(yf,g-Li):yf}function Se(Ht){var ai=Ht-D,Li=Ht-B;return D===n||ai>=t||ai<0||ee&&Li>=g}function Ke(){var Ht=bo();if(Se(Ht))return ke(Ht);I=ds(Ke,ze(Ht))}function ke(Ht){return I=n,he&&u?ye(Ht):(u=f=n,w)}function qr(){I!==n&&ol(I),B=0,u=D=f=I=n}function Ir(){return I===n?w:ke(bo())}function $r(){var Ht=bo(),ai=Se(Ht);if(u=arguments,f=this,D=Ht,ai){if(I===n)return Pe(D);if(ee)return ol(I),I=ds(Ke,t),ye(D)}return I===n&&(I=ds(Ke,t)),w}return $r.cancel=qr,$r.flush=Ir,$r}var x_=$e(function(e,t){return qh(e,1,t)}),P_=$e(function(e,t,s){return qh(e,Qr(t)||0,s)});function S_(e){return Ai(e,Ui)}function Eo(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new Vr(v);var s=function(){var u=arguments,f=t?t.apply(this,u):u[0],g=s.cache;if(g.has(f))return g.get(f);var w=e.apply(this,u);return s.cache=g.set(f,w)||g,w};return s.cache=new(Eo.Cache||Ci),s}Eo.Cache=Ci;function Io(e){if(typeof e!="function")throw new Vr(v);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function O_(e){return Vl(2,e)}var C_=pv(function(e,t){t=t.length==1&&je(t[0])?Pt(t[0],jr(Ie())):Pt(pr(t,1),jr(Ie()));var s=t.length;return $e(function(u){for(var f=-1,g=yr(u.length,s);++f<g;)u[f]=t[f].call(this,u[f]);return Lr(e,this,u)})}),Oc=$e(function(e,t){var s=ki(t,Fn(Oc));return Ai(e,xt,n,t,s)}),Ql=$e(function(e,t){var s=ki(t,Fn(Ql));return Ai(e,_r,n,t,s)}),R_=Ti(function(e,t){return Ai(e,wr,n,n,n,t)});function A_(e,t){if(typeof e!="function")throw new Vr(v);return t=t===n?t:Me(t),$e(e,t)}function T_(e,t){if(typeof e!="function")throw new Vr(v);return t=t==null?0:or(Me(t),0),$e(function(s){var u=s[t],f=Zi(s,0,t);return u&&Bi(f,u),Lr(e,this,f)})}function D_(e,t,s){var u=!0,f=!0;if(typeof e!="function")throw new Vr(v);return Ct(s)&&(u="leading"in s?!!s.leading:u,f="trailing"in s?!!s.trailing:f),Zl(e,t,{leading:u,maxWait:t,trailing:f})}function N_(e){return kl(e,1)}function F_(e,t){return Oc(lc(t),e)}function L_(){if(!arguments.length)return[];var e=arguments[0];return je(e)?e:[e]}function j_(e){return Wr(e,ge)}function M_(e,t){return t=typeof t=="function"?t:n,Wr(e,ge,t)}function z_(e){return Wr(e,K|ge)}function q_(e,t){return t=typeof t=="function"?t:n,Wr(e,K|ge,t)}function $_(e,t){return t==null||zh(e,t,lr(t))}function oi(e,t){return e===t||e!==e&&t!==t}var U_=go(Xa),H_=go(function(e,t){return e>=t}),ln=Bh(function(){return arguments}())?Bh:function(e){return Ft(e)&&st.call(e,"callee")&&!Ah.call(e,"callee")},je=L.isArray,K_=lh?jr(lh):Qy;function Ar(e){return e!=null&&xo(e.length)&&!Ni(e)}function Ut(e){return Ft(e)&&Ar(e)}function B_(e){return e===!0||e===!1||Ft(e)&&br(e)==Gn}var Qi=ny||zc,k_=fh?jr(fh):Yy;function V_(e){return Ft(e)&&e.nodeType===1&&!ps(e)}function G_(e){if(e==null)return!0;if(Ar(e)&&(je(e)||typeof e=="string"||typeof e.splice=="function"||Qi(e)||Ln(e)||ln(e)))return!e.length;var t=vr(e);if(t==ri||t==ii)return!e.size;if(fs(e))return!rc(e).length;for(var s in e)if(st.call(e,s))return!1;return!0}function W_(e,t){return us(e,t)}function J_(e,t,s){s=typeof s=="function"?s:n;var u=s?s(e,t):n;return u===n?us(e,t,n,s):!!u}function Cc(e){if(!Ft(e))return!1;var t=br(e);return t==Ls||t==mg||typeof e.message=="string"&&typeof e.name=="string"&&!ps(e)}function Z_(e){return typeof e=="number"&&Dh(e)}function Ni(e){if(!Ct(e))return!1;var t=br(e);return t==js||t==qu||t==vg||t==wg}function Yl(e){return typeof e=="number"&&e==Me(e)}function xo(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Hi}function Ct(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function Ft(e){return e!=null&&typeof e=="object"}var Xl=dh?jr(dh):ev;function Q_(e,t){return e===t||tc(e,t,mc(t))}function Y_(e,t,s){return s=typeof s=="function"?s:n,tc(e,t,mc(t),s)}function X_(e){return ef(e)&&e!=+e}function e1(e){if(Mv(e))throw new Ne(d);return kh(e)}function t1(e){return e===null}function r1(e){return e==null}function ef(e){return typeof e=="number"||Ft(e)&&br(e)==Jn}function ps(e){if(!Ft(e)||br(e)!=Si)return!1;var t=Zs(e);if(t===null)return!0;var s=st.call(t,"constructor")&&t.constructor;return typeof s=="function"&&s instanceof s&&Vs.call(s)==Y0}var Rc=ph?jr(ph):tv;function i1(e){return Yl(e)&&e>=-Hi&&e<=Hi}var tf=gh?jr(gh):rv;function Po(e){return typeof e=="string"||!je(e)&&Ft(e)&&br(e)==Qn}function zr(e){return typeof e=="symbol"||Ft(e)&&br(e)==Ms}var Ln=yh?jr(yh):iv;function n1(e){return e===n}function s1(e){return Ft(e)&&vr(e)==Yn}function o1(e){return Ft(e)&&br(e)==Eg}var a1=go(ic),c1=go(function(e,t){return e<=t});function rf(e){if(!e)return[];if(Ar(e))return Po(e)?ni(e):Rr(e);if(ts&&e[ts])return $0(e[ts]());var t=vr(e),s=t==ri?Ba:t==ii?Ks:jn;return s(e)}function Fi(e){if(!e)return e===0?e:0;if(e=Qr(e),e===tn||e===-tn){var t=e<0?-1:1;return t*dg}return e===e?e:0}function Me(e){var t=Fi(e),s=t%1;return t===t?s?t-s:t:0}function nf(e){return e?an(Me(e),0,fi):0}function Qr(e){if(typeof e=="number")return e;if(zr(e))return Ns;if(Ct(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Ct(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Eh(e);var s=Kg.test(e);return s||kg.test(e)?I0(e.slice(2),s?2:8):Hg.test(e)?Ns:+e}function sf(e){return pi(e,Tr(e))}function u1(e){return e?an(Me(e),-Hi,Hi):e===0?e:0}function et(e){return e==null?"":Mr(e)}var h1=Dn(function(e,t){if(fs(t)||Ar(t)){pi(t,lr(t),e);return}for(var s in t)st.call(t,s)&&os(e,s,t[s])}),of=Dn(function(e,t){pi(t,Tr(t),e)}),So=Dn(function(e,t,s,u){pi(t,Tr(t),e,u)}),l1=Dn(function(e,t,s,u){pi(t,lr(t),e,u)}),f1=Ti(Za);function d1(e,t){var s=Tn(e);return t==null?s:Mh(s,t)}var p1=$e(function(e,t){e=lt(e);var s=-1,u=t.length,f=u>2?t[2]:n;for(f&&Er(t[0],t[1],f)&&(u=1);++s<u;)for(var g=t[s],w=Tr(g),I=-1,D=w.length;++I<D;){var B=w[I],k=e[B];(k===n||oi(k,Cn[B])&&!st.call(e,B))&&(e[B]=g[B])}return e}),g1=$e(function(e){return e.push(n,El),Lr(af,n,e)});function y1(e,t){return mh(e,Ie(t,3),di)}function v1(e,t){return mh(e,Ie(t,3),Ya)}function m1(e,t){return e==null?e:Qa(e,Ie(t,3),Tr)}function _1(e,t){return e==null?e:Hh(e,Ie(t,3),Tr)}function w1(e,t){return e&&di(e,Ie(t,3))}function b1(e,t){return e&&Ya(e,Ie(t,3))}function E1(e){return e==null?[]:oo(e,lr(e))}function I1(e){return e==null?[]:oo(e,Tr(e))}function Ac(e,t,s){var u=e==null?n:cn(e,t);return u===n?s:u}function x1(e,t){return e!=null&&Pl(e,t,Gy)}function Tc(e,t){return e!=null&&Pl(e,t,Wy)}var P1=vl(function(e,t,s){t!=null&&typeof t.toString!="function"&&(t=Gs.call(t)),e[t]=s},Nc(Dr)),S1=vl(function(e,t,s){t!=null&&typeof t.toString!="function"&&(t=Gs.call(t)),st.call(e,t)?e[t].push(s):e[t]=[s]},Ie),O1=$e(cs);function lr(e){return Ar(e)?Lh(e):rc(e)}function Tr(e){return Ar(e)?Lh(e,!0):nv(e)}function C1(e,t){var s={};return t=Ie(t,3),di(e,function(u,f,g){Ri(s,t(u,f,g),u)}),s}function R1(e,t){var s={};return t=Ie(t,3),di(e,function(u,f,g){Ri(s,f,t(u,f,g))}),s}var A1=Dn(function(e,t,s){ao(e,t,s)}),af=Dn(function(e,t,s,u){ao(e,t,s,u)}),T1=Ti(function(e,t){var s={};if(e==null)return s;var u=!1;t=Pt(t,function(g){return g=Ji(g,e),u||(u=g.length>1),g}),pi(e,yc(e),s),u&&(s=Wr(s,K|Q|ge,Pv));for(var f=t.length;f--;)cc(s,t[f]);return s});function D1(e,t){return cf(e,Io(Ie(t)))}var N1=Ti(function(e,t){return e==null?{}:ov(e,t)});function cf(e,t){if(e==null)return{};var s=Pt(yc(e),function(u){return[u]});return t=Ie(t),Yh(e,s,function(u,f){return t(u,f[0])})}function F1(e,t,s){t=Ji(t,e);var u=-1,f=t.length;for(f||(f=1,e=n);++u<f;){var g=e==null?n:e[gi(t[u])];g===n&&(u=f,g=s),e=Ni(g)?g.call(e):g}return e}function L1(e,t,s){return e==null?e:hs(e,t,s)}function j1(e,t,s,u){return u=typeof u=="function"?u:n,e==null?e:hs(e,t,s,u)}var uf=wl(lr),hf=wl(Tr);function M1(e,t,s){var u=je(e),f=u||Qi(e)||Ln(e);if(t=Ie(t,4),s==null){var g=e&&e.constructor;f?s=u?new g:[]:Ct(e)?s=Ni(g)?Tn(Zs(e)):{}:s={}}return(f?kr:di)(e,function(w,I,D){return t(s,w,I,D)}),s}function z1(e,t){return e==null?!0:cc(e,t)}function q1(e,t,s){return e==null?e:il(e,t,lc(s))}function $1(e,t,s,u){return u=typeof u=="function"?u:n,e==null?e:il(e,t,lc(s),u)}function jn(e){return e==null?[]:Ka(e,lr(e))}function U1(e){return e==null?[]:Ka(e,Tr(e))}function H1(e,t,s){return s===n&&(s=t,t=n),s!==n&&(s=Qr(s),s=s===s?s:0),t!==n&&(t=Qr(t),t=t===t?t:0),an(Qr(e),t,s)}function K1(e,t,s){return t=Fi(t),s===n?(s=t,t=0):s=Fi(s),e=Qr(e),Jy(e,t,s)}function B1(e,t,s){if(s&&typeof s!="boolean"&&Er(e,t,s)&&(t=s=n),s===n&&(typeof t=="boolean"?(s=t,t=n):typeof e=="boolean"&&(s=e,e=n)),e===n&&t===n?(e=0,t=1):(e=Fi(e),t===n?(t=e,e=0):t=Fi(t)),e>t){var u=e;e=t,t=u}if(s||e%1||t%1){var f=Nh();return yr(e+f*(t-e+E0("1e-"+((f+"").length-1))),t)}return sc(e,t)}var k1=Nn(function(e,t,s){return t=t.toLowerCase(),e+(s?lf(t):t)});function lf(e){return Dc(et(e).toLowerCase())}function ff(e){return e=et(e),e&&e.replace(Gg,L0).replace(f0,"")}function V1(e,t,s){e=et(e),t=Mr(t);var u=e.length;s=s===n?u:an(Me(s),0,u);var f=s;return s-=t.length,s>=0&&e.slice(s,f)==t}function G1(e){return e=et(e),e&&Og.test(e)?e.replace(Hu,j0):e}function W1(e){return e=et(e),e&&Ng.test(e)?e.replace(Oa,"\\$&"):e}var J1=Nn(function(e,t,s){return e+(s?"-":"")+t.toLowerCase()}),Z1=Nn(function(e,t,s){return e+(s?" ":"")+t.toLowerCase()}),Q1=pl("toLowerCase");function Y1(e,t,s){e=et(e),t=Me(t);var u=t?Sn(e):0;if(!t||u>=t)return e;var f=(t-u)/2;return po(eo(f),s)+e+po(Xs(f),s)}function X1(e,t,s){e=et(e),t=Me(t);var u=t?Sn(e):0;return t&&u<t?e+po(t-u,s):e}function ew(e,t,s){e=et(e),t=Me(t);var u=t?Sn(e):0;return t&&u<t?po(t-u,s)+e:e}function tw(e,t,s){return s||t==null?t=0:t&&(t=+t),cy(et(e).replace(Ca,""),t||0)}function rw(e,t,s){return(s?Er(e,t,s):t===n)?t=1:t=Me(t),oc(et(e),t)}function iw(){var e=arguments,t=et(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var nw=Nn(function(e,t,s){return e+(s?"_":"")+t.toLowerCase()});function sw(e,t,s){return s&&typeof s!="number"&&Er(e,t,s)&&(t=s=n),s=s===n?fi:s>>>0,s?(e=et(e),e&&(typeof t=="string"||t!=null&&!Rc(t))&&(t=Mr(t),!t&&Pn(e))?Zi(ni(e),0,s):e.split(t,s)):[]}var ow=Nn(function(e,t,s){return e+(s?" ":"")+Dc(t)});function aw(e,t,s){return e=et(e),s=s==null?0:an(Me(s),0,e.length),t=Mr(t),e.slice(s,s+t.length)==t}function cw(e,t,s){var u=p.templateSettings;s&&Er(e,t,s)&&(t=n),e=et(e),t=So({},t,u,bl);var f=So({},t.imports,u.imports,bl),g=lr(f),w=Ka(f,g),I,D,B=0,k=t.interpolate||zs,ee="__p += '",he=ka((t.escape||zs).source+"|"+k.source+"|"+(k===Ku?Ug:zs).source+"|"+(t.evaluate||zs).source+"|$","g"),ye="//# sourceURL="+(st.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++v0+"]")+`
`;e.replace(he,function(Se,Ke,ke,qr,Ir,$r){return ke||(ke=qr),ee+=e.slice(B,$r).replace(Wg,M0),Ke&&(I=!0,ee+=`' +
__e(`+Ke+`) +
'`),Ir&&(D=!0,ee+=`';
`+Ir+`;
__p += '`),ke&&(ee+=`' +
((__t = (`+ke+`)) == null ? '' : __t) +
'`),B=$r+Se.length,Se}),ee+=`';
`;var Pe=st.call(t,"variable")&&t.variable;if(!Pe)ee=`with (obj) {
`+ee+`
}
`;else if(qg.test(Pe))throw new Ne(P);ee=(D?ee.replace(Ig,""):ee).replace(xg,"$1").replace(Pg,"$1;"),ee="function("+(Pe||"obj")+`) {
`+(Pe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(I?", __e = _.escape":"")+(D?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ee+`return __p
}`;var ze=pf(function(){return Ze(g,ye+"return "+ee).apply(n,w)});if(ze.source=ee,Cc(ze))throw ze;return ze}function uw(e){return et(e).toLowerCase()}function hw(e){return et(e).toUpperCase()}function lw(e,t,s){if(e=et(e),e&&(s||t===n))return Eh(e);if(!e||!(t=Mr(t)))return e;var u=ni(e),f=ni(t),g=Ih(u,f),w=xh(u,f)+1;return Zi(u,g,w).join("")}function fw(e,t,s){if(e=et(e),e&&(s||t===n))return e.slice(0,Sh(e)+1);if(!e||!(t=Mr(t)))return e;var u=ni(e),f=xh(u,ni(t))+1;return Zi(u,0,f).join("")}function dw(e,t,s){if(e=et(e),e&&(s||t===n))return e.replace(Ca,"");if(!e||!(t=Mr(t)))return e;var u=ni(e),f=Ih(u,ni(t));return Zi(u,f).join("")}function pw(e,t){var s=ag,u=cg;if(Ct(t)){var f="separator"in t?t.separator:f;s="length"in t?Me(t.length):s,u="omission"in t?Mr(t.omission):u}e=et(e);var g=e.length;if(Pn(e)){var w=ni(e);g=w.length}if(s>=g)return e;var I=s-Sn(u);if(I<1)return u;var D=w?Zi(w,0,I).join(""):e.slice(0,I);if(f===n)return D+u;if(w&&(I+=D.length-I),Rc(f)){if(e.slice(I).search(f)){var B,k=D;for(f.global||(f=ka(f.source,et(Bu.exec(f))+"g")),f.lastIndex=0;B=f.exec(k);)var ee=B.index;D=D.slice(0,ee===n?I:ee)}}else if(e.indexOf(Mr(f),I)!=I){var he=D.lastIndexOf(f);he>-1&&(D=D.slice(0,he))}return D+u}function gw(e){return e=et(e),e&&Sg.test(e)?e.replace(Uu,B0):e}var yw=Nn(function(e,t,s){return e+(s?" ":"")+t.toUpperCase()}),Dc=pl("toUpperCase");function df(e,t,s){return e=et(e),t=s?n:t,t===n?q0(e)?G0(e):A0(e):e.match(t)||[]}var pf=$e(function(e,t){try{return Lr(e,n,t)}catch(s){return Cc(s)?s:new Ne(s)}}),vw=Ti(function(e,t){return kr(t,function(s){s=gi(s),Ri(e,s,Sc(e[s],e))}),e});function mw(e){var t=e==null?0:e.length,s=Ie();return e=t?Pt(e,function(u){if(typeof u[1]!="function")throw new Vr(v);return[s(u[0]),u[1]]}):[],$e(function(u){for(var f=-1;++f<t;){var g=e[f];if(Lr(g[0],this,u))return Lr(g[1],this,u)}})}function _w(e){return By(Wr(e,K))}function Nc(e){return function(){return e}}function ww(e,t){return e==null||e!==e?t:e}var bw=yl(),Ew=yl(!0);function Dr(e){return e}function Fc(e){return Vh(typeof e=="function"?e:Wr(e,K))}function Iw(e){return Wh(Wr(e,K))}function xw(e,t){return Jh(e,Wr(t,K))}var Pw=$e(function(e,t){return function(s){return cs(s,e,t)}}),Sw=$e(function(e,t){return function(s){return cs(e,s,t)}});function Lc(e,t,s){var u=lr(t),f=oo(t,u);s==null&&!(Ct(t)&&(f.length||!u.length))&&(s=t,t=e,e=this,f=oo(t,lr(t)));var g=!(Ct(s)&&"chain"in s)||!!s.chain,w=Ni(e);return kr(f,function(I){var D=t[I];e[I]=D,w&&(e.prototype[I]=function(){var B=this.__chain__;if(g||B){var k=e(this.__wrapped__),ee=k.__actions__=Rr(this.__actions__);return ee.push({func:D,args:arguments,thisArg:e}),k.__chain__=B,k}return D.apply(e,Bi([this.value()],arguments))})}),e}function Ow(){return dr._===this&&(dr._=X0),this}function jc(){}function Cw(e){return e=Me(e),$e(function(t){return Zh(t,e)})}var Rw=dc(Pt),Aw=dc(vh),Tw=dc(za);function gf(e){return wc(e)?qa(gi(e)):av(e)}function Dw(e){return function(t){return e==null?n:cn(e,t)}}var Nw=ml(),Fw=ml(!0);function Mc(){return[]}function zc(){return!1}function Lw(){return{}}function jw(){return""}function Mw(){return!0}function zw(e,t){if(e=Me(e),e<1||e>Hi)return[];var s=fi,u=yr(e,fi);t=Ie(t),e-=fi;for(var f=Ha(u,t);++s<e;)t(s);return f}function qw(e){return je(e)?Pt(e,gi):zr(e)?[e]:Rr(Fl(et(e)))}function $w(e){var t=++Q0;return et(e)+t}var Uw=fo(function(e,t){return e+t},0),Hw=pc("ceil"),Kw=fo(function(e,t){return e/t},1),Bw=pc("floor");function kw(e){return e&&e.length?so(e,Dr,Xa):n}function Vw(e,t){return e&&e.length?so(e,Ie(t,2),Xa):n}function Gw(e){return wh(e,Dr)}function Ww(e,t){return wh(e,Ie(t,2))}function Jw(e){return e&&e.length?so(e,Dr,ic):n}function Zw(e,t){return e&&e.length?so(e,Ie(t,2),ic):n}var Qw=fo(function(e,t){return e*t},1),Yw=pc("round"),Xw=fo(function(e,t){return e-t},0);function eb(e){return e&&e.length?Ua(e,Dr):0}function tb(e,t){return e&&e.length?Ua(e,Ie(t,2)):0}return p.after=I_,p.ary=kl,p.assign=h1,p.assignIn=of,p.assignInWith=So,p.assignWith=l1,p.at=f1,p.before=Vl,p.bind=Sc,p.bindAll=vw,p.bindKey=Gl,p.castArray=L_,p.chain=Hl,p.chunk=Bv,p.compact=kv,p.concat=Vv,p.cond=mw,p.conforms=_w,p.constant=Nc,p.countBy=e_,p.create=d1,p.curry=Wl,p.curryRight=Jl,p.debounce=Zl,p.defaults=p1,p.defaultsDeep=g1,p.defer=x_,p.delay=P_,p.difference=Gv,p.differenceBy=Wv,p.differenceWith=Jv,p.drop=Zv,p.dropRight=Qv,p.dropRightWhile=Yv,p.dropWhile=Xv,p.fill=em,p.filter=r_,p.flatMap=s_,p.flatMapDeep=o_,p.flatMapDepth=a_,p.flatten=zl,p.flattenDeep=tm,p.flattenDepth=rm,p.flip=S_,p.flow=bw,p.flowRight=Ew,p.fromPairs=im,p.functions=E1,p.functionsIn=I1,p.groupBy=c_,p.initial=sm,p.intersection=om,p.intersectionBy=am,p.intersectionWith=cm,p.invert=P1,p.invertBy=S1,p.invokeMap=h_,p.iteratee=Fc,p.keyBy=l_,p.keys=lr,p.keysIn=Tr,p.map=wo,p.mapKeys=C1,p.mapValues=R1,p.matches=Iw,p.matchesProperty=xw,p.memoize=Eo,p.merge=A1,p.mergeWith=af,p.method=Pw,p.methodOf=Sw,p.mixin=Lc,p.negate=Io,p.nthArg=Cw,p.omit=T1,p.omitBy=D1,p.once=O_,p.orderBy=f_,p.over=Rw,p.overArgs=C_,p.overEvery=Aw,p.overSome=Tw,p.partial=Oc,p.partialRight=Ql,p.partition=d_,p.pick=N1,p.pickBy=cf,p.property=gf,p.propertyOf=Dw,p.pull=fm,p.pullAll=$l,p.pullAllBy=dm,p.pullAllWith=pm,p.pullAt=gm,p.range=Nw,p.rangeRight=Fw,p.rearg=R_,p.reject=y_,p.remove=ym,p.rest=A_,p.reverse=xc,p.sampleSize=m_,p.set=L1,p.setWith=j1,p.shuffle=__,p.slice=vm,p.sortBy=E_,p.sortedUniq=xm,p.sortedUniqBy=Pm,p.split=sw,p.spread=T_,p.tail=Sm,p.take=Om,p.takeRight=Cm,p.takeRightWhile=Rm,p.takeWhile=Am,p.tap=km,p.throttle=D_,p.thru=_o,p.toArray=rf,p.toPairs=uf,p.toPairsIn=hf,p.toPath=qw,p.toPlainObject=sf,p.transform=M1,p.unary=N_,p.union=Tm,p.unionBy=Dm,p.unionWith=Nm,p.uniq=Fm,p.uniqBy=Lm,p.uniqWith=jm,p.unset=z1,p.unzip=Pc,p.unzipWith=Ul,p.update=q1,p.updateWith=$1,p.values=jn,p.valuesIn=U1,p.without=Mm,p.words=df,p.wrap=F_,p.xor=zm,p.xorBy=qm,p.xorWith=$m,p.zip=Um,p.zipObject=Hm,p.zipObjectDeep=Km,p.zipWith=Bm,p.entries=uf,p.entriesIn=hf,p.extend=of,p.extendWith=So,Lc(p,p),p.add=Uw,p.attempt=pf,p.camelCase=k1,p.capitalize=lf,p.ceil=Hw,p.clamp=H1,p.clone=j_,p.cloneDeep=z_,p.cloneDeepWith=q_,p.cloneWith=M_,p.conformsTo=$_,p.deburr=ff,p.defaultTo=ww,p.divide=Kw,p.endsWith=V1,p.eq=oi,p.escape=G1,p.escapeRegExp=W1,p.every=t_,p.find=i_,p.findIndex=jl,p.findKey=y1,p.findLast=n_,p.findLastIndex=Ml,p.findLastKey=v1,p.floor=Bw,p.forEach=Kl,p.forEachRight=Bl,p.forIn=m1,p.forInRight=_1,p.forOwn=w1,p.forOwnRight=b1,p.get=Ac,p.gt=U_,p.gte=H_,p.has=x1,p.hasIn=Tc,p.head=ql,p.identity=Dr,p.includes=u_,p.indexOf=nm,p.inRange=K1,p.invoke=O1,p.isArguments=ln,p.isArray=je,p.isArrayBuffer=K_,p.isArrayLike=Ar,p.isArrayLikeObject=Ut,p.isBoolean=B_,p.isBuffer=Qi,p.isDate=k_,p.isElement=V_,p.isEmpty=G_,p.isEqual=W_,p.isEqualWith=J_,p.isError=Cc,p.isFinite=Z_,p.isFunction=Ni,p.isInteger=Yl,p.isLength=xo,p.isMap=Xl,p.isMatch=Q_,p.isMatchWith=Y_,p.isNaN=X_,p.isNative=e1,p.isNil=r1,p.isNull=t1,p.isNumber=ef,p.isObject=Ct,p.isObjectLike=Ft,p.isPlainObject=ps,p.isRegExp=Rc,p.isSafeInteger=i1,p.isSet=tf,p.isString=Po,p.isSymbol=zr,p.isTypedArray=Ln,p.isUndefined=n1,p.isWeakMap=s1,p.isWeakSet=o1,p.join=um,p.kebabCase=J1,p.last=Zr,p.lastIndexOf=hm,p.lowerCase=Z1,p.lowerFirst=Q1,p.lt=a1,p.lte=c1,p.max=kw,p.maxBy=Vw,p.mean=Gw,p.meanBy=Ww,p.min=Jw,p.minBy=Zw,p.stubArray=Mc,p.stubFalse=zc,p.stubObject=Lw,p.stubString=jw,p.stubTrue=Mw,p.multiply=Qw,p.nth=lm,p.noConflict=Ow,p.noop=jc,p.now=bo,p.pad=Y1,p.padEnd=X1,p.padStart=ew,p.parseInt=tw,p.random=B1,p.reduce=p_,p.reduceRight=g_,p.repeat=rw,p.replace=iw,p.result=F1,p.round=Yw,p.runInContext=T,p.sample=v_,p.size=w_,p.snakeCase=nw,p.some=b_,p.sortedIndex=mm,p.sortedIndexBy=_m,p.sortedIndexOf=wm,p.sortedLastIndex=bm,p.sortedLastIndexBy=Em,p.sortedLastIndexOf=Im,p.startCase=ow,p.startsWith=aw,p.subtract=Xw,p.sum=eb,p.sumBy=tb,p.template=cw,p.times=zw,p.toFinite=Fi,p.toInteger=Me,p.toLength=nf,p.toLower=uw,p.toNumber=Qr,p.toSafeInteger=u1,p.toString=et,p.toUpper=hw,p.trim=lw,p.trimEnd=fw,p.trimStart=dw,p.truncate=pw,p.unescape=gw,p.uniqueId=$w,p.upperCase=yw,p.upperFirst=Dc,p.each=Kl,p.eachRight=Bl,p.first=ql,Lc(p,function(){var e={};return di(p,function(t,s){st.call(p.prototype,s)||(e[s]=t)}),e}(),{chain:!1}),p.VERSION=o,kr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){p[e].placeholder=p}),kr(["drop","take"],function(e,t){Be.prototype[e]=function(s){s=s===n?1:or(Me(s),0);var u=this.__filtered__&&!t?new Be(this):this.clone();return u.__filtered__?u.__takeCount__=yr(s,u.__takeCount__):u.__views__.push({size:yr(s,fi),type:e+(u.__dir__<0?"Right":"")}),u},Be.prototype[e+"Right"]=function(s){return this.reverse()[e](s).reverse()}}),kr(["filter","map","takeWhile"],function(e,t){var s=t+1,u=s==zu||s==fg;Be.prototype[e]=function(f){var g=this.clone();return g.__iteratees__.push({iteratee:Ie(f,3),type:s}),g.__filtered__=g.__filtered__||u,g}}),kr(["head","last"],function(e,t){var s="take"+(t?"Right":"");Be.prototype[e]=function(){return this[s](1).value()[0]}}),kr(["initial","tail"],function(e,t){var s="drop"+(t?"":"Right");Be.prototype[e]=function(){return this.__filtered__?new Be(this):this[s](1)}}),Be.prototype.compact=function(){return this.filter(Dr)},Be.prototype.find=function(e){return this.filter(e).head()},Be.prototype.findLast=function(e){return this.reverse().find(e)},Be.prototype.invokeMap=$e(function(e,t){return typeof e=="function"?new Be(this):this.map(function(s){return cs(s,e,t)})}),Be.prototype.reject=function(e){return this.filter(Io(Ie(e)))},Be.prototype.slice=function(e,t){e=Me(e);var s=this;return s.__filtered__&&(e>0||t<0)?new Be(s):(e<0?s=s.takeRight(-e):e&&(s=s.drop(e)),t!==n&&(t=Me(t),s=t<0?s.dropRight(-t):s.take(t-e)),s)},Be.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Be.prototype.toArray=function(){return this.take(fi)},di(Be.prototype,function(e,t){var s=/^(?:filter|find|map|reject)|While$/.test(t),u=/^(?:head|last)$/.test(t),f=p[u?"take"+(t=="last"?"Right":""):t],g=u||/^find/.test(t);f&&(p.prototype[t]=function(){var w=this.__wrapped__,I=u?[1]:arguments,D=w instanceof Be,B=I[0],k=D||je(w),ee=function(Ke){var ke=f.apply(p,Bi([Ke],I));return u&&he?ke[0]:ke};k&&s&&typeof B=="function"&&B.length!=1&&(D=k=!1);var he=this.__chain__,ye=!!this.__actions__.length,Pe=g&&!he,ze=D&&!ye;if(!g&&k){w=ze?w:new Be(this);var Se=e.apply(w,I);return Se.__actions__.push({func:_o,args:[ee],thisArg:n}),new Gr(Se,he)}return Pe&&ze?e.apply(this,I):(Se=this.thru(ee),Pe?u?Se.value()[0]:Se.value():Se)})}),kr(["pop","push","shift","sort","splice","unshift"],function(e){var t=Bs[e],s=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",u=/^(?:pop|shift)$/.test(e);p.prototype[e]=function(){var f=arguments;if(u&&!this.__chain__){var g=this.value();return t.apply(je(g)?g:[],f)}return this[s](function(w){return t.apply(je(w)?w:[],f)})}}),di(Be.prototype,function(e,t){var s=p[t];if(s){var u=s.name+"";st.call(An,u)||(An[u]=[]),An[u].push({name:t,func:s})}}),An[lo(n,Ve).name]=[{name:"wrapper",func:n}],Be.prototype.clone=gy,Be.prototype.reverse=yy,Be.prototype.value=vy,p.prototype.at=Vm,p.prototype.chain=Gm,p.prototype.commit=Wm,p.prototype.next=Jm,p.prototype.plant=Qm,p.prototype.reverse=Ym,p.prototype.toJSON=p.prototype.valueOf=p.prototype.value=Xm,p.prototype.first=p.prototype.head,ts&&(p.prototype[ts]=Zm),p},On=W0();rn?((rn.exports=On)._=On,Fa._=On):dr._=On}).call(kn)})(ua,ua.exports);var xp=Object.defineProperty,Pp=Object.defineProperties,Sp=Object.getOwnPropertyDescriptors,Cu=Object.getOwnPropertySymbols,Op=Object.prototype.hasOwnProperty,Cp=Object.prototype.propertyIsEnumerable,Ru=(l,r,n)=>r in l?xp(l,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):l[r]=n,As=(l,r)=>{for(var n in r||(r={}))Op.call(r,n)&&Ru(l,n,r[n]);if(Cu)for(var n of Cu(r))Cp.call(r,n)&&Ru(l,n,r[n]);return l},Rp=(l,r)=>Pp(l,Sp(r));function $i(l,r,n){var o;const a=(0,y.DQ)(l);return((o=r.rpcMap)==null?void 0:o[a.reference])||`${Ip}?chainId=${a.namespace}:${a.reference}&projectId=${n}`}function en(l){return l.includes(":")?l.split(":")[1]:l}function Au(l){return l.map(r=>`${r.split(":")[0]}:${r.split(":")[1]}`)}function Ap(l,r){const n=Object.keys(r.namespaces).filter(a=>a.includes(l));if(!n.length)return[];const o=[];return n.forEach(a=>{const d=r.namespaces[a].accounts;o.push(...d)}),o}function Tp(l={},r={}){const n=Tu(l),o=Tu(r);return ua.exports.merge(n,o)}function Tu(l){var r,n,o,a;const d={};if(!(0,y.L5)(l))return d;for(const[v,P]of Object.entries(l)){const j=(0,y.gp)(v)?[v]:P.chains,x=P.methods||[],M=P.events||[],K=P.rpcMap||{},Q=(0,y.M)(v);d[Q]=Rp(As(As({},d[Q]),P),{chains:(0,y.eG)(j,(r=d[Q])==null?void 0:r.chains),methods:(0,y.eG)(x,(n=d[Q])==null?void 0:n.methods),events:(0,y.eG)(M,(o=d[Q])==null?void 0:o.events),rpcMap:As(As({},K),(a=d[Q])==null?void 0:a.rpcMap)})}return d}function Dp(l){return l.includes(":")?l.split(":")[2]:l}function Np(l){const r={};for(const[n,o]of Object.entries(l)){const a=o.methods||[],d=o.events||[],v=o.accounts||[],P=(0,y.gp)(n)?[n]:o.chains?o.chains:Au(o.accounts);r[n]={chains:P,methods:a,events:d,accounts:v}}return r}function ha(l){return typeof l=="number"?l:l.includes("0x")?parseInt(l,16):l.includes(":")?Number(l.split(":")[1]):Number(l)}const Du={},It=l=>Du[l],la=(l,r)=>{Du[l]=r};class Fp{constructor(r){this.name="polkadot",this.namespace=r.namespace,this.events=It("events"),this.client=It("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,n){this.httpProviders[r]||this.setHttpProvider(r,n),this.chainId=r,this.events.emit(Pi.DEFAULT_CHAIN_CHANGED,`${this.name}:${r}`)}getAccounts(){const r=this.namespace.accounts;return r?r.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const r={};return this.namespace.chains.forEach(n=>{var o;const a=en(n);r[a]=this.createHttpProvider(a,(o=this.namespace.rpcMap)==null?void 0:o[n])}),r}getHttpProvider(){const r=`${this.name}:${this.chainId}`,n=this.httpProviders[r];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return n}setHttpProvider(r,n){const o=this.createHttpProvider(r,n);o&&(this.httpProviders[r]=o)}createHttpProvider(r,n){const o=n||$i(r,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${r}`);return new Hr.r(new qi.Z(o,It("disableProviderPing")))}}class Lp{constructor(r){this.name="eip155",this.namespace=r.namespace,this.events=It("events"),this.client=It("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(r){switch(r.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(r);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(r.request.method)?await this.client.request(r):this.getHttpProvider().request(r.request)}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}setDefaultChain(r,n){this.httpProviders[r]||this.setHttpProvider(parseInt(r),n),this.chainId=parseInt(r),this.events.emit(Pi.DEFAULT_CHAIN_CHANGED,`${this.name}:${r}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}createHttpProvider(r,n){const o=n||$i(`${this.name}:${r}`,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${r}`);return new Hr.r(new qi.k(o,It("disableProviderPing")))}setHttpProvider(r,n){const o=this.createHttpProvider(r,n);o&&(this.httpProviders[r]=o)}createHttpProviders(){const r={};return this.namespace.chains.forEach(n=>{var o;const a=parseInt(en(n));r[a]=this.createHttpProvider(a,(o=this.namespace.rpcMap)==null?void 0:o[n])}),r}getAccounts(){const r=this.namespace.accounts;return r?[...new Set(r.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const r=this.chainId,n=this.httpProviders[r];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return n}async handleSwitchChain(r){var n,o;let a=r.request.params?(n=r.request.params[0])==null?void 0:n.chainId:"0x0";a=a.startsWith("0x")?a:`0x${a}`;const d=parseInt(a,16);if(this.isChainApproved(d))this.setDefaultChain(`${d}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:r.topic,request:{method:r.request.method,params:[{chainId:a}]},chainId:(o=this.namespace.chains)==null?void 0:o[0]}),this.setDefaultChain(`${d}`);else throw new Error(`Failed to switch to chain 'eip155:${d}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(r){return this.namespace.chains.includes(`${this.name}:${r}`)}}class jp{constructor(r){this.name="solana",this.namespace=r.namespace,this.events=It("events"),this.client=It("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,n){this.httpProviders[r]||this.setHttpProvider(r,n),this.chainId=r,this.events.emit(Pi.DEFAULT_CHAIN_CHANGED,`${this.name}:${r}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}getAccounts(){const r=this.namespace.accounts;return r?[...new Set(r.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const r={};return this.namespace.chains.forEach(n=>{var o;const a=en(n);r[a]=this.createHttpProvider(a,(o=this.namespace.rpcMap)==null?void 0:o[n])}),r}getHttpProvider(){const r=`${this.name}:${this.chainId}`,n=this.httpProviders[r];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return n}setHttpProvider(r,n){const o=this.createHttpProvider(r,n);o&&(this.httpProviders[r]=o)}createHttpProvider(r,n){const o=n||$i(r,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${r}`);return new Hr.r(new qi.Z(o,It("disableProviderPing")))}}class Mp{constructor(r){this.name="cosmos",this.namespace=r.namespace,this.events=It("events"),this.client=It("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,n){this.httpProviders[r]||this.setHttpProvider(r,n),this.chainId=r,this.events.emit(Pi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const r=this.namespace.accounts;return r?[...new Set(r.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const r={};return this.namespace.chains.forEach(n=>{var o;const a=en(n);r[a]=this.createHttpProvider(a,(o=this.namespace.rpcMap)==null?void 0:o[n])}),r}getHttpProvider(){const r=`${this.name}:${this.chainId}`,n=this.httpProviders[r];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return n}setHttpProvider(r,n){const o=this.createHttpProvider(r,n);o&&(this.httpProviders[r]=o)}createHttpProvider(r,n){const o=n||$i(r,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${r}`);return new Hr.r(new qi.Z(o,It("disableProviderPing")))}}class zp{constructor(r){this.name="cip34",this.namespace=r.namespace,this.events=It("events"),this.client=It("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,n){this.httpProviders[r]||this.setHttpProvider(r,n),this.chainId=r,this.events.emit(Pi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const r=this.namespace.accounts;return r?[...new Set(r.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const r={};return this.namespace.chains.forEach(n=>{const o=this.getCardanoRPCUrl(n),a=en(n);r[a]=this.createHttpProvider(a,o)}),r}getHttpProvider(){const r=`${this.name}:${this.chainId}`,n=this.httpProviders[r];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return n}getCardanoRPCUrl(r){const n=this.namespace.rpcMap;if(n)return n[r]}setHttpProvider(r,n){const o=this.createHttpProvider(r,n);o&&(this.httpProviders[r]=o)}createHttpProvider(r,n){const o=n||this.getCardanoRPCUrl(r);if(!o)throw new Error(`No RPC url provided for chainId: ${r}`);return new Hr.r(new qi.Z(o,It("disableProviderPing")))}}class qp{constructor(r){this.name="elrond",this.namespace=r.namespace,this.events=It("events"),this.client=It("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,n){this.httpProviders[r]||this.setHttpProvider(r,n),this.chainId=r,this.events.emit(Pi.DEFAULT_CHAIN_CHANGED,`${this.name}:${r}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}getAccounts(){const r=this.namespace.accounts;return r?[...new Set(r.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const r={};return this.namespace.chains.forEach(n=>{var o;const a=en(n);r[a]=this.createHttpProvider(a,(o=this.namespace.rpcMap)==null?void 0:o[n])}),r}getHttpProvider(){const r=`${this.name}:${this.chainId}`,n=this.httpProviders[r];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return n}setHttpProvider(r,n){const o=this.createHttpProvider(r,n);o&&(this.httpProviders[r]=o)}createHttpProvider(r,n){const o=n||$i(r,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${r}`);return new Hr.r(new qi.Z(o,It("disableProviderPing")))}}class $p{constructor(r){this.name="multiversx",this.namespace=r.namespace,this.events=It("events"),this.client=It("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,n){this.httpProviders[r]||this.setHttpProvider(r,n),this.chainId=r,this.events.emit(Pi.DEFAULT_CHAIN_CHANGED,`${this.name}:${r}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}getAccounts(){const r=this.namespace.accounts;return r?[...new Set(r.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const r={};return this.namespace.chains.forEach(n=>{var o;const a=en(n);r[a]=this.createHttpProvider(a,(o=this.namespace.rpcMap)==null?void 0:o[n])}),r}getHttpProvider(){const r=`${this.name}:${this.chainId}`,n=this.httpProviders[r];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return n}setHttpProvider(r,n){const o=this.createHttpProvider(r,n);o&&(this.httpProviders[r]=o)}createHttpProvider(r,n){const o=n||$i(r,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${r}`);return new Hr.r(new qi.Z(o,It("disableProviderPing")))}}class Up{constructor(r){this.name="near",this.namespace=r.namespace,this.events=It("events"),this.client=It("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(r){this.namespace=Object.assign(this.namespace,r)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const r=this.namespace.chains[0];if(!r)throw new Error("ChainId not found");return r.split(":")[1]}request(r){return this.namespace.methods.includes(r.request.method)?this.client.request(r):this.getHttpProvider().request(r.request)}setDefaultChain(r,n){if(this.chainId=r,!this.httpProviders[r]){const o=n||$i(`${this.name}:${r}`,this.namespace);if(!o)throw new Error(`No RPC url provided for chainId: ${r}`);this.setHttpProvider(r,o)}this.events.emit(Pi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const r=this.namespace.accounts;return r?r.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const r={};return this.namespace.chains.forEach(n=>{var o;r[n]=this.createHttpProvider(n,(o=this.namespace.rpcMap)==null?void 0:o[n])}),r}getHttpProvider(){const r=`${this.name}:${this.chainId}`,n=this.httpProviders[r];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${r} not found`);return n}setHttpProvider(r,n){const o=this.createHttpProvider(r,n);o&&(this.httpProviders[r]=o)}createHttpProvider(r,n){const o=n||$i(r,this.namespace);return typeof o>"u"?void 0:new Hr.r(new qi.Z(o,It("disableProviderPing")))}}var Hp=Object.defineProperty,Kp=Object.defineProperties,Bp=Object.getOwnPropertyDescriptors,Nu=Object.getOwnPropertySymbols,kp=Object.prototype.hasOwnProperty,Vp=Object.prototype.propertyIsEnumerable,Fu=(l,r,n)=>r in l?Hp(l,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):l[r]=n,Ts=(l,r)=>{for(var n in r||(r={}))kp.call(r,n)&&Fu(l,n,r[n]);if(Nu)for(var n of Nu(r))Vp.call(r,n)&&Fu(l,n,r[n]);return l},fa=(l,r)=>Kp(l,Bp(r));class da{constructor(r){this.events=new(_e()),this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=r,this.logger=typeof(r==null?void 0:r.logger)<"u"&&typeof(r==null?void 0:r.logger)!="string"?r.logger:(0,Ee.pino)((0,Ee.getDefaultLoggerOptions)({level:(r==null?void 0:r.logger)||Su})),this.disableProviderPing=(r==null?void 0:r.disableProviderPing)||!1}static async init(r){const n=new da(r);return await n.initialize(),n}async request(r,n){const[o,a]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(o).request({request:Ts({},r),chainId:`${o}:${a}`,topic:this.session.topic})}sendAsync(r,n,o){const a=new Date().getTime();this.request(r,o).then(d=>n(null,(0,De.formatJsonRpcResult)(a,d))).catch(d=>n(d,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var r;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(r=this.session)==null?void 0:r.topic,reason:(0,y.D6)("USER_DISCONNECTED")}),await this.cleanup()}async connect(r){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(r),await this.cleanupPendingPairings(),!r.skipPairing)return await this.pair(r.pairingTopic)}on(r,n){this.events.on(r,n)}once(r,n){this.events.once(r,n)}removeListener(r,n){this.events.removeListener(r,n)}off(r,n){this.events.off(r,n)}get isWalletConnect(){return!0}async pair(r){this.shouldAbortPairingAttempt=!1;let n=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(n>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:o,approval:a}=await this.client.connect({pairingTopic:r,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});o&&(this.uri=o,this.events.emit("display_uri",o)),await a().then(d=>{this.session=d,this.namespaces||(this.namespaces=Np(d.namespaces),this.persist("namespaces",this.namespaces))}).catch(d=>{if(d.message!==Iu)throw d;n++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(r,n){try{if(!this.session)return;const[o,a]=this.validateChain(r);this.getProvider(o).setDefaultChain(a,n)}catch(o){if(!/Please call connect/.test(o.message))throw o}}async cleanupPendingPairings(r={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if((0,y.qt)(n)){for(const o of n)r.deletePairings?this.client.core.expirer.set(o.topic,0):await this.client.core.relayer.subscriber.unsubscribe(o.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const r=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[r]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await ca.init({logger:this.providerOpts.logger||Su,relayUrl:this.providerOpts.relayUrl||wp,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const r=[...new Set(Object.keys(this.session.namespaces).map(n=>(0,y.M)(n)))];la("client",this.client),la("events",this.events),la("disableProviderPing",this.disableProviderPing),r.forEach(n=>{if(!this.session)return;const o=Ap(n,this.session),a=Au(o),d=Tp(this.namespaces,this.optionalNamespaces),v=fa(Ts({},d[n]),{accounts:o,chains:a});switch(n){case"eip155":this.rpcProviders[n]=new Lp({namespace:v});break;case"solana":this.rpcProviders[n]=new jp({namespace:v});break;case"cosmos":this.rpcProviders[n]=new Mp({namespace:v});break;case"polkadot":this.rpcProviders[n]=new Fp({namespace:v});break;case"cip34":this.rpcProviders[n]=new zp({namespace:v});break;case"elrond":this.rpcProviders[n]=new qp({namespace:v});break;case"multiversx":this.rpcProviders[n]=new $p({namespace:v});break;case"near":this.rpcProviders[n]=new Up({namespace:v});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",r=>{this.events.emit("session_ping",r)}),this.client.on("session_event",r=>{const{params:n}=r,{event:o}=n;if(o.name==="accountsChanged"){const a=o.data;a&&(0,y.qt)(a)&&this.events.emit("accountsChanged",a.map(Dp))}else if(o.name==="chainChanged"){const a=n.chainId,d=n.event.data,v=(0,y.M)(a),P=ha(a)!==ha(d)?`${v}:${ha(d)}`:a;this.onChainChanged(P)}else this.events.emit(o.name,o.data);this.events.emit("session_event",r)}),this.client.on("session_update",({topic:r,params:n})=>{var o;const{namespaces:a}=n,d=(o=this.client)==null?void 0:o.session.get(r);this.session=fa(Ts({},d),{namespaces:a}),this.onSessionUpdate(),this.events.emit("session_update",{topic:r,params:n})}),this.client.on("session_delete",async r=>{await this.cleanup(),this.events.emit("session_delete",r),this.events.emit("disconnect",fa(Ts({},(0,y.D6)("USER_DISCONNECTED")),{data:r.topic}))}),this.on(Pi.DEFAULT_CHAIN_CHANGED,r=>{this.onChainChanged(r,!0)})}getProvider(r){if(!this.rpcProviders[r])throw new Error(`Provider not found: ${r}`);return this.rpcProviders[r]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(r=>{var n;this.getProvider(r).updateNamespace((n=this.session)==null?void 0:n.namespaces[r])})}setNamespaces(r){const{namespaces:n,optionalNamespaces:o,sessionProperties:a}=r;n&&Object.keys(n).length&&(this.namespaces=n),o&&Object.keys(o).length&&(this.optionalNamespaces=o),this.sessionProperties=a,this.persist("namespaces",n),this.persist("optionalNamespaces",o)}validateChain(r){const[n,o]=(r==null?void 0:r.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,o];if(n&&!Object.keys(this.namespaces||{}).map(v=>(0,y.M)(v)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&o)return[n,o];const a=(0,y.M)(Object.keys(this.namespaces)[0]),d=this.rpcProviders[a].getDefaultChain();return[a,d]}async requestAccounts(){const[r]=this.validateChain();return await this.getProvider(r).requestAccounts()}onChainChanged(r,n=!1){var o;if(!this.namespaces)return;const[a,d]=this.validateChain(r);n||this.getProvider(a).setDefaultChain(d),((o=this.namespaces[a])!=null?o:this.namespaces[`${a}:${d}`]).defaultChain=d,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",d)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(r,n){this.client.core.storage.setItem(`${Ou}/${r}`,n)}async getFromStore(r){return await this.client.core.storage.getItem(`${Ou}/${r}`)}}const Gp=da,Wp="wc",Jp="ethereum_provider",Zp=`${Wp}@2:${Jp}:`,Qp="https://rpc.walletconnect.com/v1/",pa=["eth_sendTransaction","personal_sign"],Yp=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],ga=["chainChanged","accountsChanged"],Xp=["chainChanged","accountsChanged","message","disconnect","connect"];var eg=Object.defineProperty,tg=Object.defineProperties,rg=Object.getOwnPropertyDescriptors,Lu=Object.getOwnPropertySymbols,ig=Object.prototype.hasOwnProperty,ng=Object.prototype.propertyIsEnumerable,ju=(l,r,n)=>r in l?eg(l,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):l[r]=n,Vn=(l,r)=>{for(var n in r||(r={}))ig.call(r,n)&&ju(l,n,r[n]);if(Lu)for(var n of Lu(r))ng.call(r,n)&&ju(l,n,r[n]);return l},Mu=(l,r)=>tg(l,rg(r));function Ds(l){return Number(l[0].split(":")[1])}function ya(l){return`0x${l.toString(16)}`}function sg(l){const{chains:r,optionalChains:n,methods:o,optionalMethods:a,events:d,optionalEvents:v,rpcMap:P}=l;if(!(0,y.qt)(r))throw new Error("Invalid chains");const j={chains:r,methods:o||pa,events:d||ga,rpcMap:Vn({},r.length?{[Ds(r)]:P[Ds(r)]}:{})},x=d==null?void 0:d.filter(ge=>!ga.includes(ge)),M=o==null?void 0:o.filter(ge=>!pa.includes(ge));if(!n&&!v&&!a&&!(x!=null&&x.length)&&!(M!=null&&M.length))return{required:r.length?j:void 0};const K=(x==null?void 0:x.length)&&(M==null?void 0:M.length)||!n,Q={chains:[...new Set(K?j.chains.concat(n||[]):n)],methods:[...new Set(j.methods.concat(a!=null&&a.length?a:Yp))],events:[...new Set(j.events.concat(v!=null&&v.length?v:Xp))],rpcMap:P};return{required:r.length?j:void 0,optional:n.length?Q:void 0}}class va{constructor(){this.events=new se.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=Zp,this.on=(r,n)=>(this.events.on(r,n),this),this.once=(r,n)=>(this.events.once(r,n),this),this.removeListener=(r,n)=>(this.events.removeListener(r,n),this),this.off=(r,n)=>(this.events.off(r,n),this),this.parseAccount=r=>this.isCompatibleChainId(r)?this.parseAccountId(r).address:r,this.signer={},this.rpc={}}static async init(r){const n=new va;return await n.initialize(r),n}async request(r){return await this.signer.request(r,this.formatChainId(this.chainId))}sendAsync(r,n){this.signer.sendAsync(r,n,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(r){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(r);const{required:n,optional:o}=sg(this.rpc);try{const a=await new Promise(async(v,P)=>{var j;this.rpc.showQrModal&&((j=this.modal)==null||j.subscribeModal(x=>{!x.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),P(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(Mu(Vn({namespaces:Vn({},n&&{[this.namespace]:n})},o&&{optionalNamespaces:{[this.namespace]:o}}),{pairingTopic:r==null?void 0:r.pairingTopic})).then(x=>{v(x)}).catch(x=>{P(new Error(x.message))})});if(!a)return;const d=(0,y.gu)(a.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:d),this.setAccounts(d),this.events.emit("connect",{chainId:ya(this.chainId)})}catch(a){throw this.signer.logger.error(a),a}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",r=>{const{params:n}=r,{event:o}=n;o.name==="accountsChanged"?(this.accounts=this.parseAccounts(o.data),this.events.emit("accountsChanged",this.accounts)):o.name==="chainChanged"?this.setChainId(this.formatChainId(o.data)):this.events.emit(o.name,o.data),this.events.emit("session_event",r)}),this.signer.on("chainChanged",r=>{const n=parseInt(r);this.chainId=n,this.events.emit("chainChanged",ya(this.chainId)),this.persist()}),this.signer.on("session_update",r=>{this.events.emit("session_update",r)}),this.signer.on("session_delete",r=>{this.reset(),this.events.emit("session_delete",r),this.events.emit("disconnect",Mu(Vn({},(0,y.D6)("USER_DISCONNECTED")),{data:r.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",r=>{var n,o;this.rpc.showQrModal&&((n=this.modal)==null||n.closeModal(),(o=this.modal)==null||o.openModal({uri:r})),this.events.emit("display_uri",r)})}switchEthereumChain(r){this.request({method:"wallet_switchEthereumChain",params:[{chainId:r.toString(16)}]})}isCompatibleChainId(r){return typeof r=="string"?r.startsWith(`${this.namespace}:`):!1}formatChainId(r){return`${this.namespace}:${r}`}parseChainId(r){return Number(r.split(":")[1])}setChainIds(r){const n=r.filter(o=>this.isCompatibleChainId(o)).map(o=>this.parseChainId(o));n.length&&(this.chainId=n[0],this.events.emit("chainChanged",ya(this.chainId)),this.persist())}setChainId(r){if(this.isCompatibleChainId(r)){const n=this.parseChainId(r);this.chainId=n,this.switchEthereumChain(n)}}parseAccountId(r){const[n,o,a]=r.split(":");return{chainId:`${n}:${o}`,address:a}}setAccounts(r){this.accounts=r.filter(n=>this.parseChainId(this.parseAccountId(n).chainId)===this.chainId).map(n=>this.parseAccountId(n).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(r){var n,o;const a=(n=r==null?void 0:r.chains)!=null?n:[],d=(o=r==null?void 0:r.optionalChains)!=null?o:[],v=a.concat(d);if(!v.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const P=a.length?(r==null?void 0:r.methods)||pa:[],j=a.length?(r==null?void 0:r.events)||ga:[],x=(r==null?void 0:r.optionalMethods)||[],M=(r==null?void 0:r.optionalEvents)||[],K=(r==null?void 0:r.rpcMap)||this.buildRpcMap(v,r.projectId),Q=(r==null?void 0:r.qrModalOptions)||void 0;return{chains:a==null?void 0:a.map(ge=>this.formatChainId(ge)),optionalChains:d.map(ge=>this.formatChainId(ge)),methods:P,events:j,optionalMethods:x,optionalEvents:M,rpcMap:K,showQrModal:!!(r!=null&&r.showQrModal),qrModalOptions:Q,projectId:r.projectId,metadata:r.metadata}}buildRpcMap(r,n){const o={};return r.forEach(a=>{o[a]=this.getRpcUrl(a,n)}),o}async initialize(r){if(this.rpc=this.getRpcConfig(r),this.chainId=this.rpc.chains.length?Ds(this.rpc.chains):Ds(this.rpc.optionalChains),this.signer=await Gp.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:r.disableProviderPing,relayUrl:r.relayUrl,storageOptions:r.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let n;try{const{WalletConnectModal:o}=await Y.e(9343).then(Y.bind(Y,59343));n=o}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(n)try{this.modal=new n(Vn({projectId:this.rpc.projectId},this.rpc.qrModalOptions))}catch(o){throw this.signer.logger.error(o),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(r){if(!r)return;const{chains:n,optionalChains:o,rpcMap:a}=r;n&&(0,y.qt)(n)&&(this.rpc.chains=n.map(d=>this.formatChainId(d)),n.forEach(d=>{this.rpc.rpcMap[d]=(a==null?void 0:a[d])||this.getRpcUrl(d)})),o&&(0,y.qt)(o)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=o==null?void 0:o.map(d=>this.formatChainId(d)),o.forEach(d=>{this.rpc.rpcMap[d]=(a==null?void 0:a[d])||this.getRpcUrl(d)}))}getRpcUrl(r,n){var o;return((o=this.rpc.rpcMap)==null?void 0:o[r])||`${Qp}?chainId=eip155:${r}&projectId=${n||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const r=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),n=this.session.namespaces[`${this.namespace}:${r}`]?this.session.namespaces[`${this.namespace}:${r}`]:this.session.namespaces[this.namespace];this.setChainIds(r?[this.formatChainId(r)]:n==null?void 0:n.accounts),this.setAccounts(n==null?void 0:n.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(r){return typeof r=="string"||r instanceof String?[this.parseAccount(r)]:r.map(n=>this.parseAccount(n))}}const og=va},38200:function(tt,te,Y){"use strict";Y.d(te,{q:function(){return se}});class se{}},30997:function(tt,te,Y){"use strict";Y.r(te),Y.d(te,{IEvents:function(){return se.q}});var se=Y(38200)},32568:function(tt,te,Y){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.HEARTBEAT_EVENTS=te.HEARTBEAT_INTERVAL=void 0;const se=Y(66736);te.HEARTBEAT_INTERVAL=se.FIVE_SECONDS,te.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"}},20426:function(tt,te,Y){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),Y(57875).__exportStar(Y(32568),te)},38969:function(tt,te,Y){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.HeartBeat=void 0;const se=Y(57875),_e=Y(17187),y=Y(66736),ot=Y(1614),re=Y(20426);class Oe extends ot.IHeartBeat{constructor(ie){super(ie),this.events=new _e.EventEmitter,this.interval=re.HEARTBEAT_INTERVAL,this.interval=(ie==null?void 0:ie.interval)||re.HEARTBEAT_INTERVAL}static init(ie){return se.__awaiter(this,void 0,void 0,function*(){const ne=new Oe(ie);return yield ne.init(),ne})}init(){return se.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(ie,ne){this.events.on(ie,ne)}once(ie,ne){this.events.once(ie,ne)}off(ie,ne){this.events.off(ie,ne)}removeListener(ie,ne){this.events.removeListener(ie,ne)}initialize(){return se.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),y.toMiliseconds(this.interval))})}pulse(){this.events.emit(re.HEARTBEAT_EVENTS.pulse)}}te.HeartBeat=Oe},90772:function(tt,te,Y){"use strict";Object.defineProperty(te,"__esModule",{value:!0});const se=Y(57875);se.__exportStar(Y(38969),te),se.__exportStar(Y(1614),te),se.__exportStar(Y(20426),te)},44174:function(tt,te,Y){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.IHeartBeat=void 0;const se=Y(30997);class _e extends se.IEvents{constructor(ot){super()}}te.IHeartBeat=_e},1614:function(tt,te,Y){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),Y(57875).__exportStar(Y(44174),te)},65727:function(tt,te){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.PINO_CUSTOM_CONTEXT_KEY=te.PINO_LOGGER_DEFAULTS=void 0,te.PINO_LOGGER_DEFAULTS={level:"info"},te.PINO_CUSTOM_CONTEXT_KEY="custom_context"},9107:function(tt,te,Y){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.pino=void 0;const se=Y(85906),_e=se.__importDefault(Y(36559));Object.defineProperty(te,"pino",{enumerable:!0,get:function(){return _e.default}}),se.__exportStar(Y(65727),te),se.__exportStar(Y(58048),te)},58048:function(tt,te,Y){"use strict";Object.defineProperty(te,"__esModule",{value:!0}),te.generateChildLogger=te.formatChildLoggerContext=te.getLoggerContext=te.setBrowserLoggerContext=te.getBrowserLoggerContext=te.getDefaultLoggerOptions=void 0;const se=Y(65727);function _e(ie){return Object.assign(Object.assign({},ie),{level:(ie==null?void 0:ie.level)||se.PINO_LOGGER_DEFAULTS.level})}te.getDefaultLoggerOptions=_e;function y(ie,ne=se.PINO_CUSTOM_CONTEXT_KEY){return ie[ne]||""}te.getBrowserLoggerContext=y;function ot(ie,ne,ue=se.PINO_CUSTOM_CONTEXT_KEY){return ie[ue]=ne,ie}te.setBrowserLoggerContext=ot;function re(ie,ne=se.PINO_CUSTOM_CONTEXT_KEY){let ue="";return typeof ie.bindings>"u"?ue=y(ie,ne):ue=ie.bindings().context||"",ue}te.getLoggerContext=re;function Oe(ie,ne,ue=se.PINO_CUSTOM_CONTEXT_KEY){const Re=re(ie,ue);return Re.trim()?`${Re}/${ne}`:ne}te.formatChildLoggerContext=Oe;function Te(ie,ne,ue=se.PINO_CUSTOM_CONTEXT_KEY){const Re=Oe(ie,ne,ue),we=ie.child({context:Re});return ot(we,Re,ue)}te.generateChildLogger=Te},43014:function(){},72307:function(tt,te,Y){tt=Y.nmd(tt);var se=200,_e="__lodash_hash_undefined__",y=1,ot=2,re=9007199254740991,Oe="[object Arguments]",Te="[object Array]",ie="[object AsyncFunction]",ne="[object Boolean]",ue="[object Date]",Re="[object Error]",we="[object Function]",Ce="[object GeneratorFunction]",ce="[object Map]",rt="[object Number]",_t="[object Null]",Qe="[object Object]",Ue="[object Promise]",Yt="[object Proxy]",Xt="[object RegExp]",Kt="[object Set]",Ye="[object String]",H="[object Symbol]",oe="[object Undefined]",pe="[object WeakMap]",Ae="[object ArrayBuffer]",b="[object DataView]",R="[object Float32Array]",C="[object Float64Array]",E="[object Int8Array]",_="[object Int16Array]",O="[object Int32Array]",G="[object Uint8Array]",V="[object Uint8ClampedArray]",Z="[object Uint16Array]",N="[object Uint32Array]",W=/[\\^$.*+?()[\]{}|]/g,xe=/^\[object .+?Constructor\]$/,ve=/^(?:0|[1-9]\d*)$/,be={};be[R]=be[C]=be[E]=be[_]=be[O]=be[G]=be[V]=be[Z]=be[N]=!0,be[Oe]=be[Te]=be[Ae]=be[ne]=be[b]=be[ue]=be[Re]=be[we]=be[ce]=be[rt]=be[Qe]=be[Xt]=be[Kt]=be[Ye]=be[pe]=!1;var ar=typeof Y.g=="object"&&Y.g&&Y.g.Object===Object&&Y.g,Nr=typeof self=="object"&&self&&self.Object===Object&&self,gt=ar||Nr||Function("return this")(),z=te&&!te.nodeType&&te,q=z&&!0&&tt&&!tt.nodeType&&tt,F=q&&q.exports===z,h=F&&ar.process,S=function(){try{return h&&h.binding&&h.binding("util")}catch{}}(),me=S&&S.isTypedArray;function Fe(m,A){for(var J=-1,fe=m==null?0:m.length,ht=0,Le=[];++J<fe;){var Et=m[J];A(Et,J,m)&&(Le[ht++]=Et)}return Le}function qe(m,A){for(var J=-1,fe=A.length,ht=m.length;++J<fe;)m[ht+J]=A[J];return m}function yt(m,A){for(var J=-1,fe=m==null?0:m.length;++J<fe;)if(A(m[J],J,m))return!0;return!1}function Ge(m,A){for(var J=-1,fe=Array(m);++J<m;)fe[J]=A(J);return fe}function at(m){return function(A){return m(A)}}function Bt(m,A){return m.has(A)}function cr(m,A){return m==null?void 0:m[A]}function er(m){var A=-1,J=Array(m.size);return m.forEach(function(fe,ht){J[++A]=[ht,fe]}),J}function Rt(m,A){return function(J){return m(A(J))}}function wt(m){var A=-1,J=Array(m.size);return m.forEach(function(fe){J[++A]=fe}),J}var At=Array.prototype,St=Function.prototype,ut=Object.prototype,ct=gt["__core-js_shared__"],ft=St.toString,it=ut.hasOwnProperty,kt=function(){var m=/[^.]+$/.exec(ct&&ct.keys&&ct.keys.IE_PROTO||"");return m?"Symbol(src)_1."+m:""}(),Ot=ut.toString,Ee=RegExp("^"+ft.call(it).replace(W,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Tt=F?gt.Buffer:void 0,ur=gt.Symbol,xr=gt.Uint8Array,Pr=ut.propertyIsEnumerable,Ur=At.splice,fr=ur?ur.toStringTag:void 0,Yr=Object.getOwnPropertySymbols,yi=Tt?Tt.isBuffer:void 0,Yi=Rt(Object.keys,Object),vi=Mi(gt,"DataView"),mi=Mi(gt,"Map"),Dt=Mi(gt,"Promise"),Lt=Mi(gt,"Set"),Nt=Mi(gt,"WeakMap"),bt=Mi(Object,"create"),tr=wi(vi),Vt=wi(mi),rr=wi(Dt),Gt=wi(Lt),jt=wi(Nt),Mt=ur?ur.prototype:void 0,le=Mt?Mt.valueOf:void 0;function dt(m){var A=-1,J=m==null?0:m.length;for(this.clear();++A<J;){var fe=m[A];this.set(fe[0],fe[1])}}function Wt(){this.__data__=bt?bt(null):{},this.size=0}function zt(m){var A=this.has(m)&&delete this.__data__[m];return this.size-=A?1:0,A}function qt(m){var A=this.__data__;if(bt){var J=A[m];return J===_e?void 0:J}return it.call(A,m)?A[m]:void 0}function Jt(m){var A=this.__data__;return bt?A[m]!==void 0:it.call(A,m)}function Oo(m,A){var J=this.__data__;return this.size+=this.has(m)?0:1,J[m]=bt&&A===void 0?_e:A,this}dt.prototype.clear=Wt,dt.prototype.delete=zt,dt.prototype.get=qt,dt.prototype.has=Jt,dt.prototype.set=Oo;function Xr(m){var A=-1,J=m==null?0:m.length;for(this.clear();++A<J;){var fe=m[A];this.set(fe[0],fe[1])}}function Co(){this.__data__=[],this.size=0}function Ro(m){var A=this.__data__,J=dn(A,m);if(J<0)return!1;var fe=A.length-1;return J==fe?A.pop():Ur.call(A,J,1),--this.size,!0}function gs(m){var A=this.__data__,J=dn(A,m);return J<0?void 0:A[J][1]}function Ao(m){return dn(this.__data__,m)>-1}function To(m,A){var J=this.__data__,fe=dn(J,m);return fe<0?(++this.size,J.push([m,A])):J[fe][1]=A,this}Xr.prototype.clear=Co,Xr.prototype.delete=Ro,Xr.prototype.get=gs,Xr.prototype.has=Ao,Xr.prototype.set=To;function ji(m){var A=-1,J=m==null?0:m.length;for(this.clear();++A<J;){var fe=m[A];this.set(fe[0],fe[1])}}function Do(){this.size=0,this.__data__={hash:new dt,map:new(mi||Xr),string:new dt}}function No(m){var A=gn(this,m).delete(m);return this.size-=A?1:0,A}function Mn(m){return gn(this,m).get(m)}function zn(m){return gn(this,m).has(m)}function fn(m,A){var J=gn(this,m),fe=J.size;return J.set(m,A),this.size+=J.size==fe?0:1,this}ji.prototype.clear=Do,ji.prototype.delete=No,ji.prototype.get=Mn,ji.prototype.has=zn,ji.prototype.set=fn;function _i(m){var A=-1,J=m==null?0:m.length;for(this.__data__=new ji;++A<J;)this.add(m[A])}function ys(m){return this.__data__.set(m,_e),this}function qc(m){return this.__data__.has(m)}_i.prototype.add=_i.prototype.push=ys,_i.prototype.has=qc;function ci(m){var A=this.__data__=new Xr(m);this.size=A.size}function Fo(){this.__data__=new Xr,this.size=0}function Lo(m){var A=this.__data__,J=A.delete(m);return this.size=A.size,J}function $c(m){return this.__data__.get(m)}function jo(m){return this.__data__.has(m)}function Uc(m,A){var J=this.__data__;if(J instanceof Xr){var fe=J.__data__;if(!mi||fe.length<se-1)return fe.push([m,A]),this.size=++J.size,this;J=this.__data__=new ji(fe)}return J.set(m,A),this.size=J.size,this}ci.prototype.clear=Fo,ci.prototype.delete=Lo,ci.prototype.get=$c,ci.prototype.has=jo,ci.prototype.set=Uc;function vs(m,A){var J=yn(m),fe=!J&&Is(m),ht=!J&&!fe&&bi(m),Le=!J&&!fe&&!ht&&Ss(m),Et=J||fe||ht||Le,Qt=Et?Ge(m.length,String):[],ir=Qt.length;for(var vt in m)(A||it.call(m,vt))&&!(Et&&(vt=="length"||ht&&(vt=="offset"||vt=="parent")||Le&&(vt=="buffer"||vt=="byteLength"||vt=="byteOffset")||Ko(vt,ir)))&&Qt.push(vt);return Qt}function dn(m,A){for(var J=m.length;J--;)if(Es(m[J][0],A))return J;return-1}function Hc(m,A,J){var fe=A(m);return yn(m)?fe:qe(fe,J(m))}function pn(m){return m==null?m===void 0?oe:_t:fr&&fr in Object(m)?Uo(m):Vo(m)}function ms(m){return Xi(m)&&pn(m)==Oe}function Hr(m,A,J,fe,ht){return m===A?!0:m==null||A==null||!Xi(m)&&!Xi(A)?m!==m&&A!==A:De(m,A,J,fe,Hr,ht)}function De(m,A,J,fe,ht,Le){var Et=yn(m),Qt=yn(A),ir=Et?Te:ui(m),vt=Qt?Te:ui(A);ir=ir==Oe?Qe:ir,vt=vt==Oe?Qe:vt;var mr=ir==Qe,Fr=vt==Qe,hr=ir==vt;if(hr&&bi(m)){if(!bi(A))return!1;Et=!0,mr=!1}if(hr&&!mr)return Le||(Le=new ci),Et||Ss(m)?qn(m,A,J,fe,ht,Le):qo(m,A,ir,J,fe,ht,Le);if(!(J&y)){var Sr=mr&&it.call(m,"__wrapped__"),Or=Fr&&it.call(A,"__wrapped__");if(Sr||Or){var hi=Sr?m.value():m,ei=Or?A.value():A;return Le||(Le=new ci),ht(hi,ei,J,fe,Le)}}return hr?(Le||(Le=new ci),$o(m,A,J,fe,ht,Le)):!1}function Mo(m){if(!Ps(m)||Bo(m))return!1;var A=xs(m)?Ee:xe;return A.test(wi(m))}function zo(m){return Xi(m)&&Zt(m.length)&&!!be[pn(m)]}function _s(m){if(!ko(m))return Yi(m);var A=[];for(var J in Object(m))it.call(m,J)&&J!="constructor"&&A.push(J);return A}function qn(m,A,J,fe,ht,Le){var Et=J&y,Qt=m.length,ir=A.length;if(Qt!=ir&&!(Et&&ir>Qt))return!1;var vt=Le.get(m);if(vt&&Le.get(A))return vt==A;var mr=-1,Fr=!0,hr=J&ot?new _i:void 0;for(Le.set(m,A),Le.set(A,m);++mr<Qt;){var Sr=m[mr],Or=A[mr];if(fe)var hi=Et?fe(Or,Sr,mr,A,m,Le):fe(Sr,Or,mr,m,A,Le);if(hi!==void 0){if(hi)continue;Fr=!1;break}if(hr){if(!yt(A,function(ei,Ei){if(!Bt(hr,Ei)&&(Sr===ei||ht(Sr,ei,J,fe,Le)))return hr.push(Ei)})){Fr=!1;break}}else if(!(Sr===Or||ht(Sr,Or,J,fe,Le))){Fr=!1;break}}return Le.delete(m),Le.delete(A),Fr}function qo(m,A,J,fe,ht,Le,Et){switch(J){case b:if(m.byteLength!=A.byteLength||m.byteOffset!=A.byteOffset)return!1;m=m.buffer,A=A.buffer;case Ae:return!(m.byteLength!=A.byteLength||!Le(new xr(m),new xr(A)));case ne:case ue:case rt:return Es(+m,+A);case Re:return m.name==A.name&&m.message==A.message;case Xt:case Ye:return m==A+"";case ce:var Qt=er;case Kt:var ir=fe&y;if(Qt||(Qt=wt),m.size!=A.size&&!ir)return!1;var vt=Et.get(m);if(vt)return vt==A;fe|=ot,Et.set(m,A);var mr=qn(Qt(m),Qt(A),fe,ht,Le,Et);return Et.delete(m),mr;case H:if(le)return le.call(m)==le.call(A)}return!1}function $o(m,A,J,fe,ht,Le){var Et=J&y,Qt=ws(m),ir=Qt.length,vt=ws(A),mr=vt.length;if(ir!=mr&&!Et)return!1;for(var Fr=ir;Fr--;){var hr=Qt[Fr];if(!(Et?hr in A:it.call(A,hr)))return!1}var Sr=Le.get(m);if(Sr&&Le.get(A))return Sr==A;var Or=!0;Le.set(m,A),Le.set(A,m);for(var hi=Et;++Fr<ir;){hr=Qt[Fr];var ei=m[hr],Ei=A[hr];if(fe)var Os=Et?fe(Ei,ei,hr,A,m,Le):fe(ei,Ei,hr,m,A,Le);if(!(Os===void 0?ei===Ei||ht(ei,Ei,J,fe,Le):Os)){Or=!1;break}hi||(hi=hr=="constructor")}if(Or&&!hi){var mn=m.constructor,_n=A.constructor;mn!=_n&&"constructor"in m&&"constructor"in A&&!(typeof mn=="function"&&mn instanceof mn&&typeof _n=="function"&&_n instanceof _n)&&(Or=!1)}return Le.delete(m),Le.delete(A),Or}function ws(m){return Hc(m,Wo,Ho)}function gn(m,A){var J=m.__data__;return bs(A)?J[typeof A=="string"?"string":"hash"]:J.map}function Mi(m,A){var J=cr(m,A);return Mo(J)?J:void 0}function Uo(m){var A=it.call(m,fr),J=m[fr];try{m[fr]=void 0;var fe=!0}catch{}var ht=Ot.call(m);return fe&&(A?m[fr]=J:delete m[fr]),ht}var Ho=Yr?function(m){return m==null?[]:(m=Object(m),Fe(Yr(m),function(A){return Pr.call(m,A)}))}:Jo,ui=pn;(vi&&ui(new vi(new ArrayBuffer(1)))!=b||mi&&ui(new mi)!=ce||Dt&&ui(Dt.resolve())!=Ue||Lt&&ui(new Lt)!=Kt||Nt&&ui(new Nt)!=pe)&&(ui=function(m){var A=pn(m),J=A==Qe?m.constructor:void 0,fe=J?wi(J):"";if(fe)switch(fe){case tr:return b;case Vt:return ce;case rr:return Ue;case Gt:return Kt;case jt:return pe}return A});function Ko(m,A){return A=A??re,!!A&&(typeof m=="number"||ve.test(m))&&m>-1&&m%1==0&&m<A}function bs(m){var A=typeof m;return A=="string"||A=="number"||A=="symbol"||A=="boolean"?m!=="__proto__":m===null}function Bo(m){return!!kt&&kt in m}function ko(m){var A=m&&m.constructor,J=typeof A=="function"&&A.prototype||ut;return m===J}function Vo(m){return Ot.call(m)}function wi(m){if(m!=null){try{return ft.call(m)}catch{}try{return m+""}catch{}}return""}function Es(m,A){return m===A||m!==m&&A!==A}var Is=ms(function(){return arguments}())?ms:function(m){return Xi(m)&&it.call(m,"callee")&&!Pr.call(m,"callee")},yn=Array.isArray;function vn(m){return m!=null&&Zt(m.length)&&!xs(m)}var bi=yi||Zo;function Go(m,A){return Hr(m,A)}function xs(m){if(!Ps(m))return!1;var A=pn(m);return A==we||A==Ce||A==ie||A==Yt}function Zt(m){return typeof m=="number"&&m>-1&&m%1==0&&m<=re}function Ps(m){var A=typeof m;return m!=null&&(A=="object"||A=="function")}function Xi(m){return m!=null&&typeof m=="object"}var Ss=me?at(me):zo;function Wo(m){return vn(m)?vs(m):_s(m)}function Jo(){return[]}function Zo(){return!1}tt.exports=Go},85346:function(tt){"use strict";function te(se){try{return JSON.stringify(se)}catch{return'"[Circular]"'}}tt.exports=Y;function Y(se,_e,y){var ot=y&&y.stringify||te,re=1;if(typeof se=="object"&&se!==null){var Oe=_e.length+re;if(Oe===1)return se;var Te=new Array(Oe);Te[0]=ot(se);for(var ie=1;ie<Oe;ie++)Te[ie]=ot(_e[ie]);return Te.join(" ")}if(typeof se!="string")return se;var ne=_e.length;if(ne===0)return se;for(var ue="",Re=1-re,we=-1,Ce=se&&se.length||0,ce=0;ce<Ce;){if(se.charCodeAt(ce)===37&&ce+1<Ce){switch(we=we>-1?we:0,se.charCodeAt(ce+1)){case 100:case 102:if(Re>=ne||_e[Re]==null)break;we<ce&&(ue+=se.slice(we,ce)),ue+=Number(_e[Re]),we=ce+2,ce++;break;case 105:if(Re>=ne||_e[Re]==null)break;we<ce&&(ue+=se.slice(we,ce)),ue+=Math.floor(Number(_e[Re])),we=ce+2,ce++;break;case 79:case 111:case 106:if(Re>=ne||_e[Re]===void 0)break;we<ce&&(ue+=se.slice(we,ce));var rt=typeof _e[Re];if(rt==="string"){ue+="'"+_e[Re]+"'",we=ce+2,ce++;break}if(rt==="function"){ue+=_e[Re].name||"<anonymous>",we=ce+2,ce++;break}ue+=ot(_e[Re]),we=ce+2,ce++;break;case 115:if(Re>=ne)break;we<ce&&(ue+=se.slice(we,ce)),ue+=String(_e[Re]),we=ce+2,ce++;break;case 37:we<ce&&(ue+=se.slice(we,ce)),ue+="%",we=ce+2,ce++,Re--;break}++Re}++ce}return we===-1?se:(we<Ce&&(ue+=se.slice(we)),ue)}},36559:function(tt,te,Y){"use strict";const se=Y(85346);tt.exports=re;const _e=Ye().console||{},y={mapHttpRequest:rt,mapHttpResponse:rt,wrapRequestSerializer:_t,wrapResponseSerializer:_t,wrapErrorSerializer:_t,req:rt,res:rt,err:Ce};function ot(H,oe){return Array.isArray(H)?H.filter(function(Ae){return Ae!=="!stdSerializers.err"}):H===!0?Object.keys(oe):!1}function re(H){H=H||{},H.browser=H.browser||{};const oe=H.browser.transmit;if(oe&&typeof oe.send!="function")throw Error("pino: transmit option must have a send function");const pe=H.browser.write||_e;H.browser.write&&(H.browser.asObject=!0);const Ae=H.serializers||{},b=ot(H.browser.serialize,Ae);let R=H.browser.serialize;Array.isArray(H.browser.serialize)&&H.browser.serialize.indexOf("!stdSerializers.err")>-1&&(R=!1);const C=["error","fatal","warn","info","debug","trace"];typeof pe=="function"&&(pe.error=pe.fatal=pe.warn=pe.info=pe.debug=pe.trace=pe),H.enabled===!1&&(H.level="silent");const E=H.level||"info",_=Object.create(pe);_.log||(_.log=Qe),Object.defineProperty(_,"levelVal",{get:G}),Object.defineProperty(_,"level",{get:V,set:Z});const O={transmit:oe,serialize:b,asObject:H.browser.asObject,levels:C,timestamp:ce(H)};_.levels=re.levels,_.level=E,_.setMaxListeners=_.getMaxListeners=_.emit=_.addListener=_.on=_.prependListener=_.once=_.prependOnceListener=_.removeListener=_.removeAllListeners=_.listeners=_.listenerCount=_.eventNames=_.write=_.flush=Qe,_.serializers=Ae,_._serialize=b,_._stdErrSerialize=R,_.child=N,oe&&(_._logEvent=we());function G(){return this.level==="silent"?1/0:this.levels.values[this.level]}function V(){return this._level}function Z(W){if(W!=="silent"&&!this.levels.values[W])throw Error("unknown level "+W);this._level=W,Oe(O,_,"error","log"),Oe(O,_,"fatal","error"),Oe(O,_,"warn","error"),Oe(O,_,"info","log"),Oe(O,_,"debug","log"),Oe(O,_,"trace","log")}function N(W,xe){if(!W)throw new Error("missing bindings for child Pino");xe=xe||{},b&&W.serializers&&(xe.serializers=W.serializers);const ve=xe.serializers;if(b&&ve){var be=Object.assign({},Ae,ve),ar=H.browser.serialize===!0?Object.keys(be):b;delete W.serializers,ne([W],ar,be,this._stdErrSerialize)}function Nr(gt){this._childLevel=(gt._childLevel|0)+1,this.error=ue(gt,W,"error"),this.fatal=ue(gt,W,"fatal"),this.warn=ue(gt,W,"warn"),this.info=ue(gt,W,"info"),this.debug=ue(gt,W,"debug"),this.trace=ue(gt,W,"trace"),be&&(this.serializers=be,this._serialize=ar),oe&&(this._logEvent=we([].concat(gt._logEvent.bindings,W)))}return Nr.prototype=this,new Nr(this)}return _}re.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},re.stdSerializers=y,re.stdTimeFunctions=Object.assign({},{nullTime:Ue,epochTime:Yt,unixTime:Xt,isoTime:Kt});function Oe(H,oe,pe,Ae){const b=Object.getPrototypeOf(oe);oe[pe]=oe.levelVal>oe.levels.values[pe]?Qe:b[pe]?b[pe]:_e[pe]||_e[Ae]||Qe,Te(H,oe,pe)}function Te(H,oe,pe){!H.transmit&&oe[pe]===Qe||(oe[pe]=function(Ae){return function(){const R=H.timestamp(),C=new Array(arguments.length),E=Object.getPrototypeOf&&Object.getPrototypeOf(this)===_e?_e:this;for(var _=0;_<C.length;_++)C[_]=arguments[_];if(H.serialize&&!H.asObject&&ne(C,this._serialize,this.serializers,this._stdErrSerialize),H.asObject?Ae.call(E,ie(this,pe,C,R)):Ae.apply(E,C),H.transmit){const O=H.transmit.level||oe.level,G=re.levels.values[O],V=re.levels.values[pe];if(V<G)return;Re(this,{ts:R,methodLevel:pe,methodValue:V,transmitLevel:O,transmitValue:re.levels.values[H.transmit.level||oe.level],send:H.transmit.send,val:oe.levelVal},C)}}}(oe[pe]))}function ie(H,oe,pe,Ae){H._serialize&&ne(pe,H._serialize,H.serializers,H._stdErrSerialize);const b=pe.slice();let R=b[0];const C={};Ae&&(C.time=Ae),C.level=re.levels.values[oe];let E=(H._childLevel|0)+1;if(E<1&&(E=1),R!==null&&typeof R=="object"){for(;E--&&typeof b[0]=="object";)Object.assign(C,b.shift());R=b.length?se(b.shift(),b):void 0}else typeof R=="string"&&(R=se(b.shift(),b));return R!==void 0&&(C.msg=R),C}function ne(H,oe,pe,Ae){for(const b in H)if(Ae&&H[b]instanceof Error)H[b]=re.stdSerializers.err(H[b]);else if(typeof H[b]=="object"&&!Array.isArray(H[b]))for(const R in H[b])oe&&oe.indexOf(R)>-1&&R in pe&&(H[b][R]=pe[R](H[b][R]))}function ue(H,oe,pe){return function(){const Ae=new Array(1+arguments.length);Ae[0]=oe;for(var b=1;b<Ae.length;b++)Ae[b]=arguments[b-1];return H[pe].apply(this,Ae)}}function Re(H,oe,pe){const Ae=oe.send,b=oe.ts,R=oe.methodLevel,C=oe.methodValue,E=oe.val,_=H._logEvent.bindings;ne(pe,H._serialize||Object.keys(H.serializers),H.serializers,H._stdErrSerialize===void 0?!0:H._stdErrSerialize),H._logEvent.ts=b,H._logEvent.messages=pe.filter(function(O){return _.indexOf(O)===-1}),H._logEvent.level.label=R,H._logEvent.level.value=C,Ae(R,H._logEvent,E),H._logEvent=we(_)}function we(H){return{ts:0,messages:[],bindings:H||[],level:{label:"",value:0}}}function Ce(H){const oe={type:H.constructor.name,msg:H.message,stack:H.stack};for(const pe in H)oe[pe]===void 0&&(oe[pe]=H[pe]);return oe}function ce(H){return typeof H.timestamp=="function"?H.timestamp:H.timestamp===!1?Ue:Yt}function rt(){return{}}function _t(H){return H}function Qe(){}function Ue(){return!1}function Yt(){return Date.now()}function Xt(){return Math.round(Date.now()/1e3)}function Kt(){return new Date(Date.now()).toISOString()}function Ye(){function H(oe){return typeof oe<"u"&&oe}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return H(self)||H(window)||H(this)||{}}}}}]);
